import{X as M,Y as j,a9 as S,ab as O,O as a,Q as u,T as I,U as $,ac as c,R as h,a2 as w,a3 as k,a1 as C,S as B,ae as z,al as P,a5 as T,aw as V,a4 as H,bm as R,ag as A,Z as E,bn as Y,ay as F,aK as D,$ as N,aB as G,av as U,b8 as K,ad as L,bk as Q,_ as X,bl as Z,bh as q,at as J,aG as W}from"./DtnvSbKK.js";import{_ as ee,s as te}from"./DWK080-R.js";import{C as ne}from"./b2tYUvpG.js";const oe={key:0,class:"absolute top-0 left-0 z-10 h-full w-full"},se={class:"bg-bg-aside flex h-full w-full flex-col justify-end"},ae={class:"nice-scrollbars *:border-border overflow-auto *:border-t"},ie={class:"border-border flex items-center border-t py-1 pr-0"},le={class:"pl-normal gap-small flex flex-1 items-center text-sm font-semibold"},re={class:"text-invert rounded-full bg-neutral-600 px-[8px] py-[2.5px] text-xs font-semibold dark:bg-neutral-300"},ce={key:0,class:"border-border group-hocus:border-text-dimmed grid size-[38px] place-items-center rounded-full border-3 border-dashed text-xs font-semibold transition-[border,color]"},de=M({__name:"ButtonPaneContributions",props:{contributions:{}},async setup(e){let i,b;const x=j(),m=A(()=>e.contributions?[...e.contributions].sort(()=>Math.random()-.5).slice(0,Math.min(4,e.contributions.length)):[]),v=A(()=>e.contributions?e.contributions.length-m.value.length:0),t=E(!1),g=([i,b]=S(()=>O("contribution")),i=await i,b(),i);return(l,n)=>{const s=P,o=V,f=ee,d=R;return e.contributions?(a(),u(w,{key:0},[I(o,null,{default:$(()=>[c(t)?(a(),u("div",oe,[h("div",se,[h("div",ae,[(a(!0),u(w,null,k(e.contributions.sort((r,y)=>r.contributorId.localeCompare(y.contributorId)),r=>(a(),C(ne,{contribution:r},null,8,["contribution"]))),256))]),h("div",ie,[h("div",le,[h("span",null,B(("formatText"in l?l.formatText:c(z))(c(g).contribution)),1),h("span",re,B(e.contributions.length),1)]),h("button",{onClick:n[0]||(n[0]=r=>t.value=!1),class:"text-text-muted hocus:text-text p-normal cursor-pointer transition-[color]"},[I(s,{name:"plus",class:"rotate-45 text-[24px] leading-none"})])])])])):T("",!0)]),_:1}),I(d,{onClick:n[1]||(n[1]=r=>t.value=!0),class:"group border-t border-b-0 py-1"},{main:$(()=>[(a(!0),u(w,null,k(c(m),r=>(a(),C(f,{url:r.avatarUrl?c(x)(r.avatarUrl):"user",style:H({"--mediaColor":("stringColor"in l?l.stringColor:c(te))(r.contributorId)}),class:"size-[38px] rounded-full"},null,8,["url","style"]))),256)),c(v)?(a(),u("div",ce," +"+B(c(v)),1)):T("",!0)]),_:1})],64)):T("",!0)}}}),Ce=Object.assign(de,{__name:"AsideMinorContentButtonPaneContributions"}),ue={key:0,class:"group/children relative overflow-hidden"},me=M({__name:"TocItem",props:{item:{},level:{}},async setup(e){let i,b;const x=([i,b]=S(async()=>(async()=>{let t=e.item.type==="heading"?Y.name:e.item.schemaName;return await F(t)})()),i=await i,b(),i),m=E(!1),v=D("activeHeadingIds",E(new Set));return N(()=>{if(e.item.type==="heading")G(v,t=>{m.value=t.has(e.item.elementId)},{immediate:!0});else if(e.item.elementId){const t=document.getElementById(e.item.elementId);if(t){const g=new IntersectionObserver(l=>{l.forEach(n=>{m.value=n.isIntersecting})});g.observe(t),U(()=>{g.disconnect()})}}}),(t,g)=>{const l=Q,n=K("TocItem",!0);return a(),u("div",{class:L([t.$style.item,c(m)&&t.$style.activeItem])},[I(l,{level:e.level,icon:c(x),main:("formatText"in t?t.formatText:c(z))(e.item.title),state:c(m)?"active":void 0,to:"#"+e.item.elementId},null,8,["level","icon","main","state","to"]),e.item.type==="heading"?(a(),u("div",ue,[h("div",{style:H({"--level":e.level?+e.level:0}),class:L([`border-text-dimmed absolute top-0
          left-[calc(var(--spacing-normal)*(var(--level)+1)+6.5px)] h-full
          border-l opacity-40 transition-[border]`,t.$style.leftLine])},null,6),(a(!0),u(w,null,k(e.item.children,s=>(a(),C(n,{item:s,level:e.item.level},null,8,["item","level"]))),256))])):T("",!0)],2)}}}),fe="_item_1cxom_3",be="_activeItem_1cxom_3",ve="_leftLine_1cxom_7",_e={item:fe,activeItem:be,leftLine:ve},he={$style:_e},ge=Object.assign(X(me,[["__cssModules",he]]),{__name:"AsideMinorContentTocItem"}),xe={key:0},ye=M({__name:"Toc",props:{toc:{}},async setup(e){let i,b;const x=e,m=([i,b]=S(()=>O("no_toc")),i=await i,b(),i),v=J(new Set);W("activeHeadingIds",v);function t(l){const n=[],s=o=>{o.type==="heading"&&(n.push(o),o.children.forEach(s))};return l.forEach(s),n}function g(l){const n=window.scrollY;let s=null;for(const{id:o,el:f}of l)if(f.offsetTop<n)s=o;else break;return s}return N(()=>{if(!x.toc)return;const n=t(x.toc).map(d=>({id:d.elementId,el:document.getElementById(d.elementId)})).filter(d=>!!d.el);if(n.length===0)return;const s=new Set;let o=g(n);o&&(v.value=new Set([o]));const f=new IntersectionObserver(d=>{let r=!1;for(const _ of d){const p=_.target.id;_.isIntersecting?s.has(p)||(s.add(p),r=!0):(s.delete(p)&&(r=!0),_.boundingClientRect.top<0?o=p:o===p&&(o=null))}if(!r)return;const y=new Set;if(s.size>0)s.forEach(_=>y.add(_));else if(o){const _=document.getElementById(o);_&&_.getBoundingClientRect().top<0&&y.add(o)}v.value=y},{root:null});n.forEach(({el:d})=>f.observe(d)),U(()=>{f.disconnect()})}),(l,n)=>{const s=Z,o=q;return e.toc?(a(),u("div",xe,[I(s,null,{default:$(()=>[(a(!0),u(w,null,k(e.toc,f=>(a(),C(ge,{key:f.elementId,item:f,level:0},null,8,["item"]))),128))]),_:1})])):(a(),C(o,{key:1,text:c(m).no_toc},null,8,["text"]))}}}),Te=Object.assign(ye,{__name:"AsideMinorContentToc"});export{Ce as B,Te as T};
