import{Q as M,a4 as z,R as E,a2 as $,a5 as A,H as u,V as w,I as r,L as y,M as S,a6 as c,J as h,W as x,X as T,U as k,K as C,a8 as H,ad as V,ap as j,Y as U,Z as L,b5 as P,b6 as R,ar as Y,aC as F,S as N,av as D,ao as O,b7 as J,b3 as K,a7 as Q,am as W,b4 as X,az as Z}from"./D2eihLR_.js";import{_ as q,s as G}from"./CZU75N3T.js";import{C as ee}from"./Ci42AVE3.js";const te={key:0,class:"absolute top-0 left-0 z-10 h-full w-full"},ne={class:"bg-bg-aside flex h-full w-full flex-col justify-end transition-[background]"},oe={class:"nice-scrollbars *:border-border overflow-auto *:border-t"},se={class:"border-border flex items-center border-t py-1 pr-0 transition-[border]"},re={class:"pl-normal gap-small flex flex-1 items-center text-sm font-semibold"},ae={class:"text-invert rounded-full bg-neutral-600 px-[8px] py-[2.5px] text-xs font-semibold transition-[color,background] dark:bg-neutral-300"},ie={key:0,class:"border-border group-hocus:border-text-dimmed grid size-[38px] place-items-center rounded-full border-3 border-dashed text-xs font-semibold transition-[border,color]"},le=M({__name:"ButtonPaneContributions",props:{contributions:{}},async setup(e){let a,b;const g=z(()=>e.contributions?[...e.contributions].sort(()=>Math.random()-.5).slice(0,Math.min(4,e.contributions.length)):[]),m=z(()=>e.contributions?e.contributions.length-g.value.length:0),f=E(!1),l=([a,b]=$(()=>A("contribution")),a=await a,b(),a);return(d,i)=>{const s=V,o=j,t=q,_=P;return e.contributions?(r(),u(x,{key:0},[y(o,null,{default:S(()=>[c(f)?(r(),u("div",te,[h("div",ne,[h("div",oe,[(r(!0),u(x,null,T(e.contributions.sort((n,p)=>n.contributorId.localeCompare(p.contributorId)),n=>(r(),k(ee,{contribution:n},null,8,["contribution"]))),256))]),h("div",se,[h("div",re,[h("span",null,C(("formatText"in d?d.formatText:c(H))(c(l).contribution)),1),h("span",ae,C(e.contributions.length),1)]),h("button",{onClick:i[0]||(i[0]=n=>f.value=!1),class:"text-text-muted hocus:text-text p-normal cursor-pointer transition-[color]"},[y(s,{name:"plus",class:"rotate-45 text-[24px] leading-none"})])])])])):w("",!0)]),_:1}),y(_,{onClick:i[1]||(i[1]=n=>f.value=!0),class:"group border-t border-b-0 py-1"},{main:S(()=>[(r(!0),u(x,null,T(c(g),n=>(r(),k(t,{url:n.avatarUrl?("withBaseUrl"in d?d.withBaseUrl:c(L))(n.avatarUrl):"user",style:U({"--mediaColor":("stringColor"in d?d.stringColor:c(G))(n.contributorId)}),class:"size-[38px] rounded-full"},null,8,["url","style"]))),256)),c(m)?(r(),u("div",ie," +"+C(c(m)),1)):w("",!0)]),_:1})],64)):w("",!0)}}}),_e=Object.assign(le,{__name:"AsideMinorContentButtonPaneContributions"}),ce={key:0,class:"relative overflow-hidden"},de=M({__name:"TocItem",props:{item:{},level:{}},async setup(e){let a,b;const g=([a,b]=$(async()=>(async()=>{let l=e.item.type==="heading"?R.name:e.item.schemaName;return await Y(l)})()),a=await a,b(),a),m=E(!1),f=F("activeHeadingIds",E(new Set));return N(()=>{if(e.item.type==="heading")D(f,l=>{m.value=l.has(e.item.elementId)},{immediate:!0});else if(e.item.elementId){const l=document.getElementById(e.item.elementId);if(l){const d=new IntersectionObserver(i=>{i.forEach(s=>{m.value=s.isIntersecting})});d.observe(l),O(()=>{d.disconnect()})}}}),(l,d)=>{const i=K,s=J("TocItem",!0);return r(),u(x,null,[y(i,{level:e.level,icon:c(g),main:("formatText"in l?l.formatText:c(H))(e.item.title),state:c(m)?"active":void 0,to:"#"+e.item.elementId},null,8,["level","icon","main","state","to"]),e.item.type==="heading"?(r(),u("div",ce,[h("div",{style:U({"--level":e.level?+e.level:0}),class:Q([`absolute top-0
                left-[calc(var(--spacing-normal)*(var(--level)+1)+8px)] h-full
                border-l opacity-40 transition-[border]`,[c(m)?"border-brand":"border-text-dimmed"]])},null,6),(r(!0),u(x,null,T(e.item.children,o=>(r(),k(s,{item:o,level:e.item.level},null,8,["item","level"]))),256))])):w("",!0)],64)}}}),ue=Object.assign(de,{__name:"AsideMinorContentTocItem"}),me={key:0},fe={key:1,class:"text-text-muted p-normal text-center"},be=M({__name:"Toc",props:{toc:{}},async setup(e){let a,b;const g=e,m=([a,b]=$(()=>A("no_toc")),a=await a,b(),a),f=W(new Set);Z("activeHeadingIds",f);function l(i){const s=[],o=t=>{t.type==="heading"&&(s.push(t),t.children.forEach(o))};return i.forEach(o),s}function d(i){const s=window.scrollY;let o=null;for(const{id:t,el:_}of i)if(_.offsetTop<s)o=t;else break;return o}return N(()=>{if(!g.toc)return;const s=l(g.toc).map(n=>({id:n.elementId,el:document.getElementById(n.elementId)})).filter(n=>!!n.el);if(s.length===0)return;const o=new Set;let t=d(s);t&&(f.value=new Set([t]));const _=new IntersectionObserver(n=>{let p=!1;for(const v of n){const I=v.target.id;v.isIntersecting?o.has(I)||(o.add(I),p=!0):(o.delete(I)&&(p=!0),v.boundingClientRect.top<0?t=I:t===I&&(t=null))}if(!p)return;const B=new Set;if(o.size>0)o.forEach(v=>B.add(v));else if(t){const v=document.getElementById(t);v&&v.getBoundingClientRect().top<0&&B.add(t)}f.value=B},{root:null});s.forEach(({el:n})=>_.observe(n)),O(()=>{_.disconnect()})}),(i,s)=>{const o=X;return e.toc?(r(),u("div",me,[y(o,null,{default:S(()=>[(r(!0),u(x,null,T(e.toc,t=>(r(),k(ue,{key:t.elementId,item:t,level:0},null,8,["item"]))),128))]),_:1})])):(r(),u("p",fe,C(c(m).no_toc),1))}}}),xe=Object.assign(be,{__name:"AsideMinorContentToc"});export{_e as B,xe as T};
