import{Y as L,X as b,O as o,Q as s,R as c,ac as e,a5 as u,a9 as B,ab as O,au as F,av as R,T as p,al as D,S as _,ae as v,U as k,a4 as S,aw as q,Z as j,a2 as w,a3 as M,a1 as h,am as N,ad as T,ag as U,_ as K,ar as H,a6 as P,V as z,$ as Q,ai as X,ax as Y,a8 as Z}from"./DtnvSbKK.js";import{u as G,a as J,s as W}from"./CJ5ok-oq.js";import{d as ee}from"./kkX2Jesd.js";function te(t){return L()("/file/"+t)}const ne={key:0,class:"pl-small pb-small pt-main pr-main float-right max-[700px]:hidden"},ae=["src"],oe=b({__name:"MainDecoration",props:{decoration:{}},setup(t){return(n,m)=>t.decoration?(o(),s("section",ne,[c("img",{src:("fileUrl"in n?n.fileUrl:e(te))(t.decoration),class:"block aspect-square max-h-[125px] w-full max-w-[125px]"},null,8,ae)])):u("",!0)}}),He=Object.assign(oe,{__name:"MainDecoration"}),se={class:"bg-bg-main rounded border-2 border-(--flagColor)/30 shadow-[0_0_14px_var(--flagColor)]/40 dark:shadow-[0_0_14px_var(--flagColor)]/20"},re={class:"p-small bg-linear-60 from-(--flagColor)/5 to-(--flagColor)/20 text-(--flagColor)"},le={class:"p-small float-right pt-0 pr-0"},ce={class:"pb-small text-main-sm font-semibold"},ie={class:"text-main-xs"},de=b({__name:"MainFlag",props:{flag:{}},async setup(t){let n,m;const r=([n,m]=B(()=>O("flag_advanced","flag_advanced_description","flag_dev","flag_dev_description","flag_secondary","flag_secondary_description")),n=await n,m(),n),i={dev:{icon:"construction",color:"light-dark(var(--color-yellow-700),var(--color-yellow-500))",title:r.flag_dev,description:r.flag_dev_description},advanced:{icon:"asterisk",color:"light-dark(#72189a,#ff94ff)",title:r.flag_advanced,description:r.flag_advanced_description},secondary:{icon:"puzzle",color:"light-dark(#558a1a,#8bb759)",title:r.flag_secondary,description:r.flag_secondary_description}}[t.flag],g=F("reference"),f=F("popup"),l=j(!1),d=j(null),{floatingStyles:C}=G(g,f,{placement:"bottom",whileElementsMounted:J,middleware:[W({boundary:document?.querySelector("[data-erudit-main]")||void 0})]}),$=()=>{d.value=setTimeout(()=>{l.value=!0},400)},y=()=>{d.value&&(clearTimeout(d.value),d.value=null),l.value=!1};return R(()=>{d.value&&clearTimeout(d.value)}),(x,E)=>{const I=D,V=q;return o(),s("div",{ref:"reference",style:S({"--flagColor":e(i).color}),onMouseenter:$,onMouseleave:y},[c("div",{onTouchstart:E[0]||(E[0]=Le=>e(l)?y():$()),class:"px-small text-main-sm flex cursor-help items-center gap-1 rounded border border-(--flagColor)/30 bg-(--flagColor)/15 py-1 text-(--flagColor)"},[p(I,{name:e(i).icon,class:"text-[1.3em]"},null,8,["name"]),c("span",null,_(("formatText"in x?x.formatText:e(v))(e(i).title)),1)],32),p(V,null,{default:k(()=>[e(l)?(o(),s("div",{key:0,style:S(e(C)),ref:"popup",class:"z-10 max-w-[320px] p-2"},[c("div",se,[c("div",re,[c("div",le,[p(I,{name:e(i).icon,class:"text-[40px] opacity-30"},null,8,["name"])]),c("div",ce,_(("formatText"in x?x.formatText:e(v))(e(i).title)),1),c("div",ie,_(("formatText"in x?x.formatText:e(v))(e(i).description)),1)])])],4)):u("",!0)]),_:1})],36)}}}),me=Object.assign(de,{__name:"MainFlag"}),ue={key:0,class:"gap-small micro:gap-normal micro:justify-start px-main py-main-half flex flex-wrap justify-center"},_e=b({__name:"MainFlags",props:{flags:{}},setup(t){const n=t.flags?Object.keys(t.flags).sort():[];return(m,r)=>{const a=me;return t.flags?(o(),s("section",ue,[(o(!0),s(w,null,M(e(n),i=>(o(),h(a,{flag:i},null,8,["flag"]))),256))])):u("",!0)}}}),Qe=Object.assign(_e,{__name:"MainFlags"}),pe={key:0,class:"font-bold"},fe=b({__name:"MainConnectionsButton",props:{type:{},active:{type:Boolean},count:{}},async setup(t){let n,m;const r=t.type==="hardDependencies",a=([n,m]=B(()=>O("need_to_know","depends_on","used_by","externals")),n=await n,m(),n),i=(()=>{switch(t.type){case"hardDependencies":return a.need_to_know;case"autoDependencies":return a.depends_on;case"dependents":return a.used_by;case"externals":return a.externals}})(),g=(()=>{switch(t.type){case"hardDependencies":return"warning";case"autoDependencies":return"arrow/to-circle";case"dependents":return"arrow/from-circle";case"externals":return"arrow/outward-box"}})(),f=U(()=>t.active?"border-(--activeColor) text-(--activeColor) bg-(--activeColor)/10 hocus:ring-(--activeColor)/25":"border-border bg-bg-aside text-text-muted hocus:ring-(--activeColor)/25 hocus:text-(--activeColor) hocus:border-(--activeColor)");return(l,d)=>{const C=D;return o(),s("button",{style:S({"--activeColor":r?"light-dark(var(--color-red-700),var(--color-red-400))":"var(--color-brand)"}),class:T([`gap-small text-main-sm px-small flex cursor-pointer items-center rounded
      border py-1 ring-2 ring-transparent
      transition-[border,color,box-shadow,background]`,e(f)])},[p(C,{name:e(g),class:"text-[1.2em]"},null,8,["name"]),c("span",null,_(("formatText"in l?l.formatText:e(v))(e(i))),1),t.count?(o(),s("span",pe,_(t.count),1)):u("",!0),N(l.$slots,"after")],6)}}}),xe=Object.assign(fe,{__name:"MainConnectionsButton"}),ve={},ge={class:"nice-scrollbars border-border mt-normal relative overflow-auto border-t border-b"};function he(t,n){return o(),s("div",ge,[N(t.$slots,"default")])}const A=Object.assign(K(ve,[["render",he]]),{__name:"MainConnectionsScrollPane"}),be={class:"gap-small flex"},ye={class:"flex flex-col gap-0.5"},we={key:0,class:"text-text-muted text-main-sm italic"},Ce=b({__name:"Deps",props:{deps:{}},setup(t){return(n,m)=>{const r=D,a=P;return o(),h(A,{class:"py-normal gap-main-half flex max-h-[500px] flex-col"},{default:k(()=>[(o(!0),s(w,null,M(t.deps,i=>(o(),s("div",be,[p(r,{name:("ICONS"in n?n.ICONS:e(H))[i.contentType],class:"relative top-1 shrink-0"},null,8,["name"]),c("div",ye,[c("div",null,[p(a,{to:i.link,class:"text-hover-underline"},{default:k(()=>[z(_(("formatText"in n?n.formatText:e(v))(i.title))+" ",1),p(r,{name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})]),_:2},1032,["to"])]),i.type==="hard"?(o(),s("div",we,_(("formatText"in n?n.formatText:e(v))(i.reason)),1)):u("",!0)])]))),256))]),_:1})}}}),ke=Object.assign(Ce,{__name:"MainConnectionsDeps"}),$e={key:0,class:"relative font-semibold"},Te={class:"gap-small py-normal flex"},Me={class:"flex flex-col gap-0.5"},De={key:1},je={key:0,class:"text-text-muted text-main-sm"},Be={class:"text-text-muted text-main-sm italic"},Oe=b({__name:"Externals",props:{externals:{}},async setup(t){let n,m;const r=([n,m]=B(()=>O("externals_own","externals_from")),n=await n,m(),n);return(a,i)=>{const g=D,f=P;return o(),h(A,{class:"max-h-[800px]"},{default:k(()=>[(o(!0),s(w,null,M(t.externals,l=>(o(),s("div",null,[c("div",{class:T([`border-border gap-small pl-small py-small bg-bg-main relative sticky
          top-0 z-10 flex w-full items-center border-b border-dashed`,l.type==="own"?"font-semibold text-amber-600 dark:text-amber-400":"text-text-muted"])},[c("div",{class:T(["absolute top-0 left-0 h-full w-full bg-linear-to-t to-transparent",l.type==="own"?"from-amber-400/10":"from-bg-aside/50"])},null,2),p(g,{name:l.type==="own"?"arrow/left":"arrow/up-to-right",class:T(["relative",l.type==="own"&&"-scale-x-100"])},null,8,["name","class"]),c("span",null,_(l.type==="own"?e(r).externals_own:e(r).externals_from),1),l.type==="parent"?(o(),s("span",$e,_(("formatText"in a?a.formatText:e(v))(`"${l.title}"`)),1)):u("",!0)],2),c("div",null,[(o(!0),s(w,null,M(l.items,d=>(o(),s("div",Te,[p(g,{name:d.type==="physical"?"book":"globe",class:"relative top-1 shrink-0"},null,8,["name"]),c("div",Me,[c("div",null,[d.link?(o(),h(f,{key:0,external:"",target:"_blank",to:d.link,class:T([d.link&&"text-hover-underline"])},{default:k(()=>[z(_(("formatText"in a?a.formatText:e(v))(d.title))+" ",1),d.link?(o(),h(g,{key:0,name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})):u("",!0)]),_:2},1032,["to","class"])):(o(),s("span",De,_(("formatText"in a?a.formatText:e(v))(d.title)),1))]),d.info?(o(),s("div",je,_(("formatText"in a?a.formatText:e(v))(d.info)),1)):u("",!0),c("div",Be,_(("formatText"in a?a.formatText:e(v))(d.reason)),1)])]))),256))])]))),256))]),_:1})}}}),Ee=Object.assign(Oe,{__name:"MainConnectionsExternals"}),Se={key:0,class:"px-main py-main-half"},Ue={class:"gap-small micro:gap-normal micro:justify-start flex flex-wrap justify-center"},Ie={key:0,class:"gap-small *:border-border *:pl-small flex items-center font-bold *:border-l"},Fe={key:0,class:"flex items-center gap-1 text-amber-600 dark:text-amber-400"},Ne={key:1,class:"flex items-center gap-1"},Pe=b({__name:"MainConnections",props:{connections:{}},async setup(t){let n,m;const r=([n,m]=B(()=>O("connections")),n=await n,m(),n),a=j("hardDependencies"),i=U(()=>t.connections?.externals?.find(f=>f.type==="own")?.items.length),g=U(()=>t.connections?.externals?.filter(f=>f.type==="parent").reduce((f,l)=>f+l.items.length,0));return(f,l)=>{const d=ee,C=xe,$=D;return t.connections?(o(),s("section",Se,[p(d,{title:e(r).connections+":"},null,8,["title"]),c("div",Ue,[(o(!0),s(w,null,M({hardDependencies:t.connections.hardDependencies,autoDependencies:t.connections.autoDependencies,dependents:t.connections.dependents},(y,x)=>(o(),s(w,null,[y&&y.length>0?(o(),h(C,{key:0,type:x,count:y.length,active:e(a)===x,onClick:E=>e(a)===x?a.value=void 0:a.value=x},null,8,["type","count","active","onClick"])):u("",!0)],64))),256)),t.connections.externals?(o(),h(C,{key:0,type:"externals",active:e(a)==="externals",onClick:l[0]||(l[0]=y=>e(a)==="externals"?a.value=void 0:a.value="externals")},{after:k(()=>[t.connections.externals?(o(),s("div",Ie,[e(i)?(o(),s("div",Fe,[p($,{name:"arrow/left",class:"-scale-x-100"}),c("span",null,_(e(i)),1)])):u("",!0),e(g)?(o(),s("div",Ne,[p($,{name:"arrow/up-to-right"}),c("span",null,_(e(g)),1)])):u("",!0)])):u("",!0)]),_:1},8,["active"])):u("",!0)]),e(a)&&t.connections[e(a)]?(o(),s(w,{key:0},[e(a)!=="externals"?(o(),h(ke,{key:0,deps:t.connections[e(a)]},null,8,["deps"])):(o(),h(Ee,{key:1,externals:t.connections[e(a)]},null,8,["externals"]))],64)):u("",!0)])):u("",!0)}}}),Xe=Object.assign(Pe,{__name:"MainConnections"}),ze={key:0,class:"px-main py-main"},Ae={class:"relative max-h-[300px] overflow-hidden"},Ve=b({__name:"AdsBannerBottom",setup(t){const n=j();return Q(()=>{n.value=X.config.ads.bottom}),(m,r)=>{const a=Y;return e(n)?(o(),s("section",ze,[c("div",Ae,[p(a,{data:e(n)},null,8,["data"])])])):u("",!0)}}}),Ye=Object.assign(Ve,{__name:"AdsBannerBottom"});async function Ze(t){const n=Z(),m="main-content",r=n.static.data[m]||=n.payload.data[m]||={};return(async()=>(r.contentPath!==t&&(r.contentPath=t,r.mainContent=await $fetch("/api/main/content/"+t,{responseType:"json"})),r.mainContent))()}export{He as _,Qe as a,Xe as b,Ye as c,Ze as u};
