import{W as k,a8 as c,Z as v,N as l,a0 as m,S as u,R as _,ac as r,ad as C,aX as G,a4 as g,P as T,Q as E}from"./DN7F3Kmz.js";import{u as N}from"./gZ_F0CNQ.js";import{u as P}from"./MZWTM_4S.js";import{u as I}from"./BMd308TJ.js";import{u as S}from"./4rEQyDVL.js";import{_ as B}from"./i2LGKoAP.js";const H={class:"whitespace-normal"},z=k({__name:"Link",props:{element:{}},async setup(a){let t,o;const{EruditIcon:p,EruditLink:d,eruditIcons:f,setPreview:x,closePreview:w,baseUrl:b}=N(),h=P(),e=([t,o]=c(()=>I(a.element)),t=await t,o(),t),s=([t,o]=c(async()=>(async()=>{switch(e.type){case"external":return"arrow/outward-box";case"contentItem":return f[e.content.contentType==="topic"?e.content.topicPart:e.content.contentType];case"unique":return await S(e.schemaName);case"error":return}})()),t=await t,o(),t),n={timeout:void 0,startTimeout(){this.timeout=setTimeout(()=>{this.reset()},400)},reset(){clearTimeout(this.timeout),this.timeout=void 0}};function y(){if(n.timeout&&e.type!=="error"){n.reset(),w();const i=e.type==="external"?e.resolvedHref:b+e.resolvedHref.slice(1);return window.open(i,"_blank"),!1}return e.type==="error"||(x(e.previewRequest),n.startTimeout()),!1}return v(()=>{e.type==="error"&&console.warn(`Error in link element with id "${a.element.id}": ${e.error}`)}),(i,V)=>(l(),m(B,{element:a.element},{default:u(()=>[_(r(d),{onClickCapture:G(y,["prevent"]),to:r(e).type==="error"?void 0:r(e).resolvedHref,style:{"--tGap":"1px","--xGap":"4px","--bGap":"4px"},class:C([`relative -mx-[calc(var(--xGap)-3px)] -mt-(--tGap) -mb-(--bGap)
        rounded-sm bg-transparent px-(--xGap) pt-(--tGap) pb-(--bGap)
        whitespace-nowrap underline decoration-2 underline-offset-2
        transition-[background]`,r(e).type==="error"?`hocus:bg-red-400/20 cursor-not-allowed text-red-600
            decoration-red-400/40 dark:text-red-400`:`text-brand hocus:bg-brand/15
            decoration-[color-mix(in_srgb,var(--color-brand)30%,transparent)]`])},{default:u(()=>[r(s)?(l(),m(r(p),{key:0,name:r(s),class:"micro:pr-1.5 inline pr-1 text-[1.3em]"},null,8,["name"])):g("",!0),T("span",H,E(r(h)(a.element.data.label)),1)]),_:1},8,["to","class"])]),_:1},8,["element"]))}});export{z as default};
