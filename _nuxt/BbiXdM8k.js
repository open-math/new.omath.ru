import{aV as U,_ as W,O as r,Q as f,X as A,ax as N,ad as w,R as o,T as p,ac as a,S as C,U as M,Z as B,a9 as $,a1 as P,a5 as b,ag as z,$ as J,az as O,a0 as Q,am as X,au as G,aW as K,a4 as Y}from"./C4wjQouH.js";import{u as ee}from"./CkE9ToxK.js";import{u as h,a as te}from"./Cgwm3dOG.js";import{u as ae}from"./Bcq7iQgg.js";import{u as ne,d as se,e as oe}from"./CewF_czH.js";import{s as le}from"./D5fLQY3u.js";import{a as ie}from"./-6Xo9kHI.js";import{a as re,o as ce,s as ue}from"./BokzypnP.js";const de={en:()=>U(()=>import("./BBZfN8yp.js"),[],import.meta.url),ru:()=>U(()=>import("./2QeJnGn1.js"),[],import.meta.url)};async function me(){const{languageCode:e}=h();return(await de[e]()).default}async function pe(e){const{languageCode:t}=h();return await te(typeof e=="string"?e:e.schemaName).languages[t]()}const fe={},ve={class:"border-border/80 my-(--asideMenuGap)"};function ge(e,t){return r(),f("hr",ve)}const _e=W(fe,[["render",ge]]),be={class:"pointer-events-none invisible flex touch-none flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},he=A({__name:"AsideMenuButton",props:{icon:{},title:{},brand:{type:Boolean}},setup(e){const{EruditIcon:t,EruditTransition:i}=h(),c=B(0);return N(()=>[e.icon,e.title],()=>{c.value++}),(u,d)=>(r(),f("button",{class:w(["relative cursor-pointer text-left text-xs transition-[color,background]",e.brand?"text-brand bg-brand/10":"hocus:bg-bg-accent text-text-muted hocus:text-text"])},[o("div",be,[p(a(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]),p(a(i),null,{default:M(()=>[(r(),f("div",{key:c.value,class:"absolute top-0 left-0 flex flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},[p(a(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]))]),_:1})],2))}}),ke=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">\r
    <path d="M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z"/>\r
</svg>`,ye=A({__name:"AsideMenuCopyLink",props:{elementId:{}},async setup(e){let t,i;const{pathUrl:c,baseUrl:u}=h(),d=([t,i]=$(()=>me()),t=await t,i(),t),m=B(!1);let l;async function k(){await navigator.clipboard.writeText(location.origin+u+c.substring(1)+"#"+e.elementId),m.value=!0,l&&clearTimeout(l),l=window.setTimeout(()=>{m.value=!1,l=void 0},2500)}return(I,g)=>(r(),P(he,{brand:m.value,icon:m.value?a(le):a(ke),title:m.value?a(d).copied:a(d).copy_link,onClick:k},null,8,["brand","icon","title"]))}}),xe={style:{"--asideMenuGap":"5px","--asideMenuGapBig":"calc(var(--asideMenuGap) * 2)"},class:"bg-bg-main border-border flex w-40 flex-col rounded-sm border py-(--asideMenuGap) font-sans shadow-[0_0_12px_5px_light-dark(rgba(0,0,0,0.12),rgba(255,255,255,0.08))] backface-hidden"},we={class:"flex items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap) text-xs font-medium"},Me=A({__name:"AsideMenu",props:{element:{}},async setup(e){let t,i;const c=z(()=>!!e.element.id),u=z(()=>c.value),d=([t,i]=$(()=>pe(e.element)),t=await t,i(),t);return(m,l)=>(r(),f("div",xe,[o("div",we,[o("div",null,C(a(d).element_name),1)]),u.value?(r(),P(_e,{key:0})):b("",!0),c.value?(r(),P(ye,{key:1,elementId:e.element.id},null,8,["elementId"])):b("",!0)]))}}),Be=["id"],Ae={class:"relative"},Ee={class:"sticky top-0"},qe={class:"relative ml-(--proseAsideWidth)"},Te={key:0},Ge=A({__name:"Block",props:{element:{}},async setup(e){let t,i;const{EruditIcon:c,EruditTransition:u}=h(),d=([t,i]=$(()=>ae(e.element)),t=await t,i(),t),m=ie();m.quote="closed";const l=G("block"),k=G("aside"),I=G("asideMenu"),g=B(!1),v=B(!1),{floatingStyles:Z}=ee(k,I,{whileElementsMounted:re,placement:"right-start",strategy:"fixed",middleware:[ce(10),ue({rootBoundary:"viewport"})]}),E=s=>{if(!v.value)return;const n=k.value;n&&(n.contains(s.target)||(v.value=!1))},L=ne(e.element),S=se(),j=oe(),H=(s,n,F)=>{let y={top:0,left:0},x,_,q=!1;const R=()=>{if(q)return;const D=s.getBoundingClientRect(),T={top:D.top,left:D.left};(y.top!==T.top||y.left!==T.left)&&(y=T,clearTimeout(x),x=window.setTimeout(()=>{q=!0,n()},300)),_=requestAnimationFrame(R)},V=s.getBoundingClientRect();y={top:V.top,left:V.left},x=window.setTimeout(()=>{q=!0,cancelAnimationFrame(_),n()},300),_=requestAnimationFrame(R),F(()=>{clearTimeout(x),_!==void 0&&cancelAnimationFrame(_)})};return N(v,s=>{s?document.addEventListener("click",E):document.removeEventListener("click",E)}),J(()=>{O(async s=>{L.value&&(S(l.value),H(l.value,()=>{S(l.value),j()},s))}),g.value=l.value.matches(":hover"),l.value.addEventListener("mouseenter",()=>{g.value=!0}),l.value.addEventListener("mouseleave",()=>{g.value=!1})}),Q(()=>{document.removeEventListener("click",E)}),(s,n)=>(r(),f("div",{ref:"block",id:e.element.id,class:w([s.$style.block,"scroll-mt-big pr-(--proseAsideWidth)"])},[o("div",{class:w([s.$style.blockAbove,"h-(--proseGap)"])},null,2),o("div",Ae,[o("aside",{ref:"aside",onClick:n[1]||(n[1]=F=>v.value=!v.value),class:"group/aside absolute top-0 left-0 h-full w-(--proseAsideWidth) cursor-pointer"},[n[2]||(n[2]=o("div",{class:"micro:rounded-sm group-hocus/aside:bg-bg-accent absolute top-0 left-0 h-full w-full bg-transparent transition-[background]"},null,-1)),o("div",Ee,[p(a(u),{mode:"out-in"},{default:M(()=>[g.value?(r(),f("div",{key:a(d)},[p(a(c),{name:a(d),class:"text-text-dimmed group-hocus/aside:text-text m-auto mt-0.5 aspect-square w-[80%] transition-[color]"},null,8,["name"])])):b("",!0)]),_:1})]),p(a(u),null,{default:M(()=>[v.value?(r(),f("div",{key:0,ref:"asideMenu",style:Y(a(Z)),onClick:n[0]||(n[0]=K(()=>{},["stop"])),class:"z-10 cursor-auto"},[p(Me,{element:e.element},null,8,["element"])],4)):b("",!0)]),_:1})],512),o("main",qe,[X(s.$slots,"default"),p(a(u),null,{default:M(()=>[a(L)?(r(),f("div",Te,[...n[3]||(n[3]=[o("div",{class:"bg-brand animate-fade-out pointer-events-none absolute -top-(--overlayPadding) -right-(--overlayPadding) -bottom-(--overlayPadding) -left-(--overlayPadding) touch-none rounded opacity-0 shadow-[0_0_18px_1px_var(--color-brand)] [--overlayPadding:5px]"},null,-1)])])):b("",!0)]),_:1})])]),o("div",{class:w([s.$style.blockBelow,"h-(--proseGap)"])},null,2)],10,Be))}}),Ce="_block_acq10_7",Pe="_blockAbove_acq10_7",$e="_blockBelow_acq10_15",Ie={block:Ce,blockAbove:Pe,blockBelow:$e},Le={$style:Ie},Ze=W(Ge,[["__cssModules",Le]]);export{Ze as B,pe as u};
