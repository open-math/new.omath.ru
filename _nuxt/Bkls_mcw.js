import{W as U,_ as z,e as f,k as r,a as A,U as B,w as N,S as w,f as o,v as p,h as n,t as C,x as M,n as I,l as P,c as W,g as b,u as G,o as J,a0 as K,ai as O,p as Q,Z as X,R as Y}from"./Co3pHHec.js";import{u as ee,a as te,o as ne,s as se}from"./Cbjy90RY.js";import{a as h,u as ae}from"./BQwS8Ze9.js";import{u as oe}from"./Bncs-Lji.js";import{u as le,e as ie,f as re}from"./DPRGGL4g.js";import{s as ce}from"./kHqF3ywV.js";import{a as ue}from"./C2dLlXeG.js";const de={en:()=>U(()=>import("./BBZfN8yp.js"),[],import.meta.url),ru:()=>U(()=>import("./2QeJnGn1.js"),[],import.meta.url)};async function me(){const{languageCode:e}=h();return(await de[e]()).default}async function pe(e){const{languageCode:t}=h();return await ae(typeof e=="string"?e:e.schemaName).languages[t]()}const fe={},ve={class:"border-border/80 my-(--asideMenuGap)"};function ge(e,t){return r(),f("hr",ve)}const _e=z(fe,[["render",ge]]),be={class:"pointer-events-none invisible flex touch-none flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},he=A({__name:"AsideMenuButton",props:{icon:{},title:{},brand:{type:Boolean}},setup(e){const{EruditIcon:t,EruditTransition:i}=h(),c=B(0);return N(()=>[e.icon,e.title],()=>{c.value++}),(u,d)=>(r(),f("button",{class:w([`relative cursor-pointer text-left text-xs
            transition-[color,background]`,e.brand?"text-brand bg-brand/10":"hocus:bg-bg-accent text-text-muted hocus:text-text"])},[o("div",be,[p(n(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]),p(n(i),null,{default:M(()=>[(r(),f("div",{key:c.value,class:"absolute top-0 left-0 flex flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},[p(n(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]))]),_:1})],2))}}),ke=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">\r
    <path d="M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z"/>\r
</svg>`,ye=A({__name:"AsideMenuCopyLink",props:{elementId:{}},async setup(e){let t,i;const{pathUrl:c,baseUrl:u}=h(),d=([t,i]=I(()=>me()),t=await t,i(),t),m=B(!1);let l;async function k(){await navigator.clipboard.writeText(location.origin+u+c.substring(1)+"#"+e.elementId),m.value=!0,l&&clearTimeout(l),l=window.setTimeout(()=>{m.value=!1,l=void 0},2500)}return(L,g)=>(r(),P(he,{brand:m.value,icon:m.value?n(ce):n(ke),title:m.value?n(d).copied:n(d).copy_link,onClick:k},null,8,["brand","icon","title"]))}}),xe={style:{"--asideMenuGap":"5px","--asideMenuGapBig":"calc(var(--asideMenuGap) * 2)"},class:"bg-bg-main border-border flex w-40 flex-col rounded-sm border py-(--asideMenuGap) font-sans shadow-[0_0_12px_5px_light-dark(rgba(0,0,0,0.12),rgba(255,255,255,0.08))] backface-hidden"},we={class:"flex items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap) text-xs font-medium"},Me=A({__name:"AsideMenu",props:{element:{}},async setup(e){let t,i;const c=W(()=>!!e.element.id),u=W(()=>c.value),d=([t,i]=I(()=>pe(e.element)),t=await t,i(),t);return(m,l)=>(r(),f("div",xe,[o("div",we,[o("div",null,C(n(d).element_name),1)]),u.value?(r(),P(_e,{key:0})):b("",!0),c.value?(r(),P(ye,{key:1,elementId:e.element.id},null,8,["elementId"])):b("",!0)]))}}),Be=["id"],Ae={class:"relative"},Ee={class:"sticky top-0"},Te={class:"relative ml-(--proseAsideWidth)"},qe={key:0},Ge=A({__name:"Block",props:{element:{}},async setup(e){let t,i;const{EruditIcon:c,EruditTransition:u}=h(),d=([t,i]=I(()=>oe(e.element)),t=await t,i(),t),m=ue();m.quote="closed";const l=G("block"),k=G("aside"),L=G("asideMenu"),g=B(!1),v=B(!1),{floatingStyles:Z}=ee(k,L,{whileElementsMounted:te,placement:"right-start",strategy:"fixed",middleware:[ne(10),se({rootBoundary:"viewport"})]}),E=a=>{if(!v.value)return;const s=k.value;s&&(s.contains(a.target)||(v.value=!1))},$=le(e.element),S=ie(),j=re(),H=(a,s,F)=>{let y={top:0,left:0},x,_,T=!1;const R=()=>{if(T)return;const V=a.getBoundingClientRect(),q={top:V.top,left:V.left};(y.top!==q.top||y.left!==q.left)&&(y=q,clearTimeout(x),x=window.setTimeout(()=>{T=!0,s()},300)),_=requestAnimationFrame(R)},D=a.getBoundingClientRect();y={top:D.top,left:D.left},x=window.setTimeout(()=>{T=!0,cancelAnimationFrame(_),s()},300),_=requestAnimationFrame(R),F(()=>{clearTimeout(x),_!==void 0&&cancelAnimationFrame(_)})};return N(v,a=>{a?document.addEventListener("click",E):document.removeEventListener("click",E)}),J(()=>{K(async a=>{$.value&&(S(l.value),H(l.value,()=>{S(l.value),j()},a))}),g.value=l.value.matches(":hover"),l.value.addEventListener("mouseenter",()=>{g.value=!0}),l.value.addEventListener("mouseleave",()=>{g.value=!1})}),O(()=>{document.removeEventListener("click",E)}),(a,s)=>(r(),f("div",{ref:"block",id:e.element.id,class:w([a.$style.block,"scroll-mt-big pr-(--proseAsideWidth)"])},[o("div",{class:w([a.$style.blockAbove,"h-(--proseGap)"])},null,2),o("div",Ae,[o("aside",{ref:"aside",onClick:s[1]||(s[1]=F=>v.value=!v.value),class:"group/aside absolute top-0 left-0 h-full w-(--proseAsideWidth) cursor-pointer"},[s[2]||(s[2]=o("div",{class:"micro:rounded-sm group-hocus/aside:bg-bg-accent absolute top-0 left-0 h-full w-full bg-transparent transition-[background]"},null,-1)),o("div",Ee,[p(n(u),{mode:"out-in"},{default:M(()=>[g.value?(r(),f("div",{key:n(d)},[p(n(c),{name:n(d),class:"text-text-dimmed group-hocus/aside:text-text m-auto mt-0.5 aspect-square w-[80%] transition-[color]"},null,8,["name"])])):b("",!0)]),_:1})]),p(n(u),null,{default:M(()=>[v.value?(r(),f("div",{key:0,ref:"asideMenu",style:Y(n(Z)),onClick:s[0]||(s[0]=X(()=>{},["stop"])),class:"z-10 cursor-auto"},[p(Me,{element:e.element},null,8,["element"])],4)):b("",!0)]),_:1})],512),o("main",Te,[Q(a.$slots,"default"),p(n(u),null,{default:M(()=>[n($)?(r(),f("div",qe,[...s[3]||(s[3]=[o("div",{class:"bg-brand animate-fade-out pointer-events-none absolute -top-(--overlayPadding) -right-(--overlayPadding) -bottom-(--overlayPadding) -left-(--overlayPadding) touch-none rounded opacity-0 shadow-[0_0_18px_1px_var(--color-brand)] [--overlayPadding:5px]"},null,-1)])])):b("",!0)]),_:1})])]),o("div",{class:w([a.$style.blockBelow,"h-(--proseGap)"])},null,2)],10,Be))}}),Ce="_block_15sr3_7",Pe="_blockAbove_15sr3_7",Ie="_blockBelow_15sr3_15",Le={block:Ce,blockAbove:Pe,blockBelow:Ie},$e={$style:Le},Ne=z(Ge,[["__cssModules",$e]]);export{Ne as B,pe as u};
