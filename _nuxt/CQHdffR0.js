const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.DmkBOJCM.css"])))=>i.map(i=>d[i]);
import{X as q,bc as N,Z as s,au as S,bd as U,$ as z,av as F,aR as _,aq as W,O as m,a1 as A,U as K,R as Q,Q as L,T as X,ac as f,ad as Z,a5 as j,at as G,_ as J}from"./D_GAU_kb.js";import{u as Y}from"./CD2Q6CO1.js";import{u as ee}from"./CP2XOIbp.js";import{_ as te}from"./Bg_mMmNf.js";import{B as ae}from"./DQSe4NUK.js";/* empty css        */import"./BD6_BLMO.js";import"./DHz_IMr8.js";import"./CVaqpPYf.js";import"./YHieYHGE.js";import"./6yqU-1zY.js";import"./kHqF3ywV.js";const ne={ref:"diagram"},ie={key:0,class:"p-normal text-center"},se=["innerHTML"],oe=q({__name:"Diagram",props:{element:{}},setup(o){let h=s();const M=N(),{EruditIcon:P,loadingSvg:R}=ee(),u=s(!0),p=s(!1),n=s(o.element.children[0].data),y=s(""),w=S("diagram"),b=S("diagramSvg"),T=U(),x=G(),{lightbox:k,initLightbox:I}=Y(),r={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};let i;z(async()=>{const e=navigator.userAgent;h.value=/AppleWebKit/.test(e)&&!/Chrome/.test(e)||/\b(iPad|iPhone|iPod)\b/.test(e),O(n.value)&&await V(),i=new IntersectionObserver(B,{root:null,threshold:.01}),i.observe(w.value)}),F(()=>{i&&i.disconnect()});function D(){if(!k.value){const e=b.value.querySelector("svg"),t=e.cloneNode(!0);t.removeAttribute("width"),t.removeAttribute("style"),t.classList.add(M.diagram);let a=t;const l=w.value.closest("[data-prose-accent]");if(l){const d=document.createElement("div");d.setAttribute("data-prose-accent","");const $=getComputedStyle(l);for(const g of $)if(g.startsWith("--accent")){const C=$.getPropertyValue(g).trim();C&&d.style.setProperty(g,C)}d.appendChild(t),a=d}const c=Math.min(1e3,.9*window.innerWidth),E=e.clientHeight/e.clientWidth,v=`
            <div class="pswp__img-overlay-wrapper" style="position: relative">
                <div class="pswp__img" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>
                ${a.outerHTML}
            </div>
        `;I({dataSource:[{html:v,width:c,height:c*E}]},x.value)}k.value.loadAndOpen(0)}function O(e){return r.display.test(e)||r.inline.test(e)}async function V(){await _(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const e=await _(()=>import("./DhXJpUyf.js"),[],import.meta.url),t=(a,l,c)=>a.replace(l,(E,v)=>e.renderToString(v,{displayMode:c,output:"mathml"}).replace(/<mtd>/g,'<mtd style="padding: 0.2em 0;">').replace(/<annotation encoding="application\/x-tex">[\s\S]*?<\/annotation>/g,""));n.value=t(n.value,r.display,!0),n.value=t(n.value,r.inline,!1),await W(),await new Promise(requestAnimationFrame)}async function B(e){if(!e.some(a=>a.isIntersecting)||!u.value||p.value)return;p.value=!0,await H(),p.value=!1,u.value=!1,i.disconnect(),await W();const t=b.value?.querySelector("svg");t&&t.addEventListener("click",D)}async function H(){const e=(await _(async()=>{const{default:a}=await import("https://cdn.jsdelivr.net/npm/mermaid@11.12.2/+esm");return{default:a}},[],import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"});const{svg:t}=await e.render(T,n.value);y.value=t}return(e,t)=>(m(),A(ae,{element:o.element},{default:K(()=>[Q("div",ne,[u.value?(m(),L("div",ie,[X(f(P),{name:f(R),class:"text-text-dimmed inline text-[60px]"},null,8,["name"])])):(m(),L("div",{key:1,ref:"diagramSvg",innerHTML:y.value,class:Z([f(h)?"":e.$style.notWebkit,e.$style.diagram])},null,10,se))],512),o.element.children[1]?(m(),A(te,{key:0,caption:o.element.children[1],onCaptionMounted:t[0]||(t[0]=a=>x.value=a)},null,8,["caption"])):j("",!0)]),_:1},8,["element"]))}}),re="_notWebkit_sh8bl_3",le="_diagram_sh8bl_3",ce="_katex_sh8bl_19",de={notWebkit:re,diagram:le,katex:ce},me={$style:de},Ee=J(oe,[["__cssModules",me]]);export{Ee as default};
