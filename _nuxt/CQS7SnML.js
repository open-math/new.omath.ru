import{X as W,W as C,N as n,O as r,P as i,ac as t,a4 as u,a8 as N,ab as F,au as j,R as d,al as O,Q as x,ae as y,S as D,a3 as z,av as X,a1 as T,a2 as I,a0 as v,am as V,ad as w,ag as P,_ as Y,as as Z,aw as q,Z as H,ax as G,ak as ee,a5 as R,U as A,Y as S,ar as K,ay as te,an as ne,az as ae,aA as L,aB as oe,aC as se,ai as re,aD as le,a7 as ie,a9 as ce}from"./CmFBBqW5.js";import{_ as me}from"./DNYs0yQP.js";import{u as de}from"./DZ2Rmn2Q.js";import{a as ue,s as pe}from"./BokzypnP.js";import{a as _e}from"./DUpqqJuT.js";import{d as fe,c as xe,b as ve}from"./DuMkGSP0.js";import{a as be}from"./BvO9tHpQ.js";function he(e){return W()("/file/"+e)}const ge={key:0,class:"pl-small pb-small pt-main pr-main float-right max-[700px]:hidden"},ye=["src"],Ce=C({__name:"MainDecoration",props:{decoration:{}},setup(e){return(a,c)=>e.decoration?(n(),r("section",ge,[i("img",{src:("fileUrl"in a?a.fileUrl:t(he))(e.decoration),class:"block aspect-square max-h-[125px] w-full max-w-[125px]"},null,8,ye)])):u("",!0)}}),Tt=Object.assign(Ce,{__name:"MainDecoration"}),ke={ref:"toggle",class:"px-small text-main-sm flex cursor-help items-center gap-1 rounded border border-(--flagColor)/30 bg-(--flagColor)/15 py-1 text-(--flagColor) select-none"},we={class:"bg-bg-main rounded border-2 border-(--flagColor)/30 shadow-[0_0_14px_var(--flagColor)]/40 dark:shadow-[0_0_14px_var(--flagColor)]/20"},$e={class:"p-small bg-linear-60 from-(--flagColor)/5 to-(--flagColor)/20 text-(--flagColor)"},Me={class:"p-small float-right pt-0 pr-0"},Te={class:"pb-small text-main-sm font-semibold"},De={class:"text-main-xs"},Se=C({__name:"MainFlag",props:{flag:{}},async setup(e){let a,c;const s=([a,c]=N(()=>F("flag_advanced","flag_advanced_description","flag_dev","flag_dev_description","flag_secondary","flag_secondary_description")),a=await a,c(),a),l={dev:{icon:"construction",color:"light-dark(var(--color-yellow-700),var(--color-yellow-500))",title:s.flag_dev,description:s.flag_dev_description},advanced:{icon:"asterisk",color:"light-dark(#72189a,#ff94ff)",title:s.flag_advanced,description:s.flag_advanced_description},secondary:{icon:"puzzle",color:"light-dark(#558a1a,#8bb759)",title:s.flag_secondary,description:s.flag_secondary_description}}[e.flag],_=j("container"),p=j("toggle"),m=j("popup"),{popupVisible:f,popupStyles:M}=de(_,p,m,{placement:"bottom",whileElementsMounted:ue,middleware:[pe({boundary:document?.querySelector("[data-erudit-main]")||void 0})]});return(b,k)=>{const h=O,g=X;return n(),r("div",{ref:"container",style:z({"--flagColor":t(l).color})},[i("div",ke,[d(h,{name:t(l).icon,class:"text-[1.3em]"},null,8,["name"]),i("span",null,x(("formatText"in b?b.formatText:t(y))(t(l).title)),1)],512),d(g,null,{default:D(()=>[t(f)?(n(),r("div",{key:0,style:z(t(M)),ref:"popup",class:"z-10 max-w-[320px] p-2"},[i("div",we,[i("div",$e,[i("div",Me,[d(h,{name:t(l).icon,class:"text-[40px] opacity-30"},null,8,["name"])]),i("div",Te,x(("formatText"in b?b.formatText:t(y))(t(l).title)),1),i("div",De,x(("formatText"in b?b.formatText:t(y))(t(l).description)),1)])])],4)):u("",!0)]),_:1})],4)}}}),Oe=Object.assign(Se,{__name:"MainFlag"}),Ee={key:0,class:"gap-small micro:gap-normal micro:justify-start px-main py-main-half flex flex-wrap justify-center"},Be=C({__name:"MainFlags",props:{flags:{}},setup(e){const a=e.flags?Object.keys(e.flags).sort():[];return(c,s)=>{const o=Oe;return e.flags?(n(),r("section",Ee,[(n(!0),r(T,null,I(t(a),l=>(n(),v(o,{flag:l},null,8,["flag"]))),256))])):u("",!0)}}}),je=Object.assign(Be,{__name:"MainFlags"}),Ie={key:0,class:"font-bold"},Pe=C({__name:"MainConnectionsButton",props:{type:{},active:{type:Boolean},count:{}},async setup(e){let a,c;const s=e.type==="hardDependencies",o=([a,c]=N(()=>F("need_to_know","depends_on","used_by","externals")),a=await a,c(),a),l=(()=>{switch(e.type){case"hardDependencies":return o.need_to_know;case"autoDependencies":return o.depends_on;case"dependents":return o.used_by;case"externals":return o.externals}})(),_=(()=>{switch(e.type){case"hardDependencies":return"warning";case"autoDependencies":return"arrow/to-circle";case"dependents":return"arrow/from-circle";case"externals":return"arrow/outward-box"}})(),p=P(()=>e.active?"border-(--activeColor) text-(--activeColor) bg-(--activeColor)/10 hocus:ring-(--activeColor)/25":"border-border bg-bg-aside text-text-muted hocus:ring-(--activeColor)/25 hocus:text-(--activeColor) hocus:border-(--activeColor)");return(m,f)=>{const M=O;return n(),r("button",{style:z({"--activeColor":s?"light-dark(var(--color-red-700),var(--color-red-400))":"var(--color-brand)"}),class:w([`gap-small text-main-sm px-small flex cursor-pointer items-center rounded
      border py-1 ring-2 ring-transparent
      transition-[border,color,box-shadow,background]`,t(p)])},[d(M,{name:t(_),class:"text-[1.2em]"},null,8,["name"]),i("span",null,x(("formatText"in m?m.formatText:t(y))(t(l))),1),e.count?(n(),r("span",Ie,x(e.count),1)):u("",!0),V(m.$slots,"after")],6)}}}),Ue=Object.assign(Pe,{__name:"MainConnectionsButton"}),qe={},Ne={class:"nice-scrollbars border-border mt-normal relative overflow-auto border-t border-b"};function Fe(e,a){return n(),r("div",Ne,[V(e.$slots,"default")])}const J=Object.assign(Y(qe,[["render",Fe]]),{__name:"MainConnectionsScrollPane"}),ze={class:"gap-small flex items-center"},He=C({__name:"DepUnique",props:{type:{},unique:{}},setup(e){const a=e,c=Z(),s=S(0),o=S(c);return q(o,()=>{s.value+=1}),H(async()=>{try{o.value=await G(a.unique.schemaName)}catch{o.value="__missing"}}),(l,_)=>{const p=O,m=ee,f=R;return n(),r("div",ze,[d(p,{name:"arrow/up-to-right",class:w(["text-text-dimmed shrink-0",e.type==="dependent"&&"relative -top-[3px] -scale-x-100 rotate-90"])},null,8,["class"]),(n(),v(m,{key:t(s),name:t(o),class:"text-main-sm shrink-0"},null,8,["name"])),d(f,{to:e.unique.link,class:"text-hover-underline text-main-sm"},{default:D(()=>[A(x(("formatText"in l?l.formatText:t(y))(e.unique.title??e.unique.name))+" ",1),d(p,{name:"arrow/outward",class:"text-text-disabled relative -top-1 inline text-[0.8em]"})]),_:1},8,["to"])])}}}),Re=Object.assign(He,{__name:"MainConnectionsDepUnique"}),Ae={class:"gap-small flex"},Le={class:"flex flex-col gap-0.5"},Ve={key:0,class:"text-text-muted text-main-sm italic"},Ke={key:1,class:"mt-small flex flex-col gap-0.5"},Je=C({__name:"Deps",props:{type:{},deps:{}},setup(e){return(a,c)=>{const s=O,o=R;return n(),v(J,{class:"py-normal gap-main-half max-h-[50dvh)] flex flex-col"},{default:D(()=>[(n(!0),r(T,null,I(e.deps,l=>(n(),r("div",Ae,[d(s,{name:("ICONS"in a?a.ICONS:t(K))[l.contentType],class:"relative top-1 shrink-0"},null,8,["name"]),i("div",Le,[i("div",null,[d(o,{to:l.link,class:"text-hover-underline"},{default:D(()=>[A(x(("formatText"in a?a.formatText:t(y))(l.title))+" ",1),d(s,{name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})]),_:2},1032,["to"])]),l.type==="hard"?(n(),r("div",Ve,x(("formatText"in a?a.formatText:t(y))(l.reason)),1)):u("",!0),l.type==="auto"&&l.uniques?.length?(n(),r("div",Ke,[(n(!0),r(T,null,I(l.uniques,_=>(n(),v(Re,{type:e.type,key:_.name,unique:_},null,8,["type","unique"]))),128))])):u("",!0)])]))),256))]),_:1})}}}),Qe=Object.assign(Je,{__name:"MainConnectionsDeps"}),We={key:0,class:"relative font-semibold"},Xe={class:"gap-small py-normal flex"},Ye={class:"flex flex-col gap-0.5"},Ze={key:1},Ge={key:0,class:"text-text-muted text-main-sm"},et={class:"text-text-muted text-main-sm italic"},tt=C({__name:"Externals",props:{externals:{}},async setup(e){let a,c;const s=([a,c]=N(()=>F("externals_own","externals_from")),a=await a,c(),a);return(o,l)=>{const _=O,p=R;return n(),v(J,{class:"max-h-[50dvh]"},{default:D(()=>[(n(!0),r(T,null,I(e.externals,m=>(n(),r("div",null,[i("div",{class:w([`border-border gap-small pl-small py-small sticky top-0 z-10 flex
          w-full items-center border-b border-dashed backdrop-blur-sm`,m.type==="own"?"font-semibold text-amber-600 dark:text-amber-400":"text-text-muted"])},[i("div",{class:w(["absolute top-0 left-0 h-full w-full bg-linear-to-t to-transparent",m.type==="own"?"from-amber-400/10":"from-bg-aside/50"])},null,2),d(_,{name:m.type==="own"?"arrow/left":"arrow/up-to-right",class:w(["relative",m.type==="own"&&"-scale-x-100"])},null,8,["name","class"]),i("span",null,x(m.type==="own"?t(s).externals_own:t(s).externals_from),1),m.type==="parent"?(n(),r("span",We,x(("formatText"in o?o.formatText:t(y))(`"${m.title}"`)),1)):u("",!0)],2),i("div",null,[(n(!0),r(T,null,I(m.items,f=>(n(),r("div",Xe,[d(_,{name:f.type==="physical"?"book":"globe",class:"relative top-1 shrink-0"},null,8,["name"]),i("div",Ye,[i("div",null,[f.link?(n(),v(p,{key:0,external:"",target:"_blank",to:f.link,class:w([f.link&&"text-hover-underline"])},{default:D(()=>[A(x(("formatText"in o?o.formatText:t(y))(f.title))+" ",1),f.link?(n(),v(_,{key:0,name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})):u("",!0)]),_:2},1032,["to","class"])):(n(),r("span",Ze,x(("formatText"in o?o.formatText:t(y))(f.title)),1))]),f.info?(n(),r("div",Ge,x(("formatText"in o?o.formatText:t(y))(f.info)),1)):u("",!0),i("div",et,x(("formatText"in o?o.formatText:t(y))(f.reason)),1)])]))),256))])]))),256))]),_:1})}}}),nt=Object.assign(tt,{__name:"MainConnectionsExternals"}),at={key:0,class:"px-main py-main-half"},ot={class:"gap-small micro:gap-normal micro:justify-start flex flex-wrap justify-center"},st={key:0,class:"gap-small *:border-border *:pl-small flex items-center font-bold *:border-l"},rt={key:0,class:"flex items-center gap-1 text-amber-600 dark:text-amber-400"},lt={key:1,class:"flex items-center gap-1"},it=C({__name:"MainConnections",props:{connections:{}},async setup(e){let a,c;const s=([a,c]=N(()=>F("connections")),a=await a,c(),a),o=S("hardDependencies"),l=P(()=>e.connections?.externals?.find(p=>p.type==="own")?.items.length),_=P(()=>e.connections?.externals?.filter(p=>p.type==="parent").reduce((p,m)=>p+m.items.length,0));return(p,m)=>{const f=fe,M=Ue,b=O;return e.connections?(n(),r("section",at,[d(f,{title:t(s).connections+":"},null,8,["title"]),i("div",ot,[(n(!0),r(T,null,I({hardDependencies:e.connections.hardDependencies,autoDependencies:e.connections.autoDependencies,dependents:e.connections.dependents},(k,h)=>(n(),r(T,null,[k&&k.length>0?(n(),v(M,{key:0,type:h,count:k.length,active:t(o)===h,onClick:g=>t(o)===h?o.value=void 0:o.value=h},null,8,["type","count","active","onClick"])):u("",!0)],64))),256)),e.connections.externals?(n(),v(M,{key:0,type:"externals",active:t(o)==="externals",onClick:m[0]||(m[0]=k=>t(o)==="externals"?o.value=void 0:o.value="externals")},{after:D(()=>[e.connections.externals?(n(),r("div",st,[t(l)?(n(),r("div",rt,[d(b,{name:"arrow/left",class:"-scale-x-100"}),i("span",null,x(t(l)),1)])):u("",!0),t(_)?(n(),r("div",lt,[d(b,{name:"arrow/up-to-right"}),i("span",null,x(t(_)),1)])):u("",!0)])):u("",!0)]),_:1},8,["active"])):u("",!0)]),t(o)&&e.connections[t(o)]?(n(),r(T,{key:0},[t(o)!=="externals"?(n(),v(Qe,{key:0,type:t(o)==="autoDependencies"?"dependency":"dependent",deps:e.connections[t(o)]},null,8,["type","deps"])):(n(),v(nt,{key:1,externals:e.connections[t(o)]},null,8,["externals"]))],64)):u("",!0)])):u("",!0)}}}),ct=Object.assign(it,{__name:"MainConnections"}),mt=C({__name:"MainStickyHeaderPreamble",props:{mainContent:{}},setup(e){return(a,c)=>{const s=me,o=je,l=_e,_=xe,p=ct,m=ve;return n(),r("div",null,[c[0]||(c[0]=i("div",{class:"h-main-half"},null,-1)),d(s,{breadcrumbs:e.mainContent.breadcrumbs},null,8,["breadcrumbs"]),d(o,{flags:e.mainContent.flags},null,8,["flags"]),d(l,{description:e.mainContent.description,class:"text-main!"},null,8,["description"]),e.mainContent.type==="topic"||e.mainContent.type==="page"?(n(),v(_,{key:0,mode:"single",elementSnippets:e.mainContent.snippets},null,8,["elementSnippets"])):u("",!0),d(p,{mode:"single",connections:e.mainContent.connections},null,8,["connections"]),d(m,{mode:"single",stats:e.mainContent.stats,contentRelativePath:e.mainContent.contentRelativePath},null,8,["stats","contentRelativePath"]),c[1]||(c[1]=i("div",{class:"h-main-half"},null,-1))])}}}),dt=Object.assign(mt,{__name:"MainStickyHeaderPreamble"}),ut={ref:"hider",class:"pointer-events-none absolute top-0 left-0 h-full w-full touch-none"},pt={key:0,ref:"expander",style:{height:"0px"},class:"overflow-hidden transition-[height]"},_t={ref:"expanderContent"},ft={key:0,class:"text-main nice-scrollbars max-h-[70dvh] overflow-auto"},xt=C({__name:"MainStickyHeader",props:{mainContent:{}},setup(e){const a=P(()=>{const g=e.mainContent.breadcrumbs.length>0,$=!!e.mainContent.description,E=!!e.mainContent.flags,B=!!e.mainContent.connections;let U=!1;return(e.mainContent.type==="topic"||e.mainContent.type==="page")&&(U=e.mainContent.snippets?.some(Q=>!!Q.key)??!1),g||$||E||B||U}),c=S(!1),s=S(!1),o=te(),l=S(!0),_=P(()=>o.value&&!l.value),p=ne();q(()=>[p.path,p.hash],()=>{s.value=!1});const{previewState:m,closePreview:f}=ae();q(()=>m.value.opened,g=>{g&&(s.value=!1)});function M(){c.value=!0,s.value=!s.value,f()}const b=j("hider"),k=j("expander"),h=j("expanderContent");return H(()=>{function g(){!k.value||!h.value||(s.value?k.value.style.height=`${h.value.offsetHeight}px`:k.value.style.height="0px")}const $=new ResizeObserver(g);L(()=>{$.disconnect(),!(!k.value||!h.value)&&$.observe(h.value)}),q(s,g);const E=new IntersectionObserver(([B])=>{l.value=B?.isIntersecting??!1});L(()=>{E.disconnect(),b.value&&E.observe(b.value)})}),(g,$)=>{const E=dt,B=O,U=be;return n(),r("div",null,[i("div",ut,null,512),(n(),v(se,{to:"#teleports"},[i("div",{class:w([`fixed-main bg-bg-aside from-brand/8 dark:from-brand/10 to-bg-aside
          micro:text-main border-brand/10 top-0 z-5 rounded-b-[25px] border
          border-t-0 bg-linear-to-t text-[.8em]
          transition-[translate,width,left]`,t(_)?"translate-y-0":"-translate-y-full"])},[t(a)?(n(),r("div",pt,[i("div",_t,[t(c)?(n(),r("div",ft,[(n(),v(oe,null,{default:D(()=>[d(E,{mainContent:e.mainContent},null,8,["mainContent"])]),_:1}))])):u("",!0)],512)],512)):u("",!0),i("div",{class:w([`text-main relative overflow-clip rounded-b-[25px]
            transition-[box-shadow]`,t(_)?"shadow-[0px_5px_15px_0px_light-dark(rgba(0,0,0,0.1),rgba(255,255,255,0.05))]":"shadow-transparent"])},[$[0]||($[0]=i("div",{class:"absolute top-0 left-0 h-full w-full"},null,-1)),$[1]||($[1]=i("div",{class:"from-brand/10 dark:from-brand/5 absolute top-0 left-0 h-full w-full bg-linear-to-t to-transparent"},null,-1)),i("div",{onClick:M,class:w([`py-normal gap-small micro:gap-normal group px-small
              micro:px-normal border-brand/20 dark:border-brand/10 relative flex
              items-center justify-center border-t bg-transparent
              transition-[background]`,t(a)&&"hocus:bg-brand/8 cursor-pointer"])},[d(B,{name:("ICONS"in g?g.ICONS:t(K))[e.mainContent.type],class:"shrink-0 text-[1.2em] text-[color-mix(in_srgb,var(--color-brand),var(--color-text)_70%)]"},null,8,["name"]),d(U,{text:e.mainContent.title,class:"text-center text-[1.1em]"},null,8,["text"]),t(a)?(n(),v(B,{key:0,name:t(s)?"plus":"bookmark-star",class:w([`group-hocus:opacity-100 shrink-0 text-[1.2em]
                text-[color-mix(in_srgb,var(--color-brand),var(--color-text)_50%)]
                opacity-40 transition-opacity`,t(s)&&"rotate-45"])},null,8,["name","class"])):u("",!0)],2)],2)],2)]))])}}}),Dt=Object.assign(xt,{__name:"MainStickyHeader"}),vt={key:0,class:"px-main py-main"},bt={class:"relative max-h-[300px] overflow-hidden"},ht=C({__name:"AdsBannerBottom",setup(e){const a=S();return H(()=>{a.value=re.config.ads.bottom}),(c,s)=>{const o=le;return t(a)?(n(),r("section",vt,[i("div",bt,[d(o,{data:t(a)},null,8,["data"])])])):u("",!0)}}}),St=Object.assign(ht,{__name:"AdsBannerBottom"});async function Ot(e){const a=ie(),c="main-content",s=a.static.data[c]||=a.payload.data[c]||={};return(async()=>(s.contentPath!==e&&(s.contentPath=e,s.mainContent=await ce("/api/main/content/"+e)),s.mainContent))()}export{Tt as _,je as a,ct as b,Dt as c,St as d,Ot as u};
