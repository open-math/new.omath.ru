import{a as v,n as i,l as _,k,x as c,v as l,h as a,Z as y,f as G,t as C}from"./Co3pHHec.js";import{a as T}from"./BQwS8Ze9.js";import{u as g}from"./C2dLlXeG.js";import{u as E}from"./6C2aBVuG.js";import{u as I}from"./Bncs-Lji.js";import{_ as P}from"./MXDg9Xun.js";const V=v({__name:"Link",props:{element:{}},async setup(r){let t,n;const{EruditIcon:m,EruditLink:u,eruditIcons:p,setPreview:d,closePreview:f,baseUrl:x}=T(),b=g(),e=([t,n]=i(()=>E(r.element)),t=await t,n(),t),w=([t,n]=i(async()=>(async()=>{switch(e.type){case"direct":return"arrow/outward-box";case"contentItem":return p[e.content.contentType==="topic"?e.content.topicPart:e.content.contentType];case"unique":return await I(e.schemaName)}})()),t=await t,n(),t),o={timeout:void 0,startTimeout(){this.timeout=setTimeout(()=>{this.reset()},400)},reset(){clearTimeout(this.timeout),this.timeout=void 0}};function h(){if(o.timeout){o.reset(),f();const s=e.type==="direct"?e.resolvedHref:x+e.resolvedHref.slice(1);return window.open(s,"_blank"),!1}return d(e.previewRequest),o.startTimeout(),!1}return(s,B)=>(k(),_(P,{element:r.element},{default:c(()=>[l(a(u),{onClickCapture:y(h,["prevent"]),to:a(e).resolvedHref,style:{"--tGap":"1px","--xGap":"4px","--bGap":"4px"},class:"text-brand hocus:bg-brand/15 relative -mx-[calc(var(--xGap)-3px)] -mt-(--tGap) -mb-(--bGap) rounded-sm bg-transparent px-(--xGap) pt-(--tGap) pb-(--bGap) whitespace-nowrap underline decoration-[color-mix(in_srgb,var(--color-brand)30%,transparent)] decoration-2 underline-offset-2 transition-[color,background]"},{default:c(()=>[l(a(m),{name:a(w),class:"micro:pr-1.5 inline pr-1 text-[1.3em]"},null,8,["name"]),G("span",null,C(a(b)(r.element.data.label)),1)]),_:1},8,["to"])]),_:1},8,["element"]))}});export{V as default};
