import{_ as U,a as O,b as V}from"./BYAAHcmG.js";import{_ as F,a as L}from"./CLM1kx9R.js";import{s as M,_ as K}from"./CZU75N3T.js";import{Q as $,R,S as W,T as D,U as _,I as n,M as C,J as b,K as k,H as m,V as a,W as w,X as B,Y as N,Z as j,$ as H,a0 as J,a1 as Q,a2 as P,a3 as X,a4 as Y,a5 as Z,L as I,a6 as t,a7 as q,a8 as S,a9 as A}from"./D2eihLR_.js";import{_ as ee}from"./C8y61g1X.js";import"./AUuK5W1G.js";const te={class:"group-hocus:text-brand text-text-muted text-main-lg font-semibold transition-[color]"},ne={class:"flex gap-1.5"},oe={key:0,class:"group-hocus:text-brand group-hocus:border-brand border-text-dimmed text-text-muted grid size-(--avatarSize) place-items-center rounded-full border-3 border-dashed text-[17px] leading-none font-semibold transition-[color,border]"},se=2500,re=$({__name:"IndexPagePersons",props:{personType:{},title:{},link:{},persons:{}},setup(l){const o=Object.keys(l.persons),c=o.length,x=Math.min(4,c),h=c-x,e=R(Array.from({length:x},(u,i)=>({personId:`dummy-${i}`,url:void 0,color:void 0})));let y;function g(u,i){return i===0?l.personType==="contributor"?"user":"diamond":j(`/file/${l.personType}s/${u}/avatar.${i}`)}function s(u){return u[Math.floor(Math.random()*u.length)]}return W(()=>{const i=[...o].sort(()=>Math.random()-.5).slice(0,x);e.value=i.map(r=>({personId:r,url:g(r,l.persons[r]),color:M(r)})),!(c<=x)&&(y=window.setInterval(()=>{const r=e.value.map(v=>v.personId),f=o.filter(v=>!r.includes(v));if(!f.length)return;const d=Math.floor(Math.random()*e.value.length),p=s(f);e.value[d]={personId:p,url:g(p,l.persons[p]),color:M(p)}},se))}),D(()=>{y&&clearInterval(y)}),(u,i)=>{const r=K,f=H;return n(),_(f,{to:l.link,class:"group gap-normal flex flex-col items-center [--avatarSize:50px]"},{default:C(()=>[b("div",te,k(l.title),1),b("div",ne,[(n(!0),m(w,null,B(e.value,d=>(n(),_(r,{key:d.personId,url:d.url,style:N({"--mediaColor":d.color}),class:"size-(--avatarSize) rounded-full"},null,8,["url","style"]))),128)),h?(n(),m("div",oe,k("+"+h),1)):a("",!0)])]),_:1},8,["to"])}}}),ae=Object.assign(re,{__name:"IndexPagePersons"}),ie=["src"],le={class:"px-main gap-normal py-main flex flex-col items-center text-center"},ce={class:"micro:text-[1.3em] text-text-muted text-[1.1em] font-semibold"},ue={key:0,class:"gap-small micro:gap-normal micro:text-[1.2em] flex flex-wrap justify-center text-[1.1em]"},me={key:1,class:"micro:text-justify px-main pb-main text-center"},de={key:2,class:"px-main pb-main gap-main flex flex-wrap justify-around"},T="index-page",ge=$({__name:"index",async setup(l){let o,c;const{showNewsAside:x}=J();x();const h=Q(),e=h.static.data[T]||=h.payload.data[T]||=([o,c]=P(()=>$fetch("/api/indexPage",{responseType:"json"})),o=await o,c(),o);X(e);const y=Y(()=>e.logotype?.invert?e.logotype.invert==="dark"?"dark:hue-rotate-180 dark:invert-100":e.logotype.invert==="light"?"hue-rotate-180 invert-100 dark:hue-rotate-0 dark:invert-0":"":""),g=([o,c]=P(()=>Z("x_contributors","x_sponsors")),o=await o,c(),o);return(s,u)=>{const i=U,r=O,f=F,d=L,p=ae,v=V,z=ee;return n(),m(w,null,[I(i),I(v,null,{default:C(()=>[t(e).logotype?(n(),m("img",{key:0,src:("withBaseUrl"in s?s.withBaseUrl:t(j))(t(e).logotype.src),style:N({"max-width":`min(${t(e).logotype.maxWidth||"100%"}, 100%)`}),class:q(["pt-main-half px-main mx-auto block transition-[filter]",t(y)])},null,14,ie)):a("",!0),b("div",le,[b("h1",null,[I(r,{text:t(e).title,class:"text-size-h1"},null,8,["text"])]),b("div",ce,k(("formatText"in s?s.formatText:t(S))(t(e).short)),1),t(e).stats?(n(),m("div",ue,[t(e).stats.materials?(n(),_(f,{key:0,count:t(e).stats.materials,mode:"compact"},null,8,["count"])):a("",!0),t(e).stats.elements?(n(!0),m(w,{key:1},B(t(e).stats.elements,(E,G)=>(n(),_(d,{schemaName:G,count:E,mode:"compact"},null,8,["schemaName","count"]))),256)):a("",!0)])):a("",!0)]),t(e).description?(n(),m("div",me,k(("formatText"in s?s.formatText:t(S))(t(e).description)),1)):a("",!0),t(e).contributors||t(e).sponsors?(n(),m("div",de,[t(e).contributors?(n(),_(p,{key:0,personType:"contributor",title:t(g).x_contributors(Object.keys(t(e).contributors).length),link:("PAGES"in s?s.PAGES:t(A)).contributors,persons:t(e).contributors},null,8,["title","link","persons"])):a("",!0),t(e).sponsors?(n(),_(p,{key:1,personType:"sponsor",title:t(g).x_sponsors(Object.keys(t(e).sponsors).length),link:("PAGES"in s?s.PAGES:t(A)).sponsors,persons:t(e).sponsors},null,8,["title","link","persons"])):a("",!0)])):a("",!0)]),_:1}),t(e).children?(n(),_(z,{key:0,children:t(e).children},null,8,["children"])):a("",!0)],64)}}});export{ge as default};
