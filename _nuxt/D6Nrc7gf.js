import{W as M,X as V,a8 as A,ab as N,N as i,O as d,R as p,S as E,ac as c,P as v,a1 as I,a2 as T,a0 as w,Q as $,ae as z,al as q,a4 as C,av as F,a3 as H,bu as Y,ag as O,Y as S,an as P,bv as D,ax as J,aR as Q,Z as R,aw as j,aJ as U,bi as W,ad as L,bs as X,_ as Z,bt as G,bp as K,at as ee,aO as te,aq as ne}from"./CmFBBqW5.js";import{_ as oe,s as se}from"./B2GIkhMo.js";import{C as ae}from"./Qay0Qsx9.js";const ie={key:0,class:"absolute top-0 left-0 z-10 h-full w-full"},le={class:"bg-bg-aside flex h-full w-full flex-col justify-end"},re={class:"nice-scrollbars *:border-border overflow-auto *:border-t"},ce={class:"border-border flex items-center border-t py-1 pr-0"},ue={class:"pl-normal gap-small flex flex-1 items-center text-sm font-semibold"},de={class:"text-invert rounded-full bg-neutral-600 px-[8px] py-[2.5px] text-xs font-semibold dark:bg-neutral-300"},me={key:0,class:"border-border group-hocus:border-text-dimmed grid size-[38px] place-items-center rounded-full border-3 border-dashed text-xs font-semibold transition-[border,color]"},fe=M({__name:"ButtonPaneContributions",props:{contributions:{}},async setup(e){let l,f;const h=V(),g=O(()=>e.contributions?[...e.contributions].sort(()=>Math.random()-.5).slice(0,Math.min(4,e.contributions.length)):[]),u=O(()=>e.contributions?e.contributions.length-g.value.length:0),_=S(!1),a=([l,f]=A(()=>N("contribution")),l=await l,f(),l);return(r,s)=>{const n=q,t=F,m=oe,k=Y;return e.contributions?(i(),d(I,{key:0},[p(t,null,{default:E(()=>[c(_)?(i(),d("div",ie,[v("div",le,[v("div",re,[(i(!0),d(I,null,T(e.contributions.sort((o,x)=>o.contributorId.localeCompare(x.contributorId)),o=>(i(),w(ae,{contribution:o},null,8,["contribution"]))),256))]),v("div",ce,[v("div",ue,[v("span",null,$(("formatText"in r?r.formatText:c(z))(c(a).contribution)),1),v("span",de,$(e.contributions.length),1)]),v("button",{onClick:s[0]||(s[0]=o=>_.value=!1),class:"text-text-muted hocus:text-text p-normal cursor-pointer transition-[color]"},[p(n,{name:"plus",class:"rotate-45 text-[24px] leading-none"})])])])])):C("",!0)]),_:1}),p(k,{onClick:s[1]||(s[1]=o=>_.value=!0),class:"group border-t border-b-0 py-1"},{main:E(()=>[(i(!0),d(I,null,T(c(g),o=>(i(),w(m,{url:o.avatarUrl?c(h)(o.avatarUrl):"user",style:H({"--mediaColor":("stringColor"in r?r.stringColor:c(se))(o.contributorId)}),class:"size-[38px] rounded-full"},null,8,["url","style"]))),256)),c(u)?(i(),d("div",me," +"+$(c(u)),1)):C("",!0)]),_:1})],64)):C("",!0)}}}),Be=Object.assign(fe,{__name:"AsideMinorContentButtonPaneContributions"}),be={key:0,class:"group/children relative overflow-hidden"},ve=M({__name:"TocItem",props:{item:{},level:{}},async setup(e){let l,f;const h=P(),g=([l,f]=A(async()=>(async()=>{let a=e.item.type==="heading"?D.name:e.item.schemaName;return await J(a)})()),l=await l,f(),l),u=S(!1),_=Q("activeHeadingIds",S(new Set));return R(()=>{if(e.item.type==="heading")j(_,a=>{u.value=a.has(e.item.elementId)},{immediate:!0});else if(e.item.elementId){const a=document.getElementById(e.item.elementId);if(a){const r=new IntersectionObserver(s=>{s.forEach(n=>{u.value=n.isIntersecting})});r.observe(a),U(()=>{r.disconnect()})}}}),(a,r)=>{const s=X,n=W("TocItem",!0);return i(),d("div",{class:L([a.$style.item,c(u)&&a.$style.activeItem])},[p(s,{level:e.level,icon:c(g),main:("formatText"in a?a.formatText:c(z))(e.item.title),state:c(u)?"active":void 0,to:c(h).path+"?element="+e.item.elementId},null,8,["level","icon","main","state","to"]),e.item.type==="heading"?(i(),d("div",be,[v("div",{style:H({"--level":e.level?+e.level:0}),class:L([`border-text-dimmed absolute top-0
          left-[calc(var(--spacing-normal)*(var(--level)+1)+6.5px)] h-full
          border-l opacity-40 transition-[border]`,a.$style.leftLine])},null,6),(i(!0),d(I,null,T(e.item.children,t=>(i(),w(n,{item:t,level:e.item.level},null,8,["item","level"]))),256))])):C("",!0)],2)}}}),_e="_item_1cxom_3",he="_activeItem_1cxom_3",ge="_leftLine_1cxom_7",xe={item:_e,activeItem:he,leftLine:ge},ye={$style:xe},pe=Object.assign(Z(ve,[["__cssModules",ye]]),{__name:"AsideMinorContentTocItem"}),Ie={key:0},we=M({__name:"Toc",props:{toc:{}},async setup(e){let l,f;const h=e,g=([l,f]=A(()=>N("no_toc")),l=await l,f(),l),u=ee(new Set);te("activeHeadingIds",u);function _(r){const s=[],n=t=>{t.type==="heading"&&(s.push(t),t.children.forEach(n))};return r.forEach(n),s}function a(r){const s=window.scrollY;let n=null;for(const{id:t,el:m}of r)if(m.offsetTop<s)n=t;else break;return n}return R(()=>{if(!h.toc)return;const s=_(h.toc).map(o=>({id:o.elementId,el:document.getElementById(o.elementId)})).filter(o=>!!o.el);if(s.length===0)return;const n=new Set;let t=a(s);t&&(u.value=new Set([t]));const m=new IntersectionObserver(o=>{let x=!1;for(const b of o){const y=b.target.id;b.isIntersecting?n.has(y)||(n.add(y),x=!0):(n.delete(y)&&(x=!0),b.boundingClientRect.top<0?t=y:t===y&&(t=null))}if(!x)return;const B=new Set;if(n.size>0)n.forEach(b=>B.add(b));else if(t){const b=document.getElementById(t);b&&b.getBoundingClientRect().top<0&&B.add(t)}u.value=B},{root:null});s.forEach(({el:o})=>m.observe(o));const k=P();j(()=>k.query.element,async o=>{o&&(await ne(),requestAnimationFrame(()=>{t=a(s),n.clear(),u.value=t?new Set([t]):new Set}))}),U(()=>{m.disconnect()})}),(r,s)=>{const n=G,t=K;return e.toc?(i(),d("div",Ie,[p(n,null,{default:E(()=>[(i(!0),d(I,null,T(e.toc,m=>(i(),w(pe,{key:m.elementId,item:m,level:0},null,8,["item"]))),128))]),_:1})])):(i(),w(t,{key:1,text:c(g).no_toc},null,8,["text"]))}}}),$e=Object.assign(we,{__name:"AsideMinorContentToc"});export{Be as B,$e as T};
