import{a as M,c as A,U as E,n as $,C as U,e as u,g as C,k as r,v as I,x as S,h as c,f as g,F as x,r as k,l as w,t as B,J as z,K as V,aa as j,R as H,G as P,as as R,bc as F,a3 as L,i as Y,o as N,w as D,V as O,ad as G,ba as J,S as K,s as q,bb as Q,a6 as W,al as X}from"./Co3pHHec.js";import{_ as Z,s as ee}from"./CDF6NPZx.js";import{C as te}from"./BNkx4otW.js";const ne={key:0,class:"absolute top-0 left-0 z-10 h-full w-full"},oe={class:"bg-bg-aside flex h-full w-full flex-col justify-end transition-[background]"},se={class:"nice-scrollbars *:border-border overflow-auto *:border-t"},re={class:"border-border flex items-center border-t py-1 pr-0 transition-[border]"},ae={class:"pl-normal gap-small flex flex-1 items-center text-sm font-semibold"},ie={class:"text-invert rounded-full bg-neutral-600 px-[8px] py-[2.5px] text-xs font-semibold transition-[color,background] dark:bg-neutral-300"},le={key:0,class:"border-border group-hocus:border-text-dimmed grid size-[38px] place-items-center rounded-full border-3 border-dashed text-xs font-semibold transition-[border,color]"},ce=M({__name:"ButtonPaneContributions",props:{contributions:{}},async setup(e){let a,v;const _=A(()=>e.contributions?[...e.contributions].sort(()=>Math.random()-.5).slice(0,Math.min(4,e.contributions.length)):[]),m=A(()=>e.contributions?e.contributions.length-_.value.length:0),f=E(!1),l=([a,v]=$(()=>U("contribution")),a=await a,v(),a);return(d,i)=>{const s=V,o=j,t=Z,b=R;return e.contributions?(r(),u(x,{key:0},[I(o,null,{default:S(()=>[c(f)?(r(),u("div",ne,[g("div",oe,[g("div",se,[(r(!0),u(x,null,k(e.contributions.sort((n,p)=>n.contributorId.localeCompare(p.contributorId)),n=>(r(),w(te,{contribution:n},null,8,["contribution"]))),256))]),g("div",re,[g("div",ae,[g("span",null,B(("formatText"in d?d.formatText:c(z))(c(l).contribution)),1),g("span",ie,B(e.contributions.length),1)]),g("button",{onClick:i[0]||(i[0]=n=>f.value=!1),class:"text-text-muted hocus:text-text p-normal cursor-pointer transition-[color]"},[I(s,{name:"plus",class:"rotate-45 text-[24px] leading-none"})])])])])):C("",!0)]),_:1}),I(b,{onClick:i[1]||(i[1]=n=>f.value=!0),class:"group border-t border-b-0 py-1"},{main:S(()=>[(r(!0),u(x,null,k(c(_),n=>(r(),w(t,{url:n.avatarUrl?("withBaseUrl"in d?d.withBaseUrl:c(P))(n.avatarUrl):"user",style:H({"--mediaColor":("stringColor"in d?d.stringColor:c(ee))(n.contributorId)}),class:"size-[38px] rounded-full"},null,8,["url","style"]))),256)),c(m)?(r(),u("div",le," +"+B(c(m)),1)):C("",!0)]),_:1})],64)):C("",!0)}}}),_e=Object.assign(ce,{__name:"AsideMinorContentButtonPaneContributions"}),de={key:0,class:"relative overflow-hidden"},ue=M({__name:"TocItem",props:{item:{},level:{}},async setup(e){let a,v;const _=([a,v]=$(async()=>(async()=>{let l=e.item.type==="heading"?F.name:e.item.schemaName;return await L(l)})()),a=await a,v(),a),m=E(!1),f=Y("activeHeadingIds",E(new Set));return N(()=>{if(e.item.type==="heading")D(f,l=>{m.value=l.has(e.item.elementId)},{immediate:!0});else if(e.item.elementId){const l=document.getElementById(e.item.elementId);if(l){const d=new IntersectionObserver(i=>{i.forEach(s=>{m.value=s.isIntersecting})});d.observe(l),O(()=>{d.disconnect()})}}}),(l,d)=>{const i=J,s=G("TocItem",!0);return r(),u(x,null,[I(i,{level:e.level,icon:c(_),main:("formatText"in l?l.formatText:c(z))(e.item.title),state:c(m)?"active":void 0,to:"#"+e.item.elementId},null,8,["level","icon","main","state","to"]),e.item.type==="heading"?(r(),u("div",de,[g("div",{style:H({"--level":e.level?+e.level:0}),class:K([`absolute top-0
                left-[calc(var(--spacing-normal)*(var(--level)+1)+8px)] h-full
                border-l opacity-40 transition-[border]`,[c(m)?"border-brand":"border-text-dimmed"]])},null,6),(r(!0),u(x,null,k(e.item.children,o=>(r(),w(s,{item:o,level:e.item.level},null,8,["item","level"]))),256))])):C("",!0)],64)}}}),me=Object.assign(ue,{__name:"AsideMinorContentTocItem"}),fe={key:0},be=M({__name:"Toc",props:{toc:{}},async setup(e){let a,v;const _=e,m=([a,v]=$(()=>U("no_toc")),a=await a,v(),a),f=q(new Set);X("activeHeadingIds",f);function l(i){const s=[],o=t=>{t.type==="heading"&&(s.push(t),t.children.forEach(o))};return i.forEach(o),s}function d(i){const s=window.scrollY;let o=null;for(const{id:t,el:b}of i)if(b.offsetTop<s)o=t;else break;return o}return N(()=>{if(!_.toc)return;const s=l(_.toc).map(n=>({id:n.elementId,el:document.getElementById(n.elementId)})).filter(n=>!!n.el);if(s.length===0)return;const o=new Set;let t=d(s);t&&(f.value=new Set([t]));const b=new IntersectionObserver(n=>{let p=!1;for(const h of n){const y=h.target.id;h.isIntersecting?o.has(y)||(o.add(y),p=!0):(o.delete(y)&&(p=!0),h.boundingClientRect.top<0?t=y:t===y&&(t=null))}if(!p)return;const T=new Set;if(o.size>0)o.forEach(h=>T.add(h));else if(t){const h=document.getElementById(t);h&&h.getBoundingClientRect().top<0&&T.add(t)}f.value=T},{root:null});s.forEach(({el:n})=>b.observe(n)),O(()=>{b.disconnect()})}),(i,s)=>{const o=Q,t=W;return e.toc?(r(),u("div",fe,[I(o,null,{default:S(()=>[(r(!0),u(x,null,k(e.toc,b=>(r(),w(me,{key:b.elementId,item:b,level:0},null,8,["item"]))),128))]),_:1})])):(r(),w(t,{key:1,text:c(m).no_toc},null,8,["text"]))}}}),xe=Object.assign(be,{__name:"AsideMinorContentToc"});export{_e as B,xe as T};
