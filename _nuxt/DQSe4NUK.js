import{aR as U,_ as W,O as r,Q as v,X as A,aB as N,ad as w,R as o,T as p,ac as a,S as C,U as B,Z as M,a9 as $,a1 as P,a5 as b,ag as z,$ as J,aS as O,a0 as Q,am as X,au as G,aT as K,a4 as Y}from"./D_GAU_kb.js";import{u as ee,a as te,o as ae,s as ne}from"./CVaqpPYf.js";import{u as h,a as se}from"./CP2XOIbp.js";import{u as oe}from"./YHieYHGE.js";import{u as le,d as ie,e as re}from"./6yqU-1zY.js";import{s as ue}from"./kHqF3ywV.js";import{a as ce}from"./DHz_IMr8.js";const de={en:()=>U(()=>import("./BBZfN8yp.js"),[],import.meta.url),ru:()=>U(()=>import("./2QeJnGn1.js"),[],import.meta.url)};async function me(){const{languageCode:e}=h();return(await de[e]()).default}async function pe(e){const{languageCode:t}=h();return await se(typeof e=="string"?e:e.schemaName).languages[t]()}const ve={},fe={class:"border-border/80 my-(--asideMenuGap)"};function ge(e,t){return r(),v("hr",fe)}const _e=W(ve,[["render",ge]]),be={class:"pointer-events-none invisible flex touch-none flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},he=A({__name:"AsideMenuButton",props:{icon:{},title:{},brand:{type:Boolean}},setup(e){const{EruditIcon:t,EruditTransition:i}=h(),u=M(0);return N(()=>[e.icon,e.title],()=>{u.value++}),(c,d)=>(r(),v("button",{class:w(["relative cursor-pointer text-left text-xs transition-[color,background]",e.brand?"text-brand bg-brand/10":"hocus:bg-bg-accent text-text-muted hocus:text-text"])},[o("div",be,[p(a(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]),p(a(i),null,{default:B(()=>[(r(),v("div",{key:u.value,class:"absolute top-0 left-0 flex flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},[p(a(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),o("div",null,C(e.title),1)]))]),_:1})],2))}}),ye=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">\r
    <path d="M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z"/>\r
</svg>`,xe=A({__name:"AsideMenuCopyLink",props:{elementId:{}},async setup(e){let t,i;const{pathUrl:u,baseUrl:c}=h(),d=([t,i]=$(()=>me()),t=await t,i(),t),m=M(!1);let l;async function y(){await navigator.clipboard.writeText(location.origin+c+u.substring(1)+"#"+e.elementId),m.value=!0,l&&clearTimeout(l),l=window.setTimeout(()=>{m.value=!1,l=void 0},2500)}return(I,g)=>(r(),P(he,{brand:m.value,icon:m.value?a(ue):a(ye),title:m.value?a(d).copied:a(d).copy_link,onClick:y},null,8,["brand","icon","title"]))}}),ke={style:{"--asideMenuGap":"5px","--asideMenuGapBig":"calc(var(--asideMenuGap) * 2)"},class:"bg-bg-main border-border flex w-40 flex-col rounded-sm border py-(--asideMenuGap) font-sans shadow-[0_0_12px_5px_light-dark(rgba(0,0,0,0.12),rgba(255,255,255,0.08))] backface-hidden"},we={class:"flex items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap) text-xs font-medium"},Be=A({__name:"AsideMenu",props:{element:{}},async setup(e){let t,i;const u=z(()=>!!e.element.id),c=z(()=>u.value),d=([t,i]=$(()=>pe(e.element)),t=await t,i(),t);return(m,l)=>(r(),v("div",ke,[o("div",we,[o("div",null,C(a(d).element_name),1)]),c.value?(r(),P(_e,{key:0})):b("",!0),u.value?(r(),P(xe,{key:1,elementId:e.element.id},null,8,["elementId"])):b("",!0)]))}}),Me=["id"],Ae={class:"relative"},Ee={class:"sticky top-0"},Te={class:"relative ml-(--proseAsideWidth)"},qe={key:0},Ge=A({__name:"Block",props:{element:{}},async setup(e){let t,i;const{EruditIcon:u,EruditTransition:c}=h(),d=([t,i]=$(()=>oe(e.element)),t=await t,i(),t),m=ce();m.quote="closed";const l=G("block"),y=G("aside"),I=G("asideMenu"),g=M(!1),f=M(!1),{floatingStyles:Z}=ee(y,I,{whileElementsMounted:te,placement:"right-start",strategy:"fixed",middleware:[ae(10),ne({rootBoundary:"viewport"})]}),E=s=>{if(!f.value)return;const n=y.value;n&&(n.contains(s.target)||(f.value=!1))},L=le(e.element),S=ie(),j=re(),H=(s,n,R)=>{let x={top:0,left:0},k,_,T=!1;const F=()=>{if(T)return;const V=s.getBoundingClientRect(),q={top:V.top,left:V.left};(x.top!==q.top||x.left!==q.left)&&(x=q,clearTimeout(k),k=window.setTimeout(()=>{T=!0,n()},300)),_=requestAnimationFrame(F)},D=s.getBoundingClientRect();x={top:D.top,left:D.left},k=window.setTimeout(()=>{T=!0,cancelAnimationFrame(_),n()},300),_=requestAnimationFrame(F),R(()=>{clearTimeout(k),_!==void 0&&cancelAnimationFrame(_)})};return N(f,s=>{s?document.addEventListener("click",E):document.removeEventListener("click",E)}),J(()=>{O(async s=>{L.value&&(S(l.value),H(l.value,()=>{S(l.value),j()},s))}),g.value=l.value.matches(":hover"),l.value.addEventListener("mouseenter",()=>{g.value=!0}),l.value.addEventListener("mouseleave",()=>{g.value=!1})}),Q(()=>{document.removeEventListener("click",E)}),(s,n)=>(r(),v("div",{ref:"block",id:e.element.id,class:w([s.$style.block,"scroll-mt-big pr-(--proseAsideWidth)"])},[o("div",{class:w([s.$style.blockAbove,"h-(--proseGap)"])},null,2),o("div",Ae,[o("aside",{ref:"aside",onClick:n[1]||(n[1]=R=>f.value=!f.value),class:"group/aside absolute top-0 left-0 h-full w-(--proseAsideWidth) cursor-pointer"},[n[2]||(n[2]=o("div",{class:"micro:rounded-sm group-hocus/aside:bg-bg-accent absolute top-0 left-0 h-full w-full bg-transparent transition-[background]"},null,-1)),o("div",Ee,[p(a(c),{mode:"out-in"},{default:B(()=>[g.value?(r(),v("div",{key:a(d)},[p(a(u),{name:a(d),class:"text-text-dimmed group-hocus/aside:text-text m-auto mt-0.5 aspect-square w-[80%] transition-[color]"},null,8,["name"])])):b("",!0)]),_:1})]),p(a(c),null,{default:B(()=>[f.value?(r(),v("div",{key:0,ref:"asideMenu",style:Y(a(Z)),onClick:n[0]||(n[0]=K(()=>{},["stop"])),class:"z-10 cursor-auto"},[p(Be,{element:e.element},null,8,["element"])],4)):b("",!0)]),_:1})],512),o("main",Te,[X(s.$slots,"default"),p(a(c),null,{default:B(()=>[a(L)?(r(),v("div",qe,[...n[3]||(n[3]=[o("div",{class:"bg-brand animate-fade-out pointer-events-none absolute -top-(--overlayPadding) -right-(--overlayPadding) -bottom-(--overlayPadding) -left-(--overlayPadding) touch-none rounded opacity-0 shadow-[0_0_18px_1px_var(--color-brand)] [--overlayPadding:5px]"},null,-1)])])):b("",!0)]),_:1})])]),o("div",{class:w([s.$style.blockBelow,"h-(--proseGap)"])},null,2)],10,Me))}}),Ce="_block_xu31y_4",Pe="_blockAbove_xu31y_4",$e="_blockBelow_xu31y_8",Ie={block:Ce,blockAbove:Pe,blockBelow:$e},Le={$style:Ie},Ne=W(Ge,[["__cssModules",Le]]);export{Ne as B,pe as u};
