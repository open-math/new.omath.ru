import{W as f,N as o,O as l,R as p,ak as E,P as y,Q as x,a8 as g,ab as w,a0 as _,ac as s,ax as N,aE as K,ae as S,au as L,a5 as R,S as T,av as V,a3 as F,a4 as d,ag as M,a1 as v,a2 as $,Z as q,al as z,aF as U,Y as W,aG as Z,ai as I}from"./Du3Wvoik.js";import{u as G}from"./DDbFNHID.js";import{s as Q,a as Y}from"./BokzypnP.js";import{_ as H}from"./Crx8eIgn.js";const J=["title"],X={class:"text-text-muted font-bold"},ee={key:1,class:"gap-small px-small text-main-sm border-border bg-bg-aside flex items-center rounded-xl border py-1"},te={class:"text-text-muted"},ne={class:"text-text-muted font-bold"},ae=f({__name:"Item",props:{mode:{default:"detailed"},icon:{},label:{},count:{}},setup(e){return(t,a)=>{const n=E;return e.mode==="compact"?(o(),l("div",{key:0,title:e.label,class:"gap-small flex cursor-help items-center"},[p(n,{name:e.icon,class:"text-text-dimmed -mr-0.5 text-[1.2em]"},null,8,["name"]),y("span",X,x(e.count),1)],8,J)):(o(),l("div",ee,[p(n,{name:e.icon,class:"text-text-dimmed -mr-0.5 text-[1.2em]"},null,8,["name"]),y("span",te,x(e.label),1),y("span",ne,x(e.count),1)]))}}}),O=Object.assign(ae,{__name:"MainContentStatsItem"}),se=f({__name:"ItemMaterials",props:{count:{}},async setup(e){let t,a;const n=([t,a]=g(()=>w("materials")),t=await t,a(),t);return(r,c)=>(o(),_(O,{icon:"files",label:s(n).materials,count:e.count},null,8,["label","count"]))}}),C=Object.assign(se,{__name:"MainContentStatsItemMaterials"}),oe=f({__name:"ItemElement",props:{schemaName:{},count:{}},async setup(e){let t,a;const n=([t,a]=g(()=>N(e.schemaName)),t=await t,a(),t),r=([t,a]=g(()=>K(e.schemaName)),t=await t,a(),t);return(c,u)=>(o(),_(O,{icon:s(n),label:s(r).element_name,count:e.count},null,8,["icon","label","count"]))}}),j=Object.assign(oe,{__name:"MainContentStatsItemElement"}),ce={class:"text-main-sm micro:text-left pb-main-half text-center font-semibold"},ie=f({__name:"MainSubTitle",props:{title:{}},setup(e){return(t,a)=>(o(),l("div",ce,x(("formatText"in t?t.formatText:s(S))(e.title)),1))}}),P=Object.assign(ie,{__name:"MainSubTitle"}),le={ref:"container"},re={ref:"toggle"},me={class:"px-small text-main-xs rounded bg-neutral-900 py-1 text-white shadow-lg/30 dark:bg-neutral-400 dark:text-black dark:shadow-neutral-500"},ue=f({__name:"MainKeyLink",props:{keyLink:{}},async setup(e){let t,a;const n=L("container"),r=L("toggle"),c=L("popup"),{popupVisible:u,popupStyles:k}=G(n,r,c,{placement:"bottom",whileElementsMounted:Y,middleware:[Q({boundary:document?.querySelector("[data-erudit-main]")||void 0})]}),i=([t,a]=g(()=>N(e.keyLink.schemaName)),t=await t,a(),t),m=M(()=>e.keyLink.key?.title?e.keyLink.key.title:e.keyLink.title),h=M(()=>e.keyLink.key?.description?e.keyLink.key.description:e.keyLink.description);return(b,Le)=>{const B=E,D=R,A=V;return o(),l("div",le,[y("div",re,[p(D,{to:e.keyLink.link,class:"gap-small border-border px-small text-text-muted text-main-sm hocus:text-brand hocus:border-brand hocus:ring-brand/25 flex items-center rounded border bg-(--keyBg) py-1 ring-2 ring-transparent transition-[color,border,box-shadow]"},{default:T(()=>[p(B,{name:s(i),class:"-mr-0.5 text-[1.2em]"},null,8,["name"]),y("span",null,x(("formatText"in b?b.formatText:s(S))(s(m))),1)]),_:1},8,["to"])],512),p(A,null,{default:T(()=>[s(h)&&s(u)?(o(),l("div",{key:0,style:F(s(k)),ref:"popup",class:"z-10 max-w-[300px] p-2"},[y("div",me,x(("formatText"in b?b.formatText:s(S))(s(h))),1)],4)):d("",!0)]),_:1})],512)}}}),de=Object.assign(ue,{__name:"MainKeyLink"}),_e={key:0,class:"px-main py-main-half"},pe={style:{"--keyBg":"var(--color-bg-aside)"},class:"gap-small micro:gap-normal micro:justify-start flex flex-wrap justify-center"},ye={key:1,style:{"--keyBg":"var(--color-bg-main)"},class:"gap-small text-main-sm flex flex-wrap"},he=f({__name:"MainKeyLinks",props:{mode:{},elementSnippets:{}},async setup(e){let t,a;const n=(()=>{if(!e.elementSnippets)return;const c=e.elementSnippets.filter(u=>!!u.key);return c.length>0?c:void 0})(),r=([t,a]=g(()=>w("key_elements")),t=await t,a(),t);return(c,u)=>{const k=P,i=de;return s(n)?(o(),l(v,{key:0},[e.mode==="single"?(o(),l("section",_e,[p(k,{title:s(r).key_elements+":"},null,8,["title"]),y("div",pe,[(o(!0),l(v,null,$(s(n),m=>(o(),_(i,{keyLink:m},null,8,["keyLink"]))),256))])])):(o(),l("div",ye,[(o(!0),l(v,null,$(s(n),m=>(o(),_(i,{keyLink:m},null,8,["keyLink"]))),256))]))],64)):d("",!0)}}}),je=Object.assign(he,{__name:"MainKeyLinks"}),fe={key:0,class:"gap-small px-small text-main-sm border-border bg-bg-aside flex items-center rounded-xl border py-1"},xe={class:"text-text-muted"},ge=f({__name:"ItemLastChanged",props:{source:{}},async setup(e){let t,a;const n=W(null),r={year:"numeric",month:"short",day:"numeric"},c=M(()=>{if(!n.value)return!1;const i=new Date,m=new Date(i);return m.setMonth(i.getMonth()-3),n.value>=m&&n.value<=i}),u=M(()=>n.value?n.value.toLocaleDateString(void 0,r):""),k=([t,a]=g(()=>w("updated")),t=await t,a(),t);return q(async()=>{if(e.source.type==="date"){n.value=new Date(e.source.value);return}if(e.source.type==="github")try{const i=await $fetch(e.source.url,{query:{path:e.source.path,per_page:1},responseType:"json"});Array.isArray(i)&&i[0]?.commit?.committer?.date&&(n.value=new Date(i[0].commit.committer.date))}catch{}}),(i,m)=>{const h=z,b=H;return s(n)?(o(),l("div",fe,[p(h,{name:"update",class:"text-text-dimmed -mr-0.5 text-[1.2em]"}),y("span",xe,x(s(k).updated),1),p(b,U({datetime:s(n)},r,{relative:s(c),title:s(u),class:"text-text-muted cursor-help font-bold"}),null,16,["datetime","relative","title"])])):d("",!0)}}}),ke=Object.assign(ge,{__name:"MainContentStatsItemLastChanged"});function be(e){return M(()=>{const t=Z(e);if(!t)return null;const a=I.config.debug.fakeApi.lastChanged;if(a===!0)return{type:"date",value:"2024-01-15T12:00:00Z"};if(typeof a=="string")return{type:"date",value:a};const n=I.config.repository;if(!n||n.type!=="github")return null;const r=n.name.split("/");if(r.length!==2)return null;const[c,u]=r;return{type:"github",url:`https://api.github.com/repos/${c}/${u}/commits`,path:`content/${t}`}})}const ve={key:0,class:"px-main py-main-half"},Me={class:"micro:justify-start gap-small micro:gap-normal flex flex-wrap justify-center"},$e={key:1,class:"gap-small micro:gap-normal text-main-sm flex flex-wrap"},we=f({__name:"MainContentStats",props:{mode:{},stats:{},contentRelativePath:{}},async setup(e){let t,a;const n=e,r=([t,a]=g(()=>w("stats")),t=await t,a(),t),c=be(()=>n.contentRelativePath);return(u,k)=>{const i=P;return e.mode==="single"&&(e.stats||s(c))?(o(),l("section",ve,[p(i,{title:s(r).stats+":"},null,8,["title"]),y("div",Me,[e.stats?.materials?(o(),_(C,{key:0,count:e.stats.materials,mode:"detailed"},null,8,["count"])):d("",!0),e.stats?.elements?(o(!0),l(v,{key:1},$(e.stats.elements,(m,h)=>(o(),_(j,{schemaName:h,count:m,mode:"detailed"},null,8,["schemaName","count"]))),256)):d("",!0),s(c)?(o(),_(ke,{key:2,source:s(c)},null,8,["source"])):d("",!0)])])):e.mode==="children"&&e.stats?(o(),l("div",$e,[e.stats.materials?(o(),_(C,{key:0,count:e.stats.materials,mode:"compact"},null,8,["count"])):d("",!0),e.stats.elements?(o(!0),l(v,{key:1},$(e.stats.elements,(m,h)=>(o(),_(j,{schemaName:h,count:m,mode:"compact"},null,8,["schemaName","count"]))),256)):d("",!0)])):d("",!0)}}}),Ee=Object.assign(we,{__name:"MainContentStats"});export{C as _,j as a,Ee as b,je as c,P as d};
