import{aJ as D,_ as z,H as v,I as r,Q as B,R as M,av as J,a7 as x,J as l,L as p,a6 as n,K as L,M as w,a2 as I,U as C,a4 as U,V as b,an as G,S as N,aK as j,T as Q,af as Y,aL as Z,Y as O}from"./D2eihLR_.js";import{u as X,a as ee,o as te,s as ne}from"./AUuK5W1G.js";import{a as h,b as ae}from"./3TVwIgt5.js";import{u as se}from"./CsjOJ_iA.js";import{u as oe,d as le,e as ie}from"./BhiGAuux.js";import{s as re}from"./kHqF3ywV.js";const ce={en:()=>D(()=>import("./BBZfN8yp.js"),[],import.meta.url),ru:()=>D(()=>import("./2QeJnGn1.js"),[],import.meta.url)};async function ue(){const{languageCode:e}=h();return(await ce[e]()).default}async function de(e){const{languageCode:t}=h();return await ae(typeof e=="string"?e:e.schemaName).languages[t]()}const me={},pe={class:"border-border/80 my-(--asideMenuGap)"};function ve(e,t){return r(),v("hr",pe)}const fe=z(me,[["render",ve]]),ge={class:"pointer-events-none invisible flex touch-none flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},_e=B({__name:"AsideMenuButton",props:{icon:{},title:{},brand:{type:Boolean}},setup(e){const{EruditIcon:t,EruditTransition:i}=h(),c=M(0);return J(()=>[e.icon,e.title],()=>{c.value++}),(u,d)=>(r(),v("button",{class:x([`relative cursor-pointer text-left text-xs
            transition-[color,background]`,e.brand?"text-brand bg-brand/10":"hocus:bg-bg-accent text-text-muted hocus:text-text"])},[l("div",ge,[p(n(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),l("div",null,L(e.title),1)]),p(n(i),null,{default:w(()=>[(r(),v("div",{key:c.value,class:"absolute top-0 left-0 flex flex-wrap items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap)"},[p(n(t),{name:e.icon,class:"shrink-0 text-[1.2em]"},null,8,["name"]),l("div",null,L(e.title),1)]))]),_:1})],2))}}),be=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">\r
    <path d="M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z"/>\r
</svg>`,he=B({__name:"AsideMenuCopyLink",props:{elementId:{}},async setup(e){let t,i;const{pathUrl:c,baseUrl:u}=h(),d=([t,i]=I(()=>ue()),t=await t,i(),t),s=M(!1);let m;async function A(){await navigator.clipboard.writeText(location.origin+u+c.substring(1)+"#"+e.elementId),s.value=!0,m&&clearTimeout(m),m=window.setTimeout(()=>{s.value=!1,m=void 0},2500)}return(g,f)=>(r(),C(_e,{brand:s.value,icon:s.value?n(re):n(be),title:s.value?n(d).copied:n(d).copy_link,onClick:A},null,8,["brand","icon","title"]))}}),ke={style:{"--asideMenuGap":"5px","--asideMenuGapBig":"calc(var(--asideMenuGap) * 2)"},class:"bg-bg-main border-border flex w-40 flex-col rounded-sm border py-(--asideMenuGap) font-sans shadow-[0_0_12px_5px_light-dark(rgba(0,0,0,0.12),rgba(255,255,255,0.08))] backface-hidden"},ye={class:"flex items-center gap-(--asideMenuGapBig) px-(--asideMenuGapBig) py-(--asideMenuGap) text-xs font-medium"},xe=B({__name:"AsideMenu",props:{element:{}},async setup(e){let t,i;const c=U(()=>!!e.element.id),u=U(()=>c.value),d=([t,i]=I(()=>de(e.element)),t=await t,i(),t);return(s,m)=>(r(),v("div",ke,[l("div",ye,[l("div",null,L(n(d).element_name),1)]),u.value?(r(),C(fe,{key:0})):b("",!0),c.value?(r(),C(he,{key:1,elementId:e.element.id},null,8,["elementId"])):b("",!0)]))}}),we=["id"],Me={class:"relative"},Be={class:"sticky top-0"},Ae={class:"relative ml-(--proseAsideWidth)"},Ee={key:0},Te=B({__name:"Block",props:{element:{}},async setup(e){let t,i;const{EruditIcon:c,EruditTransition:u}=h(),d=([t,i]=I(()=>se(e.element)),t=await t,i(),t),s=G("block"),m=G("aside"),A=G("asideMenu"),g=M(!1),f=M(!1),{floatingStyles:W}=X(m,A,{whileElementsMounted:ee,placement:"right-start",strategy:"fixed",middleware:[te(10),ne({rootBoundary:"viewport"})]}),E=o=>{if(!f.value)return;const a=m.value;a&&(a.contains(o.target)||(f.value=!1))},P=oe(e.element),$=le(),H=ie(),K=(o,a,R)=>{let k={top:0,left:0},y,_,T=!1;const S=()=>{if(T)return;const V=o.getBoundingClientRect(),q={top:V.top,left:V.left};(k.top!==q.top||k.left!==q.left)&&(k=q,clearTimeout(y),y=window.setTimeout(()=>{T=!0,a()},300)),_=requestAnimationFrame(S)},F=o.getBoundingClientRect();k={top:F.top,left:F.left},y=window.setTimeout(()=>{T=!0,cancelAnimationFrame(_),a()},300),_=requestAnimationFrame(S),R(()=>{clearTimeout(y),_!==void 0&&cancelAnimationFrame(_)})};return J(f,o=>{o?document.addEventListener("click",E):document.removeEventListener("click",E)}),N(()=>{j(async o=>{P.value&&($(s.value),K(s.value,()=>{$(s.value),H()},o))}),g.value=s.value.matches(":hover"),s.value.addEventListener("mouseenter",()=>{g.value=!0}),s.value.addEventListener("mouseleave",()=>{g.value=!1})}),Q(()=>{document.removeEventListener("click",E)}),(o,a)=>(r(),v("div",{ref:"block",id:e.element.id,class:x([o.$style.block,"scroll-mt-big pr-(--proseAsideWidth)"])},[l("div",{class:x([o.$style.blockAbove,"h-(--proseGap)"])},null,2),l("div",Me,[l("aside",{ref:"aside",onClick:a[1]||(a[1]=R=>f.value=!f.value),class:"group/aside absolute top-0 left-0 h-full w-(--proseAsideWidth) cursor-pointer"},[a[2]||(a[2]=l("div",{class:"micro:rounded-sm group-hocus/aside:bg-bg-accent absolute top-0 left-0 h-full w-full bg-transparent transition-[background]"},null,-1)),l("div",Be,[p(n(u),{mode:"out-in"},{default:w(()=>[g.value?(r(),v("div",{key:n(d)},[p(n(c),{name:n(d),class:"text-text-dimmed group-hocus/aside:text-text m-auto mt-0.5 aspect-square w-[80%] transition-[color]"},null,8,["name"])])):b("",!0)]),_:1})]),p(n(u),null,{default:w(()=>[f.value?(r(),v("div",{key:0,ref:"asideMenu",style:O(n(W)),onClick:a[0]||(a[0]=Z(()=>{},["stop"])),class:"z-10 cursor-auto"},[p(xe,{element:e.element},null,8,["element"])],4)):b("",!0)]),_:1})],512),l("main",Ae,[Y(o.$slots,"default"),p(n(u),null,{default:w(()=>[n(P)?(r(),v("div",Ee,[...a[3]||(a[3]=[l("div",{class:"bg-brand animate-fade-out pointer-events-none absolute -top-(--overlayPadding) -right-(--overlayPadding) -bottom-(--overlayPadding) -left-(--overlayPadding) touch-none rounded opacity-0 shadow-[0_0_18px_1px_var(--color-brand)] [--overlayPadding:5px]"},null,-1)])])):b("",!0)]),_:1})])]),l("div",{class:x([o.$style.blockBelow,"h-(--proseGap)"])},null,2)],10,we))}}),qe="_block_15sr3_7",Ge="_blockAbove_15sr3_7",Le="_blockBelow_15sr3_15",Ce={block:qe,blockAbove:Ge,blockBelow:Le},Ie={$style:Ce},Ue=z(Te,[["__cssModules",Ie]]);export{Ue as B,de as u};
