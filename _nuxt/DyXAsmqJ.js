import{Y,X as k,O as a,Q as l,R as r,ac as t,a5 as u,a9 as U,ab as N,au as B,T as m,al as E,S as x,ae as y,U as S,a4 as H,av as Z,a2 as T,a3 as I,a1 as b,am as V,ad as $,ag as P,_ as G,ar as R,a6 as L,V as q,Z as j,aw as J,an as W,ax as z,ay as ee,$ as K,az as A,aA as te,aB as ne,ai as ae,aC as oe,a8 as se}from"./C4wjQouH.js";import{_ as re}from"./C9isRk92.js";import{u as le}from"./DJ6eiFh0.js";import{a as ie,s as ce}from"./BokzypnP.js";import{a as de}from"./CLl2xy5Y.js";import{d as me,c as ue,b as pe}from"./CBXNC_nU.js";import{a as _e}from"./BqKeKBKc.js";function fe(e){return Y()("/file/"+e)}const xe={key:0,class:"pl-small pb-small pt-main pr-main float-right max-[700px]:hidden"},be=["src"],ve=k({__name:"MainDecoration",props:{decoration:{}},setup(e){return(n,i)=>e.decoration?(a(),l("section",xe,[r("img",{src:("fileUrl"in n?n.fileUrl:t(fe))(e.decoration),class:"block aspect-square max-h-[125px] w-full max-w-[125px]"},null,8,be)])):u("",!0)}}),ht=Object.assign(ve,{__name:"MainDecoration"}),he={ref:"toggle",class:"px-small text-main-sm flex cursor-help items-center gap-1 rounded border border-(--flagColor)/30 bg-(--flagColor)/15 py-1 text-(--flagColor) select-none"},ge={class:"bg-bg-main rounded border-2 border-(--flagColor)/30 shadow-[0_0_14px_var(--flagColor)]/40 dark:shadow-[0_0_14px_var(--flagColor)]/20"},ye={class:"p-small bg-linear-60 from-(--flagColor)/5 to-(--flagColor)/20 text-(--flagColor)"},Ce={class:"p-small float-right pt-0 pr-0"},ke={class:"pb-small text-main-sm font-semibold"},we={class:"text-main-xs"},$e=k({__name:"MainFlag",props:{flag:{}},async setup(e){let n,i;const s=([n,i]=U(()=>N("flag_advanced","flag_advanced_description","flag_dev","flag_dev_description","flag_secondary","flag_secondary_description")),n=await n,i(),n),c={dev:{icon:"construction",color:"light-dark(var(--color-yellow-700),var(--color-yellow-500))",title:s.flag_dev,description:s.flag_dev_description},advanced:{icon:"asterisk",color:"light-dark(#72189a,#ff94ff)",title:s.flag_advanced,description:s.flag_advanced_description},secondary:{icon:"puzzle",color:"light-dark(#558a1a,#8bb759)",title:s.flag_secondary,description:s.flag_secondary_description}}[e.flag],f=B("container"),p=B("toggle"),d=B("popup"),{popupVisible:_,popupStyles:M}=le(f,p,d,{placement:"bottom",whileElementsMounted:ie,middleware:[ce({boundary:document?.querySelector("[data-erudit-main]")||void 0})]});return(v,C)=>{const h=E,g=Z;return a(),l("div",{ref:"container",style:H({"--flagColor":t(c).color})},[r("div",he,[m(h,{name:t(c).icon,class:"text-[1.3em]"},null,8,["name"]),r("span",null,x(("formatText"in v?v.formatText:t(y))(t(c).title)),1)],512),m(g,null,{default:S(()=>[t(_)?(a(),l("div",{key:0,style:H(t(M)),ref:"popup",class:"z-10 max-w-[320px] p-2"},[r("div",ge,[r("div",ye,[r("div",Ce,[m(h,{name:t(c).icon,class:"text-[40px] opacity-30"},null,8,["name"])]),r("div",ke,x(("formatText"in v?v.formatText:t(y))(t(c).title)),1),r("div",we,x(("formatText"in v?v.formatText:t(y))(t(c).description)),1)])])],4)):u("",!0)]),_:1})],4)}}}),Me=Object.assign($e,{__name:"MainFlag"}),Te={key:0,class:"gap-small micro:gap-normal micro:justify-start px-main py-main-half flex flex-wrap justify-center"},Se=k({__name:"MainFlags",props:{flags:{}},setup(e){const n=e.flags?Object.keys(e.flags).sort():[];return(i,s)=>{const o=Me;return e.flags?(a(),l("section",Te,[(a(!0),l(T,null,I(t(n),c=>(a(),b(o,{flag:c},null,8,["flag"]))),256))])):u("",!0)}}}),De=Object.assign(Se,{__name:"MainFlags"}),Oe={key:0,class:"font-bold"},Be=k({__name:"MainConnectionsButton",props:{type:{},active:{type:Boolean},count:{}},async setup(e){let n,i;const s=e.type==="hardDependencies",o=([n,i]=U(()=>N("need_to_know","depends_on","used_by","externals")),n=await n,i(),n),c=(()=>{switch(e.type){case"hardDependencies":return o.need_to_know;case"autoDependencies":return o.depends_on;case"dependents":return o.used_by;case"externals":return o.externals}})(),f=(()=>{switch(e.type){case"hardDependencies":return"warning";case"autoDependencies":return"arrow/to-circle";case"dependents":return"arrow/from-circle";case"externals":return"arrow/outward-box"}})(),p=P(()=>e.active?"border-(--activeColor) text-(--activeColor) bg-(--activeColor)/10 hocus:ring-(--activeColor)/25":"border-border bg-bg-aside text-text-muted hocus:ring-(--activeColor)/25 hocus:text-(--activeColor) hocus:border-(--activeColor)");return(d,_)=>{const M=E;return a(),l("button",{style:H({"--activeColor":s?"light-dark(var(--color-red-700),var(--color-red-400))":"var(--color-brand)"}),class:$([`gap-small text-main-sm px-small flex cursor-pointer items-center rounded
      border py-1 ring-2 ring-transparent
      transition-[border,color,box-shadow,background]`,t(p)])},[m(M,{name:t(f),class:"text-[1.2em]"},null,8,["name"]),r("span",null,x(("formatText"in d?d.formatText:t(y))(t(c))),1),e.count?(a(),l("span",Oe,x(e.count),1)):u("",!0),V(d.$slots,"after")],6)}}}),Ee=Object.assign(Be,{__name:"MainConnectionsButton"}),je={},Ie={class:"nice-scrollbars border-border mt-normal relative overflow-auto border-t border-b"};function Pe(e,n){return a(),l("div",Ie,[V(e.$slots,"default")])}const Q=Object.assign(G(je,[["render",Pe]]),{__name:"MainConnectionsScrollPane"}),Fe={class:"gap-small flex"},Ue={class:"flex flex-col gap-0.5"},Ne={key:0,class:"text-text-muted text-main-sm italic"},ze=k({__name:"Deps",props:{deps:{}},setup(e){return(n,i)=>{const s=E,o=L;return a(),b(Q,{class:"py-normal gap-main-half max-h-[50dvh)] flex flex-col"},{default:S(()=>[(a(!0),l(T,null,I(e.deps,c=>(a(),l("div",Fe,[m(s,{name:("ICONS"in n?n.ICONS:t(R))[c.contentType],class:"relative top-1 shrink-0"},null,8,["name"]),r("div",Ue,[r("div",null,[m(o,{to:c.link,class:"text-hover-underline"},{default:S(()=>[q(x(("formatText"in n?n.formatText:t(y))(c.title))+" ",1),m(s,{name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})]),_:2},1032,["to"])]),c.type==="hard"?(a(),l("div",Ne,x(("formatText"in n?n.formatText:t(y))(c.reason)),1)):u("",!0)])]))),256))]),_:1})}}}),He=Object.assign(ze,{__name:"MainConnectionsDeps"}),Ae={key:0,class:"relative font-semibold"},Ve={class:"gap-small py-normal flex"},Re={class:"flex flex-col gap-0.5"},Le={key:1},qe={key:0,class:"text-text-muted text-main-sm"},Ke={class:"text-text-muted text-main-sm italic"},Qe=k({__name:"Externals",props:{externals:{}},async setup(e){let n,i;const s=([n,i]=U(()=>N("externals_own","externals_from")),n=await n,i(),n);return(o,c)=>{const f=E,p=L;return a(),b(Q,{class:"max-h-[50dvh]"},{default:S(()=>[(a(!0),l(T,null,I(e.externals,d=>(a(),l("div",null,[r("div",{class:$([`border-border gap-small pl-small py-small sticky top-0 z-10 flex
          w-full items-center border-b border-dashed backdrop-blur-sm`,d.type==="own"?"font-semibold text-amber-600 dark:text-amber-400":"text-text-muted"])},[r("div",{class:$(["absolute top-0 left-0 h-full w-full bg-linear-to-t to-transparent",d.type==="own"?"from-amber-400/10":"from-bg-aside/50"])},null,2),m(f,{name:d.type==="own"?"arrow/left":"arrow/up-to-right",class:$(["relative",d.type==="own"&&"-scale-x-100"])},null,8,["name","class"]),r("span",null,x(d.type==="own"?t(s).externals_own:t(s).externals_from),1),d.type==="parent"?(a(),l("span",Ae,x(("formatText"in o?o.formatText:t(y))(`"${d.title}"`)),1)):u("",!0)],2),r("div",null,[(a(!0),l(T,null,I(d.items,_=>(a(),l("div",Ve,[m(f,{name:_.type==="physical"?"book":"globe",class:"relative top-1 shrink-0"},null,8,["name"]),r("div",Re,[r("div",null,[_.link?(a(),b(p,{key:0,external:"",target:"_blank",to:_.link,class:$([_.link&&"text-hover-underline"])},{default:S(()=>[q(x(("formatText"in o?o.formatText:t(y))(_.title))+" ",1),_.link?(a(),b(f,{key:0,name:"arrow/outward",class:"text-text-disabled text-main-sm relative -top-1 inline"})):u("",!0)]),_:2},1032,["to","class"])):(a(),l("span",Le,x(("formatText"in o?o.formatText:t(y))(_.title)),1))]),_.info?(a(),l("div",qe,x(("formatText"in o?o.formatText:t(y))(_.info)),1)):u("",!0),r("div",Ke,x(("formatText"in o?o.formatText:t(y))(_.reason)),1)])]))),256))])]))),256))]),_:1})}}}),Xe=Object.assign(Qe,{__name:"MainConnectionsExternals"}),Ye={key:0,class:"px-main py-main-half"},Ze={class:"gap-small micro:gap-normal micro:justify-start flex flex-wrap justify-center"},Ge={key:0,class:"gap-small *:border-border *:pl-small flex items-center font-bold *:border-l"},Je={key:0,class:"flex items-center gap-1 text-amber-600 dark:text-amber-400"},We={key:1,class:"flex items-center gap-1"},et=k({__name:"MainConnections",props:{connections:{}},async setup(e){let n,i;const s=([n,i]=U(()=>N("connections")),n=await n,i(),n),o=j("hardDependencies"),c=P(()=>e.connections?.externals?.find(p=>p.type==="own")?.items.length),f=P(()=>e.connections?.externals?.filter(p=>p.type==="parent").reduce((p,d)=>p+d.items.length,0));return(p,d)=>{const _=me,M=Ee,v=E;return e.connections?(a(),l("section",Ye,[m(_,{title:t(s).connections+":"},null,8,["title"]),r("div",Ze,[(a(!0),l(T,null,I({hardDependencies:e.connections.hardDependencies,autoDependencies:e.connections.autoDependencies,dependents:e.connections.dependents},(C,h)=>(a(),l(T,null,[C&&C.length>0?(a(),b(M,{key:0,type:h,count:C.length,active:t(o)===h,onClick:g=>t(o)===h?o.value=void 0:o.value=h},null,8,["type","count","active","onClick"])):u("",!0)],64))),256)),e.connections.externals?(a(),b(M,{key:0,type:"externals",active:t(o)==="externals",onClick:d[0]||(d[0]=C=>t(o)==="externals"?o.value=void 0:o.value="externals")},{after:S(()=>[e.connections.externals?(a(),l("div",Ge,[t(c)?(a(),l("div",Je,[m(v,{name:"arrow/left",class:"-scale-x-100"}),r("span",null,x(t(c)),1)])):u("",!0),t(f)?(a(),l("div",We,[m(v,{name:"arrow/up-to-right"}),r("span",null,x(t(f)),1)])):u("",!0)])):u("",!0)]),_:1},8,["active"])):u("",!0)]),t(o)&&e.connections[t(o)]?(a(),l(T,{key:0},[t(o)!=="externals"?(a(),b(He,{key:0,deps:e.connections[t(o)]},null,8,["deps"])):(a(),b(Xe,{key:1,externals:e.connections[t(o)]},null,8,["externals"]))],64)):u("",!0)])):u("",!0)}}}),tt=Object.assign(et,{__name:"MainConnections"}),nt=k({__name:"MainStickyHeaderPreamble",props:{mainContent:{}},setup(e){return(n,i)=>{const s=re,o=De,c=de,f=ue,p=tt,d=pe;return a(),l("div",null,[i[0]||(i[0]=r("div",{class:"h-main-half"},null,-1)),m(s,{breadcrumbs:e.mainContent.breadcrumbs},null,8,["breadcrumbs"]),m(o,{flags:e.mainContent.flags},null,8,["flags"]),m(c,{description:e.mainContent.description,class:"text-main!"},null,8,["description"]),e.mainContent.type==="topic"||e.mainContent.type==="page"?(a(),b(f,{key:0,mode:"single",elementSnippets:e.mainContent.snippets},null,8,["elementSnippets"])):u("",!0),m(p,{mode:"single",connections:e.mainContent.connections},null,8,["connections"]),m(d,{mode:"single",stats:e.mainContent.stats},null,8,["stats"]),i[1]||(i[1]=r("div",{class:"h-main-half"},null,-1))])}}}),at=Object.assign(nt,{__name:"MainStickyHeaderPreamble"}),ot={ref:"hider",class:"pointer-events-none absolute top-0 left-0 h-full w-full touch-none"},st={key:0,ref:"expander",style:{height:"0px"},class:"overflow-hidden transition-[height]"},rt={ref:"expanderContent"},lt={key:0,class:"text-main nice-scrollbars max-h-[70dvh] overflow-auto"},it=k({__name:"MainStickyHeader",props:{mainContent:{}},setup(e){const n=P(()=>{const g=e.mainContent.breadcrumbs.length>0,w=!!e.mainContent.description,D=!!e.mainContent.flags,O=!!e.mainContent.connections;let F=!1;return(e.mainContent.type==="topic"||e.mainContent.type==="page")&&(F=e.mainContent.snippets?.some(X=>!!X.quick)??!1),g||w||D||O||F}),i=j(!1),s=j(!1),o=J(),c=j(!0),f=P(()=>o.value&&!c.value),p=W();z(()=>[p.path,p.hash],()=>{s.value=!1});const{previewState:d,closePreview:_}=ee();z(()=>d.value.opened,g=>{g&&(s.value=!1)});function M(){i.value=!0,s.value=!s.value,_()}const v=B("hider"),C=B("expander"),h=B("expanderContent");return K(()=>{function g(){!C.value||!h.value||(s.value?C.value.style.height=`${h.value.offsetHeight}px`:C.value.style.height="0px")}const w=new ResizeObserver(g);A(()=>{w.disconnect(),!(!C.value||!h.value)&&w.observe(h.value)}),z(s,g);const D=new IntersectionObserver(([O])=>{c.value=O?.isIntersecting??!1});A(()=>{D.disconnect(),v.value&&D.observe(v.value)})}),(g,w)=>{const D=at,O=E,F=_e;return a(),l("div",null,[r("div",ot,null,512),(a(),b(ne,{to:"#teleports"},[r("div",{class:$([`fixed-main bg-bg-aside from-brand/8 dark:from-brand/10 to-bg-aside
          micro:text-main border-brand/10 top-0 z-5 rounded-b-[25px] border
          border-t-0 bg-linear-to-t text-[.8em]
          transition-[translate,width,left]`,t(f)?"translate-y-0":"-translate-y-full"])},[t(n)?(a(),l("div",st,[r("div",rt,[t(i)?(a(),l("div",lt,[(a(),b(te,null,{default:S(()=>[m(D,{mainContent:e.mainContent},null,8,["mainContent"])]),_:1}))])):u("",!0)],512)],512)):u("",!0),r("div",{class:$([`text-main relative overflow-clip rounded-b-[25px]
            transition-[box-shadow]`,t(f)?"shadow-[0px_5px_15px_0px_light-dark(rgba(0,0,0,0.1),rgba(255,255,255,0.05))]":"shadow-transparent"])},[w[0]||(w[0]=r("div",{class:"absolute top-0 left-0 h-full w-full"},null,-1)),w[1]||(w[1]=r("div",{class:"from-brand/10 dark:from-brand/5 absolute top-0 left-0 h-full w-full bg-linear-to-t to-transparent"},null,-1)),r("div",{onClick:M,class:$([`py-normal gap-small micro:gap-normal group px-small
              micro:px-normal border-brand/20 dark:border-brand/10 relative flex
              items-center justify-center border-t bg-transparent
              transition-[background]`,t(n)&&"hocus:bg-brand/8 cursor-pointer"])},[m(O,{name:("ICONS"in g?g.ICONS:t(R))[e.mainContent.type],class:"shrink-0 text-[1.2em] text-[color-mix(in_srgb,var(--color-brand),var(--color-text)_70%)]"},null,8,["name"]),m(F,{text:e.mainContent.title,class:"text-center text-[1.1em]"},null,8,["text"]),t(n)?(a(),b(O,{key:0,name:t(s)?"plus":"bookmark-star",class:$([`group-hocus:opacity-100 shrink-0 text-[1.2em]
                text-[color-mix(in_srgb,var(--color-brand),var(--color-text)_50%)]
                opacity-40 transition-opacity`,t(s)&&"rotate-45"])},null,8,["name","class"])):u("",!0)],2)],2)],2)]))])}}}),gt=Object.assign(it,{__name:"MainStickyHeader"}),ct={key:0,class:"px-main py-main"},dt={class:"relative max-h-[300px] overflow-hidden"},mt=k({__name:"AdsBannerBottom",setup(e){const n=j();return K(()=>{n.value=ae.config.ads.bottom}),(i,s)=>{const o=oe;return t(n)?(a(),l("section",ct,[r("div",dt,[m(o,{data:t(n)},null,8,["data"])])])):u("",!0)}}}),yt=Object.assign(mt,{__name:"AdsBannerBottom"});async function Ct(e){const n=se(),i="main-content",s=n.static.data[i]||=n.payload.data[i]||={};return(async()=>(s.contentPath!==e&&(s.contentPath=e,s.mainContent=await $fetch("/api/main/content/"+e,{responseType:"json"})),s.mainContent))()}export{ht as _,De as a,tt as b,gt as c,yt as d,Ct as u};
