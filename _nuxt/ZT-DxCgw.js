const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.DAabZkYo.css"])))=>i.map(i=>d[i]);
import{W as N,bm as q,Y as s,au as C,bn as z,Z as F,aJ as K,aW as f,aq as P,N as m,a0 as $,S as U,P as J,O as A,R as Y,ac as _,ad as Z,a4 as j,at as G,_ as Q}from"./Du3Wvoik.js";import{u as X}from"./CBwmghQ3.js";import{u as ee}from"./BL9_poU1.js";import{_ as te}from"./BozMPwT5.js";import{B as ae}from"./BSEBvKzf.js";/* empty css        */import"./DV0FzFYP.js";import"./tKM8BPJ_.js";import"./C5uj1jvb.js";import"./BokzypnP.js";import"./tBfX1gVd.js";import"./B3LqoS7A.js";import"./D5fLQY3u.js";const ne={ref:"diagram"},ie={key:0,class:"p-normal text-center"},se=["innerHTML"],oe=N({__name:"Diagram",props:{element:{}},setup(o){let h=s();const L=q(),{EruditIcon:M,loadingSvg:R}=ee(),u=s(!0),p=s(!1),n=s(o.element.children[0].data),y=s(""),w=C("diagram"),b=C("diagramSvg"),T=z(),x=G(),{lightbox:k,initLightbox:I}=X(),r={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};let i;F(async()=>{const e=navigator.userAgent;h.value=/AppleWebKit/.test(e)&&!/Chrome/.test(e)||/\b(iPad|iPhone|iPod)\b/.test(e),O(n.value)&&await V(),i=new IntersectionObserver(B,{root:null,threshold:.01}),i.observe(w.value)}),K(()=>{i&&i.disconnect()});function D(){if(!k.value){const e=b.value.querySelector("svg"),t=e.cloneNode(!0);t.removeAttribute("width"),t.removeAttribute("style"),t.classList.add(L.diagram);let a=t;const l=w.value.closest("[data-prose-accent]");if(l){const d=document.createElement("div");d.setAttribute("data-prose-accent","");const E=getComputedStyle(l);for(const v of E)if(v.startsWith("--accent")){const S=E.getPropertyValue(v).trim();S&&d.style.setProperty(v,S)}d.appendChild(t),a=d}const c=Math.min(1e3,.9*window.innerWidth),W=e.clientHeight/e.clientWidth,g=`
            <div class="pswp__img-overlay-wrapper" style="position: relative">
                <div class="pswp__img" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>
                ${a.outerHTML}
            </div>
        `;I({dataSource:[{html:g,width:c,height:c*W}]},x.value)}k.value.loadAndOpen(0)}function O(e){return r.display.test(e)||r.inline.test(e)}async function V(){await f(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const e=await f(()=>import("./BHFlmF0k.js"),[],import.meta.url),t=(a,l,c)=>a.replace(l,(W,g)=>e.renderToString(g,{displayMode:c,output:"mathml"}).replace(/<mtd>/g,'<mtd style="padding: 0.2em 0;">').replace(/<annotation encoding="application\/x-tex">[\s\S]*?<\/annotation>/g,""));n.value=t(n.value,r.display,!0),n.value=t(n.value,r.inline,!1),await P(),await new Promise(requestAnimationFrame)}async function B(e){if(!e.some(a=>a.isIntersecting)||!u.value||p.value)return;p.value=!0,await H(),p.value=!1,u.value=!1,i.disconnect(),await P();const t=b.value?.querySelector("svg");t&&t.addEventListener("click",D)}async function H(){const e=(await f(async()=>{const{default:a}=await import("https://cdn.jsdelivr.net/npm/mermaid@11.12.2/+esm");return{default:a}},[],import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"});const{svg:t}=await e.render(T,n.value);y.value=t}return(e,t)=>(m(),$(ae,{element:o.element},{default:U(()=>[J("div",ne,[u.value?(m(),A("div",ie,[Y(_(M),{name:_(R),class:"text-text-dimmed inline text-[60px]"},null,8,["name"])])):(m(),A("div",{key:1,ref:"diagramSvg",innerHTML:y.value,class:Z([_(h)?"":e.$style.notWebkit,e.$style.diagram])},null,10,se))],512),o.element.children[1]?(m(),$(te,{key:0,caption:o.element.children[1],onCaptionMounted:t[0]||(t[0]=a=>x.value=a)},null,8,["caption"])):j("",!0)]),_:1},8,["element"]))}}),re="_notWebkit_1st60_5",le="_diagram_1st60_5",ce={notWebkit:re,diagram:le},de={$style:ce},We=Q(oe,[["__cssModules",de]]);export{We as default};
