(function(){"use strict";var y;function P(t,e,i){const s=typeof i,n=typeof t;if(s!=="undefined"){if(n!=="undefined"){if(i){if(n==="function"&&s===n)return function(l){return t(i(l))};if(e=t.constructor,e===i.constructor){if(e===Array)return i.concat(t);if(e===Map){var r=new Map(i);for(var h of t)r.set(h[0],h[1]);return r}if(e===Set){h=new Set(i);for(r of t.values())h.add(r);return h}}}return t}return i}return n==="undefined"?e:t}function E(t,e){return typeof t>"u"?e:t}function O(){return Object.create(null)}function N(t){return typeof t=="string"}function rt(t){return typeof t=="object"}function ht(t,e){if(N(e))t=t[e];else for(let i=0;t&&i<e.length;i++)t=t[e[i]];return t}const ye=/[^\p{L}\p{N}]+/u,xe=/(\d{3})/g,ke=/(\D)(\d{3})/g,ve=/(\d{3})(\D)/g,Qt=/[\u0300-\u036f]/g;function q(t={}){if(!this||this.constructor!==q)return new q(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}y=q.prototype,y.assign=function(t){this.normalize=P(t.normalize,!0,this.normalize);let e=t.include,i=e||t.exclude||t.split,s;if(i||i===""){if(typeof i=="object"&&i.constructor!==RegExp){let n="";s=!e,e||(n+="\\p{Z}"),i.letter&&(n+="\\p{L}"),i.number&&(n+="\\p{N}",s=!!e),i.symbol&&(n+="\\p{S}"),i.punctuation&&(n+="\\p{P}"),i.control&&(n+="\\p{C}"),(i=i.char)&&(n+=typeof i=="object"?i.join(""):i);try{this.split=new RegExp("["+(e?"^":"")+n+"]+","u")}catch{this.split=/\s+/}}else this.split=i,s=i===!1||"a1a".split(i).length<2;this.numeric=P(t.numeric,s)}else{try{this.split=P(this.split,ye)}catch{this.split=/\s+/}this.numeric=P(t.numeric,P(this.numeric,!0))}if(this.prepare=P(t.prepare,null,this.prepare),this.finalize=P(t.finalize,null,this.finalize),i=t.filter,this.filter=typeof i=="function"?i:P(i&&new Set(i),null,this.filter),this.dedupe=P(t.dedupe,!0,this.dedupe),this.matcher=P((i=t.matcher)&&new Map(i),null,this.matcher),this.mapper=P((i=t.mapper)&&new Map(i),null,this.mapper),this.stemmer=P((i=t.stemmer)&&new Map(i),null,this.stemmer),this.replacer=P(t.replacer,null,this.replacer),this.minlength=P(t.minlength,1,this.minlength),this.maxlength=P(t.maxlength,1024,this.maxlength),this.rtl=P(t.rtl,!1,this.rtl),(this.cache=i=P(t.cache,!0,this.cache))&&(this.F=null,this.L=typeof i=="number"?i:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const n of this.matcher.keys())this.h+=(this.h?"|":"")+n;if(this.stemmer)for(const n of this.stemmer.keys())this.A+=(this.A?"|":"")+n;return this},y.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&Y(this),this},y.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&Y(this),this},y.addMapper=function(t,e){return typeof t=="object"?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&Y(this),this)},y.addMatcher=function(t,e){return typeof t=="object"?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&Y(this),this)},y.addReplacer=function(t,e){return typeof t=="string"?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&Y(this),this)},y.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(Y,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=Qt?t.normalize("NFKD").replace(Qt,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(ke,"$1 $2").replace(ve,"$1 $2").replace(xe,"$1 "));const i=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let s=[],n=O(),r,h,l=this.split||this.split===""?t.split(this.split):[t];for(let f=0,u,g;f<l.length;f++)if((u=g=l[f])&&!(u.length<this.minlength||u.length>this.maxlength)){if(e){if(n[u])continue;n[u]=1}else{if(r===u)continue;r=u}if(i)s.push(u);else if(!this.filter||(typeof this.filter=="function"?this.filter(u):!this.filter.has(u))){if(this.cache&&u.length<=this.I)if(this.F){var o=this.D.get(u);if(o||o===""){o&&s.push(o);continue}}else this.F=setTimeout(Y,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let m;for(;m!==u&&u.length>2;)m=u,u=u.replace(this.K,a=>this.stemmer.get(a))}if(u&&(this.mapper||this.dedupe&&u.length>1)){o="";for(let m=0,a="",d,c;m<u.length;m++)d=u.charAt(m),d===a&&this.dedupe||((c=this.mapper&&this.mapper.get(d))||c===""?c===a&&this.dedupe||!(a=c)||(o+=c):o+=a=d);u=o}if(this.matcher&&u.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),u=u.replace(this.J,m=>this.matcher.get(m))),u&&this.replacer)for(o=0;u&&o<this.replacer.length;o+=2)u=u.replace(this.replacer[o],this.replacer[o+1]);if(this.cache&&g.length<=this.I&&(this.D.set(g,u),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),u){if(u!==g)if(e){if(n[u])continue;n[u]=1}else{if(h===u)continue;h=u}s.push(u)}}}return this.finalize&&(s=this.finalize(s)||s),this.cache&&t.length<=this.H&&(this.B.set(t,s),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),s};function Y(t){t.F=null,t.B.clear(),t.D.clear()}function Bt(t,e,i){i||(e||typeof t!="object"?typeof e=="object"&&(i=e,e=0):i=t),i&&(t=i.query||t,e=i.limit||e);let s=""+(e||0);i&&(s+=(i.offset||0)+!!i.context+!!i.suggest+(i.resolve!==!1)+(i.resolution||this.resolution)+(i.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new L);let n=this.cache.get(t+s);if(!n){const r=i&&i.cache;r&&(i.cache=!1),n=this.search(t,e,i),r&&(i.cache=r),this.cache.set(t+s,n)}return n}function L(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}L.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},L.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},L.prototype.remove=function(t){for(const e of this.cache){const i=e[0];e[1].includes(t)&&this.cache.delete(i)}},L.prototype.clear=function(){this.cache.clear(),this.h=""};const Vt={normalize:!1,numeric:!1,dedupe:!1},gt={},zt=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Xt=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Yt=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Lt={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6};var Ft={Exact:Vt,Default:gt,Normalize:gt,LatinBalance:{mapper:zt},LatinAdvanced:{mapper:zt,matcher:Xt,replacer:Yt},LatinExtra:{mapper:zt,replacer:Yt.concat([/(?!^)[aeo]/g,""]),matcher:Xt},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let i=0;i<t.length;i++){var e=t[i];let s=e.charAt(0),n=Lt[s];for(let r=1,h;r<e.length&&(h=e.charAt(r),h==="h"||h==="w"||!(h=Lt[h])||h===n||(s+=h,n=h,s.length!==4));r++);t[i]=s}}},CJK:{split:""},LatinExact:Vt,LatinDefault:gt,LatinSimple:gt};function Ut(t,e,i,s){let n=[];for(let r=0,h;r<t.index.length;r++)if(h=t.index[r],e>=h.length)e-=h.length;else{e=h[s?"splice":"slice"](e,i);const l=e.length;if(l&&(n=n.length?n.concat(e):e,i-=l,s&&(t.length-=l),!i))break;e=0}return n}function tt(t){if(!this||this.constructor!==tt)return new tt(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get(i,s){if(s==="length")return e.length;if(s==="push")return function(n){e.index[e.index.length-1].push(n),e.length++};if(s==="pop")return function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()};if(s==="indexOf")return function(n){let r=0;for(let h=0,l,o;h<e.index.length;h++){if(l=e.index[h],o=l.indexOf(n),o>=0)return r+o;r+=l.length}return-1};if(s==="includes")return function(n){for(let r=0;r<e.index.length;r++)if(e.index[r].includes(n))return!0;return!1};if(s==="slice")return function(n,r){return Ut(e,n||0,r||e.length,!1)};if(s==="splice")return function(n,r){return Ut(e,n||0,r||e.length,!0)};if(s==="constructor")return Array;if(typeof s!="symbol")return(i=e.index[s/2**31|0])&&i[s]},set(i,s,n){return i=s/2**31|0,(e.index[i]||(e.index[i]=[]))[s]=n,e.length++,!0}})}tt.prototype.clear=function(){this.index.length=0},tt.prototype.push=function(){};function H(t=8){if(!this||this.constructor!==H)return new H(t);this.index=O(),this.h=[],this.size=0,t>32?(this.B=Et,this.A=BigInt(t)):(this.B=Gt,this.A=t)}H.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},H.prototype.set=function(t,e){var i=this.B(t);let s=this.index[i];s?(i=s.size,s.set(t,e),(i-=s.size)&&this.size++):(this.index[i]=s=new Map([[t,e]]),this.h.push(s),this.size++)};function J(t=8){if(!this||this.constructor!==J)return new J(t);this.index=O(),this.h=[],this.size=0,t>32?(this.B=Et,this.A=BigInt(t)):(this.B=Gt,this.A=t)}J.prototype.add=function(t){var e=this.B(t);let i=this.index[e];i?(e=i.size,i.add(t),(e-=i.size)&&this.size++):(this.index[e]=i=new Set([t]),this.h.push(i),this.size++)},y=H.prototype,y.has=J.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},y.delete=J.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},y.clear=J.prototype.clear=function(){this.index=O(),this.h=[],this.size=0},y.values=J.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},y.keys=J.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},y.entries=J.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};function Gt(t){let e=2**this.A-1;if(typeof t=="number")return t&e;let i=0,s=this.A+1;for(let n=0;n<t.length;n++)i=(i*s^t.charCodeAt(n))&e;return this.A===32?i+2**31:i}function Et(t){let e=BigInt(2)**this.A-BigInt(1);var i=typeof t;if(i==="bigint")return t&e;if(i==="number")return BigInt(t)&e;i=BigInt(0);let s=this.A+BigInt(1);for(let n=0;n<t.length;n++)i=(i*s^BigInt(t.charCodeAt(n)))&e;return i}let et,ot;async function be(t){t=t.data;var e=t.task;const i=t.id;let s=t.args;if(e==="init")ot=t.options||{},(e=t.factory)?(Function("return "+e)()(self),et=new self.FlexSearch.Index(ot),delete self.FlexSearch):et=new W(ot),postMessage({id:i});else{let n;e==="export"&&(s[1]?(s[0]=ot.export,s[2]=0,s[3]=1):s=null),e==="import"?s[0]&&(t=await ot.import.call(et,s[0]),et.import(s[0],t)):((n=s&&et[e].apply(et,s))&&n.then&&(n=await n),n&&n.await&&(n=await n.await),e==="search"&&n.result&&(n=n.result)),postMessage(e==="search"?{id:i,msg:n}:{id:i})}}function _t(t){it.call(t,"add"),it.call(t,"append"),it.call(t,"search"),it.call(t,"update"),it.call(t,"remove"),it.call(t,"searchCache")}let At,qt,pt;function Me(){At=pt=0}function it(t){this[t+"Async"]=function(){const e=arguments;var i=e[e.length-1];let s;if(typeof i=="function"&&(s=i,delete e[e.length-1]),At?pt||(pt=Date.now()-qt>=this.priority*this.priority*3):(At=setTimeout(Me,0),qt=Date.now()),pt){const r=this;return new Promise(h=>{setTimeout(function(){h(r[t+"Async"].apply(r,e))},0)})}const n=this[t].apply(this,e);return i=n.then?n:new Promise(r=>r(n)),s&&i.then(s),i}}let Q=0;function nt(t={},e){function i(l){function o(f){f=f.data||f;const u=f.id,g=u&&r.h[u];g&&(g(f.msg),delete r.h[u])}if(this.worker=l,this.h=O(),this.worker)return n?this.worker.on("message",o):this.worker.onmessage=o,t.config?new Promise(function(f){Q>1e9&&(Q=0),r.h[++Q]=function(){f(r)},r.worker.postMessage({id:Q,task:"init",factory:s,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:s,options:t}),this)}if(!this||this.constructor!==nt)return new nt(t);let s=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;s&&(s=s.toString());const n=typeof window>"u",r=this,h=je(s,n,t.worker);return h.then?h.then(function(l){return i.call(r,l)}):i.call(this,h)}V("add"),V("append"),V("search"),V("update"),V("remove"),V("clear"),V("export"),V("import"),nt.prototype.searchCache=Bt,_t(nt.prototype);function V(t){nt.prototype[t]=function(){const e=this,i=[].slice.call(arguments);var s=i[i.length-1];let n;return typeof s=="function"&&(n=s,i.pop()),s=new Promise(function(r){t==="export"&&typeof i[0]=="function"&&(i[0]=null),Q>1e9&&(Q=0),e.h[++Q]=r,e.worker.postMessage({task:t,id:Q,args:i})}),n?(s.then(n),this):s}}function je(t,e,i){return e?typeof module<"u"?new(require("worker_threads")).Worker(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return De}).then(function(s){return new s.Worker("undefined/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+be.toString()],{type:"text/javascript"}))):new window.Worker(typeof i=="string"?i:self.location.href.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}F.prototype.add=function(t,e,i){if(rt(t)&&(e=t,t=ht(e,this.key)),e&&(t||t===0)){if(!i&&this.reg.has(t))return this.update(t,e);for(let l=0,o;l<this.field.length;l++){o=this.B[l];var s=this.index.get(this.field[l]);if(typeof o=="function"){var n=o(e);n&&s.add(t,n,i,!0)}else n=o.G,(!n||n(e))&&(o.constructor===String?o=[""+o]:N(o)&&(o=[o]),Ct(e,o,this.D,0,s,t,o[0],i))}if(this.tag)for(s=0;s<this.A.length;s++){var r=this.A[s];n=this.tag.get(this.F[s]);let l=O();if(typeof r=="function"){if(r=r(e),!r)continue}else{var h=r.G;if(h&&!h(e))continue;r.constructor===String&&(r=""+r),r=ht(e,r)}if(n&&r){N(r)&&(r=[r]);for(let o=0,f,u;o<r.length;o++)if(f=r[o],!l[f]&&(l[f]=1,(h=n.get(f))?u=h:n.set(f,u=[]),!i||!u.includes(t))){if(u.length===2**31-1){if(h=new tt(u),this.fastupdate)for(let g of this.reg.values())g.includes(u)&&(g[g.indexOf(u)]=h);n.set(f,u=h)}u.push(t),this.fastupdate&&((h=this.reg.get(t))?h.push(u):this.reg.set(t,[u]))}}}if(this.store&&(!i||!this.store.has(t))){let l;if(this.h){l=O();for(let o=0,f;o<this.h.length;o++){if(f=this.h[o],(i=f.G)&&!i(e))continue;let u;if(typeof f=="function"){if(u=f(e),!u)continue;f=[f.O]}else if(N(f)||f.constructor===String){l[f]=e[f];continue}Ot(e,l,f,0,f[0],u)}}this.store.set(t,l||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function Ot(t,e,i,s,n,r){if(t=t[n],s===i.length-1)e[n]=r||t;else if(t)if(t.constructor===Array)for(e=e[n]=Array(t.length),n=0;n<t.length;n++)Ot(t,e,i,s,n);else e=e[n]||(e[n]=O()),n=i[++s],Ot(t,e,i,s,n)}function Ct(t,e,i,s,n,r,h,l){if(t=t[h])if(s===e.length-1){if(t.constructor===Array){if(i[s]){for(e=0;e<t.length;e++)n.add(r,t[e],!0,!0);return}t=t.join(" ")}n.add(r,t,l,!0)}else if(t.constructor===Array)for(h=0;h<t.length;h++)Ct(t,e,i,s,n,r,h,l);else h=e[++s],Ct(t,e,i,s,n,r,h,l)}function It(t,e,i,s){if(!t.length)return t;if(t.length===1)return t=t[0],t=i||t.length>e?t.slice(i,i+e):t,s?st.call(this,t):t;let n=[];for(let r=0,h,l;r<t.length;r++)if((h=t[r])&&(l=h.length)){if(i){if(i>=l){i-=l;continue}h=h.slice(i,i+e),l=h.length,i=0}if(l>e&&(h=h.slice(0,e),l=e),!n.length&&l>=e)return s?st.call(this,h):h;if(n.push(h),e-=l,!e)break}return n=n.length>1?[].concat.apply([],n):n[0],s?st.call(this,n):n}function at(t,e,i,s){var n=s[0];if(n[0]&&n[0].query)return t[e].apply(t,n);if(!(e!=="and"&&e!=="not"||t.result.length||t.await||n.suggest))return s.length>1&&(n=s[s.length-1]),(s=n.resolve)?t.await||t.result:t;let r=[],h=0,l=0,o,f,u,g,m;for(e=0;e<s.length;e++)if(n=s[e]){var a=void 0;if(n.constructor===A)a=n.await||n.result;else if(n.then||n.constructor===Array)a=n;else{h=n.limit||0,l=n.offset||0,u=n.suggest,f=n.resolve,o=((g=n.highlight||t.highlight)||n.enrich)&&f,a=n.queue;let d=n.async||a,c=n.index,p=n.query;if(c?t.index||(t.index=c):c=t.index,p||n.tag){const x=n.field||n.pluck;if(x&&(!p||t.query&&!g||(t.query=p,t.field=x,t.highlight=g),c=c.index.get(x)),a&&(m||t.await)){m=1;let w;const b=t.C.length,B=new Promise(function(z){w=z});(function(z,S){B.h=function(){S.index=null,S.resolve=!1;let M=d?z.searchAsync(S):z.search(S);return M.then?M.then(function(k){return t.C[b]=k=k.result||k,w(k),k}):(M=M.result||M,w(M),M)}})(c,Object.assign({},n)),t.C.push(B),r[e]=B;continue}else n.resolve=!1,n.index=null,a=d?c.searchAsync(n):c.search(n),n.resolve=f,n.index=c}else if(n.and)a=dt(n,"and",c);else if(n.or)a=dt(n,"or",c);else if(n.not)a=dt(n,"not",c);else if(n.xor)a=dt(n,"xor",c);else continue}a.await?(m=1,a=a.await):a.then?(m=1,a=a.then(function(d){return d.result||d})):a=a.result||a,r[e]=a}if(m&&!t.await&&(t.await=new Promise(function(d){t.return=d})),m){const d=Promise.all(r).then(function(c){for(let p=0;p<t.C.length;p++)if(t.C[p]===d){t.C[p]=function(){return i.call(t,c,h,l,o,f,u,g)};break}Rt(t)});t.C.push(d)}else if(t.await)t.C.push(function(){return i.call(t,r,h,l,o,f,u,g)});else return i.call(t,r,h,l,o,f,u,g);return f?t.await||t.result:t}function dt(t,e,i){t=t[e];const s=t[0]||t;return s.index||(s.index=i),i=new A(s),t.length>1&&(i=i[e].apply(i,t.slice(1))),i}A.prototype.or=function(){return at(this,"or",Se,arguments)};function Se(t,e,i,s,n,r,h){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=te(t,e,i,!1,this.h),i=0)),n&&(this.await=null),n?this.resolve(e,i,s,h):this}A.prototype.and=function(){return at(this,"and",Be,arguments)};function Be(t,e,i,s,n,r,h){if(!r&&!this.result.length)return n?this.result:this;let l;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let o=0;for(let f=0,u,g;f<t.length;f++)if((u=t[f])&&(g=u.length))o<g&&(o=g);else if(!r){o=0;break}o?(this.result=wt(t,o,e,i,r,this.h,n),l=!0):this.result=[]}else r||(this.result=t);return n&&(this.await=null),n?this.resolve(e,i,s,h,l):this}A.prototype.xor=function(){return at(this,"xor",ze,arguments)};function ze(t,e,i,s,n,r,h){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{r=i;var l=this.h;const o=[],f=O();let u=0;for(let g=0,m;g<t.length;g++)if(m=t[g]){u<m.length&&(u=m.length);for(let a=0,d;a<m.length;a++)if(d=m[a])for(let c=0,p;c<d.length;c++)p=d[c],f[p]=f[p]?2:1}for(let g=0,m,a=0;g<u;g++)for(let d=0,c;d<t.length;d++)if((c=t[d])&&(m=c[g])){for(let p=0,x;p<m.length;p++)if(x=m[p],f[x]===1)if(r)r--;else if(n){if(o.push(x),o.length===e){t=o;break t}}else{const w=g+(d?l:0);if(o[w]||(o[w]=[]),o[w].push(x),++a===e){t=o;break t}}}t=o}this.result=t,l=!0}else r||(this.result=t);return n&&(this.await=null),n?this.resolve(e,i,s,h,l):this}A.prototype.not=function(){return at(this,"not",_e,arguments)};function _e(t,e,i,s,n,r,h){if(!r&&!this.result.length)return n?this.result:this;if(t.length&&this.result.length){t:{r=i;var l=[];t=new Set(t.flat().flat());for(let o=0,f,u=0;o<this.result.length;o++)if(f=this.result[o]){for(let g=0,m;g<f.length;g++)if(m=f[g],!t.has(m)){if(r)r--;else if(n){if(l.push(m),l.length===e){t=l;break t}}else if(l[o]||(l[o]=[]),l[o].push(m),++u===e){t=l;break t}}}t=l}this.result=t,l=!0}return n&&(this.await=null),n?this.resolve(e,i,s,h,l):this}function mt(t,e,i,s,n){let r,h,l;typeof n=="string"?(r=n,n=""):r=n.template,h=r.indexOf("$1"),l=r.substring(h+2),h=r.substring(0,h);let o=n&&n.boundary,f=!n||n.clip!==!1,u=n&&n.merge&&l&&h&&new RegExp(l+" "+h,"g");n=n&&n.ellipsis;var g=0;if(typeof n=="object"){var m=n.template;g=m.length-2,n=n.pattern}typeof n!="string"&&(n=n===!1?"":"..."),g&&(n=m.replace("$1",n)),m=n.length-g;let a,d;typeof o=="object"&&(a=o.before,a===0&&(a=-1),d=o.after,d===0&&(d=-1),o=o.total||9e5),g=new Map;for(let Zt=0,G,we,ut;Zt<e.length;Zt++){let ct;if(s)ct=e,ut=s;else{var c=e[Zt];if(ut=c.field,!ut)continue;ct=c.result}we=i.get(ut),G=we.encoder,c=g.get(G),typeof c!="string"&&(c=G.encode(t),g.set(G,c));for(let jt=0;jt<ct.length;jt++){var p=ct[jt].doc;if(!p||(p=ht(p,ut),!p))continue;var x=p.trim().split(/\s+/);if(!x.length)continue;p="";var w=[];let St=[];for(var b=-1,B=-1,z=0,S=0;S<x.length;S++){var M=x[S],k=G.encode(M);k=k.length>1?k.join(" "):k[0];let v;if(k&&M){for(var j=M.length,C=(G.split?M.replace(G.split,""):M).length-k.length,_="",$=0,T=0;T<c.length;T++){var K=c[T];if(K){var R=K.length;R+=C<0?0:C,$&&R<=$||(K=k.indexOf(K),K>-1&&(_=(K?M.substring(0,K):"")+h+M.substring(K,K+R)+l+(K+R<j?M.substring(K+R):""),$=R,v=!0))}}_&&(o&&(b<0&&(b=p.length+(p?1:0)),B=p.length+(p?1:0)+_.length,z+=j,St.push(w.length),w.push({match:_})),p+=(p?" ":"")+_)}if(!v)M=x[S],p+=(p?" ":"")+M,o&&w.push({text:M});else if(o&&z>=o)break}if(z=St.length*(r.length-2),a||d||o&&p.length-z>o)if(z=o+z-m*2,S=B-b,a>0&&(S+=a),d>0&&(S+=d),S<=z)x=a?b-(a>0?a:0):b-((z-S)/2|0),w=d?B+(d>0?d:0):x+z,f||(x>0&&p.charAt(x)!==" "&&p.charAt(x-1)!==" "&&(x=p.indexOf(" ",x),x<0&&(x=0)),w<p.length&&p.charAt(w-1)!==" "&&p.charAt(w)!==" "&&(w=p.lastIndexOf(" ",w),w<B?w=B:++w)),p=(x?n:"")+p.substring(x,w)+(w<p.length?n:"");else{for(B=[],b={},z={},S={},M={},k={},_=C=j=0,T=$=1;;){var Z=void 0;for(let v=0,I;v<St.length;v++){if(I=St[v],_)if(C!==_){if(S[v+1])continue;if(I+=_,b[I]){j-=m,z[v+1]=1,S[v+1]=1;continue}if(I>=w.length-1){if(I>=w.length){S[v+1]=1,I>=x.length&&(z[v+1]=1);continue}j-=m}if(p=w[I].text,R=d&&k[v])if(R>0){if(p.length>R)if(S[v+1]=1,f)p=p.substring(0,R);else continue;(R-=p.length)||(R=-1),k[v]=R}else{S[v+1]=1;continue}if(j+p.length+1<=o)p=" "+p,B[v]+=p;else if(f)Z=o-j-1,Z>0&&(p=" "+p.substring(0,Z),B[v]+=p),S[v+1]=1;else{S[v+1]=1;continue}}else{if(S[v])continue;if(I-=C,b[I]){j-=m,S[v]=1,z[v]=1;continue}if(I<=0){if(I<0){S[v]=1,z[v]=1;continue}j-=m}if(p=w[I].text,R=a&&M[v])if(R>0){if(p.length>R)if(S[v]=1,f)p=p.substring(p.length-R);else continue;(R-=p.length)||(R=-1),M[v]=R}else{S[v]=1;continue}if(j+p.length+1<=o)p+=" ",B[v]=p+B[v];else if(f)Z=p.length+1-(o-j),Z>=0&&Z<p.length&&(p=p.substring(Z)+" ",B[v]=p+B[v]),S[v]=1;else{S[v]=1;continue}}else{p=w[I].match,a&&(M[v]=a),d&&(k[v]=d),v&&j++;let Dt;if(I?!v&&m&&(j+=m):(z[v]=1,S[v]=1),I>=x.length-1||I<w.length-1&&w[I+1].match?Dt=1:m&&(j+=m),j-=r.length-2,!v||j+p.length<=o)B[v]=p;else{Z=$=T=z[v]=0;break}Dt&&(z[v+1]=1,S[v+1]=1)}j+=p.length,Z=b[I]=1}if(Z)C===_?_++:C++;else{if(C===_?$=0:T=0,!$&&!T)break;$?(C++,_=C):_++}}p="";for(let v=0,I;v<B.length;v++)I=(z[v]?v?" ":"":(v&&!n?" ":"")+n)+B[v],p+=I;n&&!z[B.length]&&(p+=n)}u&&(p=p.replace(u," ")),ct[jt].highlight=p}if(s)break}return e}function A(t,e){if(!this||this.constructor!==A)return new A(t,e);let i=0,s,n,r,h,l,o;if(t&&t.index){const f=t;if(e=f.index,i=f.boost||0,n=f.query){r=f.field||f.pluck,h=f.highlight;const u=f.resolve;t=f.async||f.queue,f.resolve=!1,f.index=null,t=t?e.searchAsync(f):e.search(f),f.resolve=u,f.index=e,t=t.result||t}else t=[]}if(t&&t.then){const f=this;t=t.then(function(u){f.C[0]=f.result=u.result||u,Rt(f)}),s=[t],t=[],l=new Promise(function(u){o=u})}this.index=e||null,this.result=t||[],this.h=i,this.C=s||[],this.await=l||null,this.return=o||null,this.highlight=h||null,this.query=n||"",this.field=r||""}y=A.prototype,y.limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let i=0,s;i<this.result.length;i++)if(s=this.result[i])if(s.length<=t){if(e[i]=s,t-=s.length,!t)break}else{e[i]=s.slice(0,t);break}this.result=e}return this},y.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let i=0,s;i<this.result.length;i++)(s=this.result[i])&&(s.length<=t?t-=s.length:(e[i]=s.slice(t),t=0));this.result=e}return this},y.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this};function Rt(t,e){let i=t.result;var s=t.await;t.await=null;for(let n=0,r;n<t.C.length;n++)if(r=t.C[n]){if(typeof r=="function")i=r(),t.C[n]=i=i.result||i,n--;else if(r.h)i=r.h(),t.C[n]=i=i.result||i,n--;else if(r.then)return t.await=s}return s=t.return,t.C=[],t.return=null,e||s(i),i}y.resolve=function(t,e,i,s,n){let r=this.await?Rt(this,!0):this.result;if(r.then){const h=this;return r.then(function(){return h.resolve(t,e,i,s,n)})}return r.length&&(typeof t=="object"?(s=t.highlight||this.highlight,i=!!s||t.enrich,e=t.offset,t=t.limit):(s=s||this.highlight,i=!!s||i),r=n?i?st.call(this.index,r):r:It.call(this.index,r,t||100,e,i)),this.finalize(r,s)},y.finalize=function(t,e){if(t.then){const s=this;return t.then(function(n){return s.finalize(n,e)})}e&&t.length&&this.query&&(t=mt(this.query,t,this.index.index,this.field,e));const i=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",i&&i(t),t};function wt(t,e,i,s,n,r,h){const l=t.length;let o=[],f,u;f=O();for(let g=0,m,a,d,c;g<e;g++)for(let p=0;p<l;p++)if(d=t[p],g<d.length&&(m=d[g]))for(let x=0;x<m.length;x++){if(a=m[x],(u=f[a])?f[a]++:(u=0,f[a]=1),c=o[u]||(o[u]=[]),!h){let w=g+(p||!n?0:r||0);c=c[w]||(c[w]=[])}if(c.push(a),h&&i&&u===l-1&&c.length-s===i)return s?c.slice(s):c}if(t=o.length)if(n)o=o.length>1?te(o,i,s,h,r):(o=o[0])&&i&&o.length>i||s?o.slice(s,i+s):o;else{if(t<l)return[];if(o=o[t-1],i||s)if(h)(o.length>i||s)&&(o=o.slice(s,i+s));else{n=[];for(let g=0,m;g<o.length;g++)if(m=o[g]){if(s&&m.length>s)s-=m.length;else if((i&&m.length>i||s)&&(m=m.slice(s,i+s),i-=m.length,s&&(s-=m.length)),n.push(m),!i)break}o=n}}return o}function te(t,e,i,s,n){const r=[],h=O();let l;var o=t.length;let f;if(s){for(n=o-1;n>=0;n--)if(f=(s=t[n])&&s.length){for(o=0;o<f;o++)if(l=s[o],!h[l]){if(h[l]=1,i)i--;else if(r.push(l),r.length===e)return r}}}else for(let u=o-1,g,m=0;u>=0;u--){g=t[u];for(let a=0;a<g.length;a++)if(f=(s=g[a])&&s.length){for(let d=0;d<f;d++)if(l=s[d],!h[l])if(h[l]=1,i)i--;else{let c=(a+(u<o-1&&n||0))/(u+1)|0;if((r[c]||(r[c]=[])).push(l),++m===e)return r}}}return r}function Ae(t,e,i,s,n){const r=O(),h=[];for(let l=0,o;l<e.length;l++){o=e[l];for(let f=0;f<o.length;f++)r[o[f]]=1}if(n){for(let l=0,o;l<t.length;l++)if(o=t[l],r[o]){if(s)s--;else if(h.push(o),r[o]=0,i&&--i===0)break}}else for(let l=0,o,f;l<t.result.length;l++)for(o=t.result[l],e=0;e<o.length;e++)f=o[e],r[f]&&((h[l]||(h[l]=[])).push(f),r[f]=0);return h}F.prototype.search=function(t,e,i,s){i||(!e&&rt(t)?(i=t,t=""):rt(e)&&(i=e,e=0));let n=[];var r=[];let h,l,o,f,u,g,m=0,a=!0,d;if(i){i.constructor===Array&&(i={index:i}),t=i.query||t,h=i.pluck,l=i.merge,f=i.boost,g=h||i.field||(g=i.index)&&(g.index?null:g);var c=this.tag&&i.tag;o=i.suggest,a=i.resolve!==!1,u=i.cache,d=a&&this.store&&i.highlight;var p=!!d||a&&this.store&&i.enrich;e=i.limit||e;var x=i.offset||0;if(e||(e=a?100:0),c&&(!this.db||!s)){c.constructor!==Array&&(c=[c]);var w=[];for(let M=0,k;M<c.length;M++)if(k=c[M],k.field&&k.tag){var b=k.tag;if(b.constructor===Array)for(var B=0;B<b.length;B++)w.push(k.field,b[B]);else w.push(k.field,b)}else{b=Object.keys(k);for(let j=0,C,_;j<b.length;j++)if(C=b[j],_=k[C],_.constructor===Array)for(B=0;B<_.length;B++)w.push(C,_[B]);else w.push(C,_)}if(c=w,!t){if(r=[],w.length)for(c=0;c<w.length;c+=2){if(this.db){if(s=this.index.get(w[c]),!s)continue;r.push(s=s.db.tag(w[c+1],e,x,p))}else s=Oe.call(this,w[c],w[c+1],e,x,p);n.push(a?{field:w[c],tag:w[c+1],result:s}:[s])}if(r.length){const M=this;return Promise.all(r).then(function(k){for(let j=0;j<k.length;j++)a?n[j].result=k[j]:n[j]=k[j];return a?n:new A(n.length>1?wt(n,1,0,0,o,f):n[0],M)})}return a?n:new A(n.length>1?wt(n,1,0,0,o,f):n[0],this)}}a||h||!(g=g||this.field)||(N(g)?h=g:(g.constructor===Array&&g.length===1&&(g=g[0]),h=g.field||g.index)),g&&g.constructor!==Array&&(g=[g])}g||(g=this.field);let z;w=(this.worker||this.db)&&!s&&[];for(let M=0,k,j,C;M<g.length;M++){if(j=g[M],this.db&&this.tag&&!this.B[M])continue;let _;if(N(j)||(_=j,j=_.field,t=_.query||t,e=E(_.limit,e),x=E(_.offset,x),o=E(_.suggest,o),d=a&&this.store&&E(_.highlight,d),p=!!d||a&&this.store&&E(_.enrich,p),u=E(_.cache,u)),s)k=s[M];else{b=_||i||{},B=b.enrich;var S=this.index.get(j);if(c&&(this.db&&(b.tag=c,b.field=g,z=S.db.support_tag_search),!z&&B&&(b.enrich=!1),z||(b.limit=0,b.offset=0)),k=u?S.searchCache(t,c&&!z?0:e,b):S.search(t,c&&!z?0:e,b),c&&!z&&(b.limit=e,b.offset=x),B&&(b.enrich=B),w){w[M]=k;continue}}if(C=(k=k.result||k)&&k.length,c&&C){if(b=[],B=0,this.db&&s){if(!z)for(S=g.length;S<s.length;S++){let $=s[S];if($&&$.length)B++,b.push($);else if(!o)return a?n:new A(n,this)}}else for(let $=0,T,K;$<c.length;$+=2){if(T=this.tag.get(c[$]),!T){if(o)continue;return a?n:new A(n,this)}if(K=(T=T&&T.get(c[$+1]))&&T.length)B++,b.push(T);else if(!o)return a?n:new A(n,this)}if(B){if(k=Ae(k,b,e,x,a),C=k.length,!C&&!o)return a?k:new A(k,this);B--}}if(C)r[m]=j,n.push(k),m++;else if(g.length===1)return a?n:new A(n,this)}if(w){if(this.db&&c&&c.length&&!z)for(p=0;p<c.length;p+=2){if(r=this.index.get(c[p]),!r){if(o)continue;return a?n:new A(n,this)}w.push(r.db.tag(c[p+1],e,x,!1))}const M=this;return Promise.all(w).then(function(k){return i&&(i.resolve=a),k.length&&(k=M.search(t,e,i,k)),k})}if(!m)return a?n:new A(n,this);if(h&&(!p||!this.store))return n=n[0],a?n:new A(n,this);for(w=[],x=0;x<r.length;x++){if(c=n[x],p&&c.length&&typeof c[0].doc>"u"&&(this.db?w.push(c=this.index.get(this.field[0]).db.enrich(c)):c=st.call(this,c)),h)return a?d?mt(t,c,this.index,h,d):c:new A(c,this);n[x]={field:r[x],result:c}}if(p&&this.db&&w.length){const M=this;return Promise.all(w).then(function(k){for(let j=0;j<k.length;j++)n[j].result=k[j];return d&&(n=mt(t,n,M.index,h,d)),l?ee(n):n})}return d&&(n=mt(t,n,this.index,h,d)),l?ee(n):n};function ee(t){const e=[],i=O(),s=O();for(let n=0,r,h,l,o,f,u,g;n<t.length;n++){r=t[n],h=r.field,l=r.result;for(let m=0;m<l.length;m++)f=l[m],typeof f!="object"?f={id:o=f}:o=f.id,(u=i[o])?u.push(h):(f.field=i[o]=[h],e.push(f)),(g=f.highlight)&&(u=s[o],u||(s[o]=u={},f.highlight=u),u[h]=g)}return e}function Oe(t,e,i,s,n){return t=this.tag.get(t),t?(t=t.get(e),t?(e=t.length-s,e>0&&((i&&e>i||s)&&(t=t.slice(s,s+i)),n&&(t=st.call(this,t))),t):[]):[]}function st(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let i=0,s;i<t.length;i++)s=t[i],e[i]={id:s,doc:this.store.get(s)};return e}function F(t){if(!this||this.constructor!==F)return new F(t);const e=t.document||t.doc||t;let i,s;if(this.B=[],this.field=[],this.D=[],this.key=(i=e.key||e.id)&&yt(i,this.D)||"id",(s=t.keystore||0)&&(this.keystore=s),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?s?new J(s):new Set:s?new H(s):new Map,this.h=(i=e.store||null)&&i&&i!==!0&&[],this.store=i?s?new H(s):new Map:null,this.cache=(i=t.cache||null)&&new L(i),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=Ce.call(this,t,e),this.tag=null,(i=e.tag)&&(typeof i=="string"&&(i=[i]),i.length)){this.tag=new Map,this.A=[],this.F=[];for(let n=0,r,h;n<i.length;n++){if(r=i[n],h=r.field||r,!h)throw Error("The tag field from the document descriptor is undefined.");r.custom?this.A[n]=r.custom:(this.A[n]=yt(h,this.D),r.filter&&(typeof this.A[n]=="string"&&(this.A[n]=new String(this.A[n])),this.A[n].G=r.filter)),this.F[n]=h,this.tag.set(h,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const n of this.index.values())n.then&&t.push(n);if(t.length){const n=this;return Promise.all(t).then(function(r){let h=0;for(const l of n.index.entries()){const o=l[0];let f=l[1];f.then&&(f=r[h],n.index.set(o,f),h++)}return n})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}y=F.prototype,y.mount=function(t){let e=this.field;if(this.tag)for(let r=0,h;r<this.F.length;r++){h=this.F[r];var i=void 0;this.index.set(h,i=new W({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(h),i.tag=this.tag.get(h)}i=[];const s={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r=0,h,l;r<e.length;r++){s.field=l=e[r],h=this.index.get(l);const o=new t.constructor(t.id,s);o.id=t.id,i[r]=o.mount(h),h.document=!0,r?h.bypass=!0:h.store=this.store}const n=this;return this.db=Promise.all(i).then(function(){n.db=!0})},y.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},y.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)};function Ce(t,e){const i=new Map;let s=e.index||e.field||e;N(s)&&(s=[s]);for(let r=0,h,l;r<s.length;r++){if(h=s[r],N(h)||(l=h,h=h.field),l=rt(l)?Object.assign({},t,l):t,this.worker){var n=void 0;n=(n=l.encoder)&&n.encode?n:new q(typeof n=="string"?Ft[n]:n||{}),n=new nt(l,n),i.set(h,n)}this.worker||i.set(h,new W(l,this.reg)),l.custom?this.B[r]=l.custom:(this.B[r]=yt(h,this.D),l.filter&&(typeof this.B[r]=="string"&&(this.B[r]=new String(this.B[r])),this.B[r].G=l.filter)),this.field[r]=h}if(this.h){t=e.store,N(t)&&(t=[t]);for(let r=0,h,l;r<t.length;r++)h=t[r],l=h.field||h,h.custom?(this.h[r]=h.custom,h.custom.O=l):(this.h[r]=yt(l,this.D),h.filter&&(typeof this.h[r]=="string"&&(this.h[r]=new String(this.h[r])),this.h[r].G=h.filter))}return i}function yt(t,e){const i=t.split(":");let s=0;for(let n=0;n<i.length;n++)t=i[n],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(e[s]=!0),t&&(i[s++]=t);return s<i.length&&(i.length=s),s>1?i:i[0]}y.append=function(t,e){return this.add(t,e,!0)},y.update=function(t,e){return this.remove(t).add(t,e)},y.remove=function(t){rt(t)&&(t=ht(t,this.key));for(var e of this.index.values())e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let i of this.tag.values())for(let s of i){e=s[0];const n=s[1],r=n.indexOf(t);r>-1&&(n.length>1?n.splice(r,1):i.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},y.clear=function(){const t=[];for(const e of this.index.values()){const i=e.clear();i.then&&t.push(i)}if(this.tag)for(const e of this.tag.values())e.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},y.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},y.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},y.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(e){return e[0]&&e[0].doc||null}):this.store.get(t)||null},y.set=function(t,e){return typeof t=="object"&&(e=t,t=ht(e,this.key)),this.store.set(t,e),this},y.searchCache=Bt,y.export=Ie,y.import=Re,_t(F.prototype);function Pt(t,e=0){let i=[],s=[];e&&(e=25e4/e*5e3|0);for(const n of t.entries())s.push(n),s.length===e&&(i.push(s),s=[]);return s.length&&i.push(s),i}function $t(t,e){e||(e=new Map);for(let i=0,s;i<t.length;i++)s=t[i],e.set(s[0],s[1]);return e}function ie(t,e=0){let i=[],s=[];e&&(e=25e4/e*1e3|0);for(const n of t.entries())s.push([n[0],Pt(n[1])[0]||[]]),s.length===e&&(i.push(s),s=[]);return s.length&&i.push(s),i}function ne(t,e){e||(e=new Map);for(let i=0,s,n;i<t.length;i++)s=t[i],n=e.get(s[0]),e.set(s[0],$t(s[1],n));return e}function se(t){let e=[],i=[];for(const s of t.keys())i.push(s),i.length===25e4&&(e.push(i),i=[]);return i.length&&e.push(i),e}function re(t,e){e||(e=new Set);for(let i=0;i<t.length;i++)e.add(t[i]);return e}function xt(t,e,i,s,n,r,h=0){const l=s&&s.constructor===Array;var o=l?s.shift():s;if(!o)return this.export(t,e,n,r+1);if((o=t((e?e+".":"")+(h+1)+"."+i,JSON.stringify(o)))&&o.then){const f=this;return o.then(function(){return xt.call(f,t,e,i,l?s:null,n,r,h+1)})}return xt.call(this,t,e,i,l?s:null,n,r,h+1)}function Ie(t,e,i=0,s=0){if(i<this.field.length){const h=this.field[i];if((e=this.index.get(h).export(t,h,i,s=1))&&e.then){const l=this;return e.then(function(){return l.export(t,h,i+1)})}return this.export(t,h,i+1)}let n,r;switch(s){case 0:n="reg",r=se(this.reg),e=null;break;case 1:n="tag",r=this.tag&&ie(this.tag,this.reg.size),e=null;break;case 2:n="doc",r=this.store&&Pt(this.store),e=null;break;default:return}return xt.call(this,t,e,n,r||null,i,s)}function Re(t,e){var i=t.split(".");i[i.length-1]==="json"&&i.pop();const s=i.length>2?i[0]:"";if(i=i.length>2?i[2]:i[1],this.worker&&s)return this.index.get(s).import(t);if(e){if(typeof e=="string"&&(e=JSON.parse(e)),s)return this.index.get(s).import(i,e);switch(i){case"reg":this.fastupdate=!1,this.reg=re(e,this.reg);for(let n=0,r;n<this.field.length;n++)r=this.index.get(this.field[n]),r.fastupdate=!1,r.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=ne(e,this.tag);break;case"doc":this.store=$t(e,this.store)}}}function he(t,e){let i="";for(const s of t.entries()){t=s[0];const n=s[1];let r="";for(let h=0,l;h<n.length;h++){l=n[h]||[""];let o="";for(let f=0;f<l.length;f++)o+=(o?",":"")+(e==="string"?'"'+l[f]+'"':l[f]);o="["+o+"]",r+=(r?",":"")+o}r='["'+t+'",['+r+"]]",i+=(i?",":"")+r}return i}W.prototype.remove=function(t,e){const i=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(i){if(this.fastupdate){for(let s=0,n,r;s<i.length;s++)if((n=i[s])&&(r=n.length))if(n[r-1]===t)n.pop();else{const h=n.indexOf(t);h>=0&&n.splice(h,1)}}else lt(this.map,t),this.depth&&lt(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&ue(this)),this.cache&&this.cache.remove(t),this};function lt(t,e){let i=0;var s=typeof e>"u";if(t.constructor===Array){for(let n=0,r,h,l;n<t.length;n++)if((r=t[n])&&r.length){if(s)return 1;if(h=r.indexOf(e),h>=0){if(r.length>1)return r.splice(h,1),1;if(delete t[n],i)return 1;l=1}else{if(l)return 1;i++}}}else for(let n of t.entries())s=n[0],lt(n[1],e)?i++:t.delete(s);return i}const Pe={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};W.prototype.add=function(t,e,i,s){if(e&&(t||t===0)){if(!s&&!i&&this.reg.has(t))return this.update(t,e);s=this.depth,e=this.encoder.encode(e,!s);const f=e.length;if(f){const u=O(),g=O(),m=this.resolution;for(let a=0;a<f;a++){let d=e[this.rtl?f-1-a:a];var n=d.length;if(n&&(s||!g[d])){var r=this.score?this.score(e,d,a,null,0):kt(m,f,a),h="";switch(this.tokenize){case"tolerant":if(D(this,g,d,r,t,i),n>2){for(let c=1,p,x,w,b;c<n-1;c++)p=d.charAt(c),x=d.charAt(c+1),w=d.substring(0,c)+x,b=d.substring(c+2),h=w+p+b,D(this,g,h,r,t,i),h=w+b,D(this,g,h,r,t,i);D(this,g,d.substring(0,d.length-1),r,t,i)}break;case"full":if(n>2){for(let c=0,p;c<n;c++)for(r=n;r>c;r--){h=d.substring(c,r),p=this.rtl?n-1-c:c;var l=this.score?this.score(e,d,a,h,p):kt(m,f,a,n,p);D(this,g,h,l,t,i)}break}case"bidirectional":case"reverse":if(n>1){for(l=n-1;l>0;l--){h=d[this.rtl?n-1-l:l]+h;var o=this.score?this.score(e,d,a,h,l):kt(m,f,a,n,l);D(this,g,h,o,t,i)}h=""}case"forward":if(n>1){for(l=0;l<n;l++)h+=d[this.rtl?n-1-l:l],D(this,g,h,r,t,i);break}default:if(D(this,g,d,r,t,i),s&&f>1&&a<f-1)for(n=this.N,h=d,r=Math.min(s+1,this.rtl?a+1:f-a),l=1;l<r;l++){d=e[this.rtl?f-1-a-l:a+l],o=this.bidirectional&&d>h;const c=this.score?this.score(e,h,a,d,l-1):kt(n+(f/2>n?0:1),f,a,r-1,l-1);D(this,u,o?h:d,c,t,i,o?d:h)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(i?{ins:t}:{del:t}),this.M&&ue(this)),this};function D(t,e,i,s,n,r,h){let l,o;if(!(l=e[i])||h&&!l[h]){if(h?(e=l||(e[i]=O()),e[h]=1,o=t.ctx,(l=o.get(h))?o=l:o.set(h,o=t.keystore?new H(t.keystore):new Map)):(o=t.map,e[i]=1),(l=o.get(i))?o=l:o.set(i,o=l=[]),r){for(let f=0,u;f<l.length;f++)if((u=l[f])&&u.includes(n)){if(f<=s)return;u.splice(u.indexOf(n),1),t.fastupdate&&(e=t.reg.get(n))&&e.splice(e.indexOf(u),1);break}}if(o=o[s]||(o[s]=[]),o.push(n),o.length===2**31-1){if(e=new tt(o),t.fastupdate)for(let f of t.reg.values())f.includes(o)&&(f[f.indexOf(o)]=e);l[s]=o=e}t.fastupdate&&((s=t.reg.get(n))?s.push(o):t.reg.set(n,[o]))}}function kt(t,e,i,s,n){return i&&t>1?e+(s||0)<=t?i+(n||0):(t-1)/(e+(s||0))*(i+(n||0))+1|0:0}W.prototype.search=function(t,e,i){if(i||(e||typeof t!="object"?typeof e=="object"&&(i=e,e=0):(i=t,t="")),i&&i.cache)return i.cache=!1,t=this.searchCache(t,e,i),i.cache=!0,t;let s=[],n,r,h,l=0,o,f,u,g,m;i&&(t=i.query||t,e=i.limit||e,l=i.offset||0,r=i.context,h=i.suggest,m=(o=i.resolve)&&i.enrich,u=i.boost,g=i.resolution,f=this.db&&i.tag),typeof o>"u"&&(o=this.resolve),r=this.depth&&r!==!1;let a=this.encoder.encode(t,!r);if(n=a.length,e=e||(o?100:0),n===1)return le.call(this,a[0],"",e,l,o,m,f);if(n===2&&r&&!h)return le.call(this,a[1],a[0],e,l,o,m,f);let d=O(),c=0,p;if(r&&(p=a[0],c=1),g||g===0||(g=p?this.N:this.resolution),this.db){if(this.db.search&&(i=this.db.search(this,a,e,l,h,o,m,f),i!==!1))return i;const x=this;return(async function(){for(let w,b;c<n;c++){if((b=a[c])&&!d[b]){if(d[b]=1,w=await Tt(x,b,p,0,0,!1,!1),w=fe(w,s,h,g)){s=w;break}p&&(h&&w&&s.length||(p=b))}h&&p&&c===n-1&&!s.length&&(g=x.resolution,p="",c=-1,d=O())}return oe(s,g,e,l,h,u,o)})()}for(let x,w;c<n;c++){if((w=a[c])&&!d[w]){if(d[w]=1,x=Tt(this,w,p,0,0,!1,!1),x=fe(x,s,h,g)){s=x;break}p&&(h&&x&&s.length||(p=w))}h&&p&&c===n-1&&!s.length&&(g=this.resolution,p="",c=-1,d=O())}return oe(s,g,e,l,h,u,o)};function oe(t,e,i,s,n,r,h){let l=t.length,o=t;if(l>1)o=wt(t,e,i,s,n,r,h);else if(l===1)return h?It.call(null,t[0],i,s):new A(t[0],this);return h?o:new A(o,this)}function le(t,e,i,s,n,r,h){return t=Tt(this,t,e,i,s,n,r,h),this.db?t.then(function(l){return n?l||[]:new A(l,this)}):t&&t.length?n?It.call(this,t,i,s):new A(t,this):n?[]:new A([],this)}function fe(t,e,i,s){let n=[];if(t&&t.length){if(t.length<=s){e.push(t);return}for(let r=0,h;r<s;r++)(h=t[r])&&(n[r]=h);if(n.length){e.push(n);return}}if(!i)return n}function Tt(t,e,i,s,n,r,h,l){let o;return i&&(o=t.bidirectional&&e>i)&&(o=i,i=e,e=o),t.db?t.db.get(e,i,s,n,r,h,l):(t=i?(t=t.ctx.get(i))&&t.get(e):t.map.get(e),t)}function W(t,e){if(!this||this.constructor!==W)return new W(t);if(t){var i=N(t)?t:t.preset;i&&(t=Object.assign({},Pe[i],t))}else t={};i=t.context;const s=i===!0?{depth:1}:i||{},n=N(t.encoder)?Ft[t.encoder]:t.encode||t.encoder||{};this.encoder=n.encode?n:typeof n=="object"?new q(n):{encode:n},this.resolution=t.resolution||9,this.tokenize=i=(i=t.tokenize)&&i!=="default"&&i!=="exact"&&i||"strict",this.depth=i==="strict"&&s.depth||0,this.bidirectional=s.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(i=t.keystore||0)&&(this.keystore=i),this.map=i?new H(i):new Map,this.ctx=i?new H(i):new Map,this.reg=e||(this.fastupdate?i?new H(i):new Map:i?new J(i):new Set),this.N=s.resolution||3,this.rtl=n.rtl||t.rtl||!1,this.cache=(i=t.cache||null)&&new L(i),this.resolve=t.resolve!==!1,(i=t.db)&&(this.db=this.mount(i)),this.M=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}y=W.prototype,y.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},y.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},y.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function ue(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}y.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},y.append=function(t,e){return this.add(t,e,!0)},y.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},y.update=function(t,e){const i=this,s=this.remove(t);return s&&s.then?s.then(()=>i.add(t,e)):this.add(t,e)},y.cleanup=function(){return this.fastupdate?(lt(this.map),this.depth&&lt(this.ctx),this):this},y.searchCache=Bt,y.export=function(t,e,i=0,s=0){let n,r;switch(s){case 0:n="reg",r=se(this.reg);break;case 1:n="cfg",r=null;break;case 2:n="map",r=Pt(this.map,this.reg.size);break;case 3:n="ctx",r=ie(this.ctx,this.reg.size);break;default:return}return xt.call(this,t,e,n,r,i,s)},y.import=function(t,e){if(e)switch(typeof e=="string"&&(e=JSON.parse(e)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=re(e,this.reg);break;case"map":this.map=$t(e,this.map);break;case"ctx":this.ctx=ne(e,this.ctx)}},y.serialize=function(t=!0){let e="",i="",s="";if(this.reg.size){let r;for(var n of this.reg.keys())r||(r=typeof n),e+=(e?",":"")+(r==="string"?'"'+n+'"':n);e="index.reg=new Set(["+e+"]);",i=he(this.map,r),i="index.map=new Map(["+i+"]);";for(const h of this.ctx.entries()){n=h[0];let l=he(h[1],r);l="new Map(["+l+"])",l='["'+n+'",'+l+"]",s+=(s?",":"")+l}s="index.ctx=new Map(["+s+"]);"}return t?"function inject(index){"+e+i+s+"}":e+i+s},_t(W.prototype);const ce=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),vt=["map","ctx","tag","reg","cfg"],U=O();function Kt(t,e={}){if(!this||this.constructor!==Kt)return new Kt(t,e);typeof t=="object"&&(e=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=e.field?e.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=e.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}y=Kt.prototype,y.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},y.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),U[t.id]||(U[t.id]=[]),U[t.id].push(t.field);const e=ce.open(t.id,1);return e.onupgradeneeded=function(){const i=t.db=this.result;for(let s=0,n;s<vt.length;s++){n=vt[s];for(let r=0,h;r<U[t.id].length;r++)h=U[t.id][r],i.objectStoreNames.contains(n+(n!=="reg"&&h?":"+h:""))||i.createObjectStore(n+(n!=="reg"&&h?":"+h:""))}},t.db=X(e,function(i){t.db=i,t.db.onversionchange=function(){t.close()}})},y.close=function(){this.db&&this.db.close(),this.db=null},y.destroy=function(){const t=ce.deleteDatabase(this.id);return X(t)},y.clear=function(){const t=[];for(let i=0,s;i<vt.length;i++){s=vt[i];for(let n=0,r;n<U[this.id].length;n++)r=U[this.id][n],t.push(s+(s!=="reg"&&r?":"+r:""))}const e=this.db.transaction(t,"readwrite");for(let i=0;i<t.length;i++)e.objectStore(t[i]).clear();return X(e)},y.get=function(t,e,i=0,s=0,n=!0,r=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const h=this;return X(t).then(function(l){let o=[];if(!l||!l.length)return o;if(n){if(!i&&!s&&l.length===1)return l[0];for(let f=0,u;f<l.length;f++)if((u=l[f])&&u.length){if(s>=u.length){s-=u.length;continue}const g=i?s+Math.min(u.length-s,i):u.length;for(let m=s;m<g;m++)o.push(u[m]);if(s=0,o.length===i)break}return r?h.enrich(o):o}return l})},y.tag=function(t,e=0,i=0,s=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const n=this;return X(t).then(function(r){return!r||!r.length||i>=r.length?[]:!e&&!i?r:(r=r.slice(i,i+e),s?n.enrich(r):r)})},y.enrich=function(t){typeof t!="object"&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),i=[];for(let s=0;s<t.length;s++)i[s]=X(e.get(t[s]));return Promise.all(i).then(function(s){for(let n=0;n<s.length;n++)s[n]={id:t[n],doc:s[n]?JSON.parse(s[n]):null};return s})},y.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),X(t).then(function(e){return!!e})},y.search=null,y.info=function(){},y.transaction=function(t,e,i){t+=t!=="reg"&&this.field?":"+this.field:"";let s=this.h[t+":"+e];if(s)return i.call(this,s);let n=this.db.transaction(t,e);this.h[t+":"+e]=s=n.objectStore(t);const r=i.call(this,s);return this.h[t+":"+e]=null,X(n).finally(function(){return r})},y.commit=async function(t){let e=t.commit_task,i=[];t.commit_task=[];for(let s=0,n;s<e.length;s++)n=e[s],n.del&&i.push(n.del);i.length&&await this.remove(i),t.reg.size&&(await this.transaction("map","readwrite",function(s){for(const n of t.map){const r=n[0],h=n[1];h.length&&(s.get(r).onsuccess=function(){let l=this.result;var o;if(l&&l.length){const f=Math.max(l.length,h.length);for(let u=0,g,m;u<f;u++)if((m=h[u])&&m.length){if((g=l[u])&&g.length)for(o=0;o<m.length;o++)g.push(m[o]);else l[u]=m;o=1}}else l=h,o=1;o&&s.put(l,r)})}}),await this.transaction("ctx","readwrite",function(s){for(const n of t.ctx){const r=n[0],h=n[1];for(const l of h){const o=l[0],f=l[1];f.length&&(s.get(r+":"+o).onsuccess=function(){let u=this.result;var g;if(u&&u.length){const m=Math.max(u.length,f.length);for(let a=0,d,c;a<m;a++)if((c=f[a])&&c.length){if((d=u[a])&&d.length)for(g=0;g<c.length;g++)d.push(c[g]);else u[a]=c;g=1}}else u=f,g=1;g&&s.put(u,r+":"+o)})}}}),t.store?await this.transaction("reg","readwrite",function(s){for(const n of t.store){const r=n[0],h=n[1];s.put(typeof h=="object"?JSON.stringify(h):1,r)}}):t.bypass||await this.transaction("reg","readwrite",function(s){for(const n of t.reg.keys())s.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(s){for(const n of t.tag){const r=n[0],h=n[1];h.length&&(s.get(r).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(h):h,s.put(l,r)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function Nt(t,e,i){const s=t.value;let n,r=0;for(let h=0,l;h<s.length;h++){if(l=i?s:s[h]){for(let o=0,f,u;o<e.length;o++)if(u=e[o],f=l.indexOf(u),f>=0)if(n=1,l.length>1)l.splice(f,1);else{s[h]=[];break}r+=l.length}if(i)break}r?n&&t.update(s):t.delete(),t.continue()}y.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const i=this.result;i&&Nt(i,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const i=this.result;i&&Nt(i,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const i=this.result;i&&Nt(i,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let i=0;i<t.length;i++)e.delete(t[i])})])};function X(t,e){return new Promise((i,s)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,i(this.result)},t.onerror=t.onblocked=s,t=null})}const $e=q,Te=F;async function Ke(t){const e=Ne(t),i=new Blob([e.buffer]).stream().pipeThrough(new DecompressionStream("gzip")),s=await new Response(i).arrayBuffer();return new TextDecoder().decode(s)}function Ne(t){if(typeof Buffer<"u")return new Uint8Array(Buffer.from(t,"base64"));if(typeof atob<"u"){const e=atob(t),i=e.length,s=new Uint8Array(i);for(let n=0;n<i;n++)s[n]=e.charCodeAt(n);return s}throw new Error("No base64 decoding function available.")}const He={ru:Je};function Je(t){return t.addMatcher("Ñ‘","Ðµ"),t.addMatcher("Ñ‚ÑŒÑÑ","Ñ‚ÑÑ"),t.addMatcher("Ð¶Ñ‹","Ð¶Ð¸"),t.addMatcher("ÑˆÑ‹","ÑˆÐ¸"),t.addMatcher("Ñ‡Ñ","Ñ‡Ð°"),t.addMatcher("Ð±Ð¾","Ð±Ñ‹"),t.addMatcher("Ñ€Ð¾Ñ","Ñ€Ð°Ñ"),t}const ge=50;let pe,Ht,bt,ae=-1,ft,Jt,Wt=[],Mt=0;onmessage=async t=>{const e=t.data;switch(e.type){case"init":pe=e.baseUrl,Ht=We(e);break;case"search":{await Ht,de(),ae=e.id,Wt=Ze(e.query),Mt=0,me(e.id,ge);break}case"more":{await Ht,de(),me(e.id,ge);break}}};async function We(t){try{const i=await(await fetch(pe+"search.json.gz?"+t.cacheId)).text(),s=await Ke(i),n=JSON.parse(s),r=new $e;He[t.language]?.(r),ft=new Te({document:{...n.documentDescriptor,encoder:r}}),Jt=Object.create(null);for(const h of n.categories)Jt[h.id]=h.priority;for(const h in n.export)ft.import(h,n.export[h])}catch(e){bt="Search init error: "+(e instanceof Error?e.message:String(e)),postMessage({type:"error",message:bt})}}function de(){bt&&postMessage({type:"error",message:bt})}function Ze(t){if(!t||!t.trim())return[];const e=ft.search(t,{limit:1e3}),i=new Set,s=[];let n=0;for(const r of e){const h=r.result;for(let l=0,o=h.length;l<o;l++){const f=h[l];if(!i.has(f)){i.add(f);const u=ft.get(f);if(!u)continue;s.push({id:f,priority:Jt[u?.category]??0,pos:n++})}}}return s.sort((r,h)=>h.priority-r.priority||r.pos-h.pos),s.map(r=>r.id)}function me(t,e){if(t!==ae)return;const i=Mt,s=i+e,n=Wt.slice(i,s);Mt=s;const r=n.map(o=>ft.get(o)),h=Mt<Wt.length;postMessage({type:"results",entries:r,hasMore:h})}var De=Object.freeze({__proto__:null})})();
